(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[100],{226:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t(47),l=t(0),c=t.n(l),s=t(260),o=t(292),i=t(309),m=t(302),u=t(105),p=t(2),f=t(258),d=t(25),b=t(430),E=t(259),v=t(571),g=(t(498),t(572));a.default=e=>{var a=c.a.useState(!0),t=Object(r.a)(a,2),l=t[0],h=t[1],j=c.a.useState(!1),y=Object(r.a)(j,2),O=y[0],x=y[1],k=c.a.useState([]),C=Object(r.a)(k,2),S=C[0],w=C[1],N=c.a.useState([]),L=Object(r.a)(N,2),R=L[0],z=L[1],A=c.a.useState({name:"",description:""}),J=Object(r.a)(A,2),_=J[0],B=J[1],D=c.a.useState({}),F=Object(r.a)(D,2),G=F[0],U=F[1];c.a.useEffect(()=>{var e=new AbortController;return Object(b.d)({action:"get"},e.signal).then(e=>{console.log(e),e.json.status&&(console.log(JSON.stringify(e.json.valid_powers)),w(e.json.valid_powers),h(!1))}).catch(e=>{console.log(e)}),()=>e.abort()},[]);var V=e=>{U(Object(n.a)(Object(n.a)({},G),{},{[e.target.name]:""})),B(Object(n.a)(Object(n.a)({},_),{},{[e.target.name]:e.target.value}))},H=S.map((e,a)=>{var t=e.replace(/_/g," ");return c.a.createElement(s.a,{md:4,key:a},c.a.createElement("div",{style:{cursor:"default",display:"flex",justifyContent:"flex-start",marginBottom:"8px",marginLeft:"2px"},onClick:()=>(e=>{var a=[...R];a[e]=!a[e],z(a)})(a)},c.a.createElement("div",{className:"mr-1"},c.a.createElement(v.a,{status:R[a]})),c.a.createElement("div",{style:{lineHeight:"21.25px"}},t[0].toUpperCase()+t.slice(1))))});return l?c.a.createElement(E.a,null):c.a.createElement(p.a,null,c.a.createElement(o.a,null,c.a.createElement(s.a,null,c.a.createElement(i.a,null,c.a.createElement(i.a.Body,null,c.a.createElement("h5",null,"Create Role"),c.a.createElement("hr",null),c.a.createElement(o.a,null,c.a.createElement(s.a,{md:12},c.a.createElement(m.a.Group,null,c.a.createElement(m.a.Label,null,"Role Name*"),c.a.createElement(m.a.Control,{name:"name",value:_.name,onChange:V,type:"text",placeholder:"Role Name"}),c.a.createElement(f.a,null,G.name))),c.a.createElement(s.a,{md:12},c.a.createElement(m.a.Group,null,c.a.createElement(m.a.Label,null,"Description"),c.a.createElement(m.a.Control,{name:"description",as:"textarea",rows:"6",value:_.description,onChange:V,type:"text",placeholder:"Description"}),c.a.createElement(f.a,null,G.description)))),c.a.createElement("br",null),c.a.createElement("h5",{style:{fontSize:"1.2em"}},"Permissions"),c.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:()=>{var e=[...R];for(var a in S)e[a]=!0;z(e)}},"Mark All"),c.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:()=>{var e=[...R];for(var a in S)e[a]=!1;z(e)}},"Unmark All"),c.a.createElement("hr",null),c.a.createElement(o.a,null,H),c.a.createElement("div",{className:"d-flex justify-content-end"},c.a.createElement(u.a,{variant:"warning",onClick:()=>{e.history.push("/roles")}},"Cancel"),c.a.createElement(u.a,{disabled:O,variant:"primary",onClick:()=>{var a=Object(g.a)(_),t=a.isValid,r=a.errors;if(!t)return d.a.fire({icon:"error",title:"Fix errors and retry submission!",background:"#ffe5de"}),void U(Object(n.a)({},r));x(!0);var l={action:"add",name:_.name,description:_.description,powers:S,values:R};Object(b.b)(l).then(a=>{console.log(a),a.json.status?(d.a.fire({icon:"success",title:"Role created successfully!",background:"#dffff0"}),e.history.push("/roles")):(x(!1),d.a.fire({icon:"error",title:a.json.error,background:"#ffe5de"}))}).catch(e=>{x(!1),console.log(e)})}},O?c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Submitting"):"Submit")))))))}},571:function(e,a,t){"use strict";var n=t(0),r=t.n(n);a.a=e=>{var a=e.status;return r.a.createElement("button",{className:a?"btn btn-primary btn-sm":"btn btn-outline-primary btn-sm",style:{padding:"0px 3px",margin:0,marginLeft:0,height:"21.18px",width:"21.11px"}},r.a.createElement("i",{className:"feather icon-".concat(a?"check":null," text-c-white f-8 m-0")}))}},572:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t(31),r=e=>{var a={};return Object(n.a)(e.name)&&(a.name="Name cannot be empty."),{isValid:Object(n.a)(a),errors:a}}}}]);
//# sourceMappingURL=100.73246a8d.chunk.js.map