(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[96],{195:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(47),c=a(15),o=a.n(c),s=a(28),l=a(0),u=a.n(l),i=a(292),p=a(260),m=a(309),f=a(302),d=a(252),b=a(105),g=a(282),v=a.n(g),h=a(2),j=(a(432),a(258)),y=a(277),O=a(25),x=a(31),E=a(49),k=[],w=function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.push(t.details[0]),Object(x.a)(t.sub_categories)||w(t.sub_categories),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=e=>{var t=u.a.useState(!0),a=Object(r.a)(t,2),c=a[0],l=a[1],g=u.a.useState(!1),C=Object(r.a)(g,2),I=C[0],S=C[1],_=u.a.useState({}),N=Object(r.a)(_,2),P=N[0],T=N[1],B=u.a.useState(!0),G=Object(r.a)(B,2),L=G[0],U=G[1],A=u.a.useState([]),F=Object(r.a)(A,2),J=F[0],V=F[1],D=u.a.useState([]),R=Object(r.a)(D,2),q=R[0],z=R[1],H=u.a.useState({}),K=Object(r.a)(H,2),M=K[0],Q=K[1];u.a.useEffect(()=>{var t=new AbortController;return Object(s.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=0,a.next=3,Object(y.d)({action:"get",item_category_id:e.match.params.id},t.signal).then(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.json.status){e.next=11;break}return T(t.json.item_category[0]),w(t.json.parent_tree),k.splice(k.length-1,1),e.next=7,z(k);case 7:k=[],n++,e.next=12;break;case 11:O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(e=>{console.log(e)});case 3:return a.next=5,Object(y.c)({action:"get",start:0,end:200,filter:"parent"},t.signal).then(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.json.status){e.next=7;break}return e.next=4,V(t.json.item_catagories);case 4:n++,e.next=8;break;case 7:O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(e=>{console.log(e)});case 5:2==n&&l(!1);case 6:case"end":return a.stop()}}),a)})))(),()=>t.abort()},[]),u.a.useEffect(()=>{if(q.length>0){var e={action:"get",item_category_id:q.length>0?q[q.length-1].id:null};Object(y.d)(e).then(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!t.json.status){e.next=8;break}return e.next=4,V([...t.json.sub_categories]);case 4:return e.next=6,T(Object(n.a)(Object(n.a)({},P),{},{parentId:""}));case 6:e.next=9;break;case 8:O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(e=>{console.log(e)})}},[q]);var W=e=>{var t;if(e.preventDefault(),t=e.target.name,Q(Object(n.a)(Object(n.a)({},M),{},{[t]:""})),T(Object(n.a)(Object(n.a)({},P),{},{[e.target.name]:e.target.value})),"parentId"===e.target.name){var a=e.nativeEvent.target.selectedIndex,r=e.nativeEvent.target[a].text;z([...q,{id:e.target.value,name:r}])}};return console.log("to be sent is",P.name,q.length>0?q[q.length-1].id:null),c?u.a.createElement(E.a,null):u.a.createElement(h.a,null,u.a.createElement(i.a,null,u.a.createElement(p.a,null,u.a.createElement(m.a,null,u.a.createElement(m.a.Body,null,u.a.createElement("h5",null,"Create Item Category"),u.a.createElement("hr",null),u.a.createElement(i.a,null,u.a.createElement(p.a,{md:6},u.a.createElement(f.a.Group,null,u.a.createElement(f.a.Label,null,"Category Name*"),u.a.createElement(f.a.Control,{name:"name",value:P.name,onChange:W,type:"text",placeholder:"Category Name"}),u.a.createElement(j.a,null,M.name))),u.a.createElement(p.a,{md:6},u.a.createElement(f.a.Group,null,u.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},u.a.createElement(f.a.Label,null,"Update Parent Category"),u.a.createElement("div",{style:{cursor:"pointer"},onClick:()=>{z([]),T(Object(n.a)(Object(n.a)({},P),{},{parentId:""})),V([]),Object(y.c)({action:"get",start:0,end:200,filter:"parent"}).then(function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),t.json.status?V(t.json.item_catagories):O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(e=>{console.log(e)})}},u.a.createElement(d.a,{style:{padding:"3px 8px 5px"},variant:"primary"},"Reset"))),u.a.createElement(f.a.Control,{name:"parentId",value:"",onChange:W,as:"select"},u.a.createElement("option",{value:"",disabled:!0},"Select Parent Category"),J.map((e,t)=>u.a.createElement("option",{key:t,value:e.id},e.name))),u.a.createElement("div",{style:{margin:"4px 3px 4px 3px",color:"#42768a"}},q.map((e,t)=>u.a.createElement("div",{key:t,style:{display:"inline"}},u.a.createElement("span",{key:t},e.name),t!==q.length-1?u.a.createElement("i",{className:"feather icon-chevron-right text-c-white f-15 "}):null))),u.a.createElement(j.a,null,M.parentId))),u.a.createElement(p.a,{md:12},u.a.createElement(f.a.Group,{className:"d-flex flex-column justify-content-end"},u.a.createElement(f.a.Label,{style:{marginBottom:"15px"}},"Is Active?"),u.a.createElement(v.a,{onChange:e=>{console.log(e),U(e)},checked:L}))),u.a.createElement(p.a,{md:2})),u.a.createElement("div",{className:"d-flex justify-content-end"},u.a.createElement(b.a,{variant:"warning",onClick:()=>{e.history.push("/item-categories")}},"Cancel"),u.a.createElement(b.a,{disabled:I,variant:"primary",onClick:()=>{if(Object(x.a)(P.name))Q(Object(n.a)(Object(n.a)({},M),{},{name:"Item category name can't be empty."}));else{var t={action:"update",name:P.name,item_category_id:P.id,parent:q.length>0?parseInt(q[q.length-1].id):null,is_active:L};console.log(t.parent,P.id),t.parent!==P.id?(S(!0),Object(y.e)(t).then(t=>{console.log(t),t.json.status?(O.a.fire({icon:"success",title:"Item Category updated successfully!",background:"#dffff0"}),e.history.push("/item-category/"+P.id)):(S(!1),O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"}))}).catch(e=>{S(!1),console.log(e)})):Q(Object(n.a)(Object(n.a)({},M),{},{parentId:"One can't be parent category of itself."}))}}},I?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Updating"):"Update")))))))}},258:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(302),o=a(31);t.a=e=>Object(o.a)(e.children)?r.a.createElement("span",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Text,{style:{color:"red"}},e.children))},277:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return u})),a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return p}));var n=a(15),r=a.n(n),c=a(28),o=a(41),s=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)("api/v1/inventory/items/categories/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)("api/v1/inventory/items/categories/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)("api/v1/inventory/items/category/add","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)("api/v1/inventory/items/category/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.a)("api/v1/inventory/items/category/update","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},432:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return c}));var n=a(31),r=e=>{var t={};return Object(n.a)(e.name)&&(t.name="Item Name cannot be empty."),Object(n.a)(e.cp)&&(t.cp="Cost Price can't be empty."),Object(n.a)(e.sp)&&(t.sp="Sales Price can't be empty."),Object(n.a)(e.category)&&(t.category="Item must have a category."),Object(n.a)(e.barcode)&&(t.barcode="Barcode field can't be empty."),{isValid:Object(n.a)(t),errors:t}},c=e=>{var t={};return Object(n.a)(e.catName)&&(t.catName="Category Name cannot be empty."),{isValid:Object(n.a)(t),errors:t}}}}]);
//# sourceMappingURL=96.882741ee.chunk.js.map