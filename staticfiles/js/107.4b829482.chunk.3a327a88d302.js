(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[107],{213:function(e,t,a){"use strict";a.r(t);var r=a(15),n=a.n(r),c=a(1),l=a(28),s=a(47),o=a(0),m=a.n(o),u=a(292),i=a(260),d=a(309),b=a(252),p=a(883),f=a(105),v=a(49),E=a(4),h=a(25),w=a(431),j=(a(13),a(9));t.default=Object(j.b)(e=>({auth:e.auth}))(e=>{var t=m.a.useState(null),a=Object(s.a)(t,2),r=a[0],o=a[1],j=m.a.useState(null),g=Object(s.a)(j,2),x=g[0],N=g[1],O=m.a.useState(!0),y=Object(s.a)(O,2),k=y[0],_=y[1],S=m.a.useState({showModal:!1,user:{}}),P=Object(s.a)(S,2),C=P[0],R=P[1];m.a.useEffect(()=>{var t=new AbortController;return Object(w.b)({action:"get",filter:"id",user_id:e.auth.user.user_id},t.signal).then(e=>{console.log(e.json),e.json.status&&(o(e.json.users[0]),N(e.json.users[0].profile||null),_(!1))}).catch(e=>{console.log(e)}),()=>t.abort()},[]);var L=function(){var e=Object(l.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C.user,a={action:"deactivate",user_id:t.id},console.log(a),Object(w.d)(a).then(e=>{console.log(e),e.json.status?(o(Object(c.a)(Object(c.a)({},r),{},{is_active:!r.is_active})),R(Object(c.a)(Object(c.a)({},R),{},{showModal:!1,user:{}})),h.a.fire({icon:"success",title:"User ".concat(t.is_active?"deactivated":"activated"," successfully!"),background:"#dffff0"})):h.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})}).catch(e=>{console.log(e)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(k)return m.a.createElement(v.a,null);try{var M=m.a.createElement("a",{href:"".concat(E.a.SERVER_URL).concat(x.profile_image)},m.a.createElement("img",{src:"".concat(E.a.SERVER_URL).concat(x.profile_image),className:"rounded w-25 mx-auto d-block",alt:"..."}))}catch(T){M=m.a.createElement("a",{href:"https://www.w3schools.com/w3images/avatar6.png"},m.a.createElement("img",{src:"https://www.w3schools.com/w3images/avatar6.png",className:"rounded w-25 mx-auto d-block",alt:"..."}))}return m.a.createElement(m.a.Fragment,null,m.a.createElement(u.a,{className:"d-flex justify-content-between pageHead"},m.a.createElement("h4",{className:"m-b-10",style:{lineHeight:"33px"}},r.name),m.a.createElement("div",null,m.a.createElement("button",{className:"btn btn-primary btn-sm shadow-2 mb-4",onClick:()=>e.history.push("/profile/update")}," ",m.a.createElement("i",{className:"feather icon-edit text-c-white f-15 m-r-5"}),"Update"),m.a.createElement("button",{className:"btn btn-danger btn-sm shadow-2 mb-4",onClick:()=>{R({showModal:!0,user:r})}},m.a.createElement("i",{className:"feather icon-user-x text-c-white f-15 m-r-5"}),"Deactivate Yourself"))),m.a.createElement(u.a,null,m.a.createElement(i.a,{xl:2}),m.a.createElement(i.a,{xl:8},m.a.createElement(d.a,null,m.a.createElement(d.a.Body,null,m.a.createElement("h5",{className:"mb-4"},"Your Profile"),m.a.createElement("div",{className:"row d-flex align-users-center"},m.a.createElement(i.a,{md:2}),m.a.createElement(i.a,{md:8},M,m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Name")),m.a.createElement("div",{className:"mt-1 mb-3"},r.name," "," ",r.is_active?m.a.createElement(b.a,{variant:"info"},"Active"):m.a.createElement(b.a,{variant:"secondary"},"Deactivated")),m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Username")),m.a.createElement("div",{className:"mt-1 mb-3"},r.username),m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Email")),m.a.createElement("div",{className:"mt-1 mb-3"},r.email),m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Role")),m.a.createElement("div",{className:"mt-1 mb-3"},r.role_str),x?m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"d-flex justify-content-between"},m.a.createElement("div",{className:"w-50"},m.a.createElement("div",{className:"mb-1 border-bottom pr-4"},m.a.createElement("b",null,"Phone 1")),m.a.createElement("div",{className:"mt-1 mb-3"},x.phone_number)),m.a.createElement("div",{className:"w-50 ml-4"},m.a.createElement("div",{className:"mb-1 border-bottom pr-4"},m.a.createElement("b",null,"Phone 2")),m.a.createElement("div",{className:"mt-1 mb-3"},x.phone_number2))),m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Address")),m.a.createElement("div",{className:"mt-1 mb-3"},x.address),m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Post")),m.a.createElement("div",{className:"mt-1 mb-3"},x.post)):null,m.a.createElement("div",{className:"mb-1 border-bottom"},m.a.createElement("b",null,"Last Login")),m.a.createElement("div",{className:"mt-1 mb-3"},r.last_login)),m.a.createElement(i.a,{md:2}))))),m.a.createElement(i.a,{xl:2}),m.a.createElement(p.a,{style:{border:"none",color:"#3d4075",boxShadow:"0 0 10px red"},show:C.showModal,onHide:()=>R(Object(c.a)(Object(c.a)({},C),{},{showModal:!1,user:{}}))},m.a.createElement(p.a.Header,{closeButton:!0,style:{margin:"auto 5px"}},m.a.createElement(p.a.Title,{style:{paddingLeft:"15px",color:"#3d4075",fontSize:"1.4em",fontWeight:"bold"}},"Are you sure?")),m.a.createElement(p.a.Body,{style:{paddingLeft:"30px"}},"You will be deactivated and logged out from the system. You will need to contact system admin to be able to use this system again."),m.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"10px"}},m.a.createElement(f.a,{variant:"secondary",onClick:()=>R(Object(c.a)(Object(c.a)({},C),{},{showModal:!1,user:{}}))},"Cancel"),m.a.createElement(f.a,{variant:"danger",onClick:L},"Deactivate")))))})},431:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return m})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return u}));var r=a(15),n=a.n(r),c=a(28),l=a(41),s=function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/add","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/list","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/update","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/list","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=107.4b829482.chunk.js.map