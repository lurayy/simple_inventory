(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[91],{224:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(15),c=r.n(a),u=r(28),s=r(47),i=r(0),o=r.n(i),l=r(260),p=r(292),f=r(309),v=r(302),m=r(105),d=r(2),b=r(258),h=r(25),O=(r(437),r(267),r(430)),j=r(259),x=r(571),y=(r(498),r(572));t.default=e=>{var t=o.a.useState(!0),r=Object(s.a)(t,2),a=r[0],i=r[1],w=o.a.useState(!1),E=Object(s.a)(w,2),g=E[0],k=E[1],S=o.a.useState([]),P=Object(s.a)(S,2),T=P[0],C=P[1],N=o.a.useState([]),L=Object(s.a)(N,2),R=L[0],z=L[1],A=o.a.useState({}),J=Object(s.a)(A,2),U=J[0],V=J[1],_=o.a.useState({}),B=Object(s.a)(_,2),D=B[0],F=B[1];o.a.useEffect(()=>{var t=new AbortController;return Object(O.e)({action:"get",role_id:e.match.params.id},t.signal).then(e=>{Object(u.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e.json),!e.json.status){t.next=11;break}return r=e.json.roles[0],t.next=5,C(Object.keys(r.powers));case 5:return t.next=7,z(Object.values(r.powers));case 7:return delete r.powers,t.next=10,V(r);case 10:i(!1);case 11:case"end":return t.stop()}}),t)})))()}).catch(e=>{console.log(e)}),()=>t.abort()},[]);var G=e=>{F(Object(n.a)(Object(n.a)({},D),{},{[e.target.name]:""})),V(Object(n.a)(Object(n.a)({},U),{},{[e.target.name]:e.target.value}))},H=T.map((e,t)=>{var r=e.replace(/_/g," ");return o.a.createElement(l.a,{md:4,key:t},o.a.createElement("div",{style:{cursor:"default",display:"flex",justifyContent:"flex-start",marginBottom:"8px",marginLeft:"2px"},onClick:()=>(e=>{var t=[...R];t[e]=!t[e],z(t)})(t)},o.a.createElement("div",{className:"mr-1"},o.a.createElement(x.a,{status:R[t]})),o.a.createElement("div",{style:{lineHeight:"21.25px"}},r[0].toUpperCase()+r.slice(1))))});return a?o.a.createElement(j.a,null):o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(l.a,null,o.a.createElement(f.a,null,o.a.createElement(f.a.Body,null,o.a.createElement("h5",null,"Update Role"),o.a.createElement("hr",null),o.a.createElement(p.a,null,o.a.createElement(l.a,{md:12},o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Label,null,"Role Name*"),o.a.createElement(v.a.Control,{name:"name",value:U.name,onChange:G,type:"text",placeholder:"Role Name"}),o.a.createElement(b.a,null,D.name))),o.a.createElement(l.a,{md:12},o.a.createElement(v.a.Group,null,o.a.createElement(v.a.Label,null,"Description"),o.a.createElement(v.a.Control,{name:"description",as:"textarea",rows:"6",value:U.description,onChange:G,type:"text",placeholder:"Description"}),o.a.createElement(b.a,null,D.description)))),o.a.createElement("br",null),o.a.createElement("h5",{style:{fontSize:"1.2em"}},"Permissions"),o.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:()=>{var e=[...R];for(var t in T)e[t]=!0;z(e)}},"Mark All"),o.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:()=>{var e=[...R];for(var t in T)e[t]=!1;z(e)}},"Unmark All"),o.a.createElement("hr",null),o.a.createElement(p.a,null,H),o.a.createElement("div",{className:"d-flex justify-content-end"},o.a.createElement(m.a,{variant:"warning",onClick:()=>{e.history.push("/roles")}},"Cancel"),o.a.createElement(m.a,{disabled:g,variant:"primary",onClick:()=>{var t=Object(y.a)(U),r=t.isValid,a=t.errors;if(!r)return h.a.fire({icon:"error",title:"Fix errors and retry submission!",background:"#ffe5de"}),void F(Object(n.a)({},a));k(!0);var c={action:"update",role_id:U.id,name:U.name,description:U.description||"",powers:T,values:R};console.log(JSON.stringify(c)),Object(O.g)(c).then(t=>{t.json.status?(h.a.fire({icon:"success",title:"Role updated successfully!",background:"#dffff0"}),e.history.push("/roles")):(k(!1),h.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"}))}).catch(e=>{k(!1),console.log(e)})}},g?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Submitting"):"Submit")))))))}},267:function(e,t,r){"use strict";r.d(t,"j",(function(){return O})),r.d(t,"b",(function(){return j})),r.d(t,"o",(function(){return y})),r.d(t,"e",(function(){return x})),r.d(t,"k",(function(){return h})),r.d(t,"i",(function(){return s})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"n",(function(){return p})),r.d(t,"h",(function(){return l})),r.d(t,"m",(function(){return f})),r.d(t,"c",(function(){return m})),r.d(t,"f",(function(){return v})),r.d(t,"p",(function(){return b})),r.d(t,"l",(function(){return d})),r.d(t,"g",(function(){return w}));var n=r(15),a=r.n(n),c=r(28),u=r(41),s=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/discounts/get","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/discounts/delete","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/discount/add","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/discount/get","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/discount/update","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/taxes/get","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/taxes/delete","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/tax/add","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/tax/get","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/tax/update","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/inventory/purchaseorders/status","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/inventory/placements/get","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/inventory/placements/assign","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/inventory/placements/assign","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/inventory/placements/assign","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/user/countries/get ","POST",t,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()},437:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(31),a=e=>{var t={};return Object(n.a)(e.name)&&(t.name="Name of tax cannot be empty!"),Object(n.a)(e.type)&&(t.type="Provide type of tax!"),Object(n.a)(e.rate)&&(t.rate="Provide rate of tax!"),{isValid:Object(n.a)(t),errors:t}}},571:function(e,t,r){"use strict";var n=r(0),a=r.n(n);t.a=e=>{var t=e.status;return a.a.createElement("button",{className:t?"btn btn-primary btn-sm":"btn btn-outline-primary btn-sm",style:{padding:"0px 3px",margin:0,marginLeft:0,height:"21.18px",width:"21.11px"}},a.a.createElement("i",{className:"feather icon-".concat(t?"check":null," text-c-white f-8 m-0")}))}},572:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(31),a=e=>{var t={};return Object(n.a)(e.name)&&(t.name="Name cannot be empty."),{isValid:Object(n.a)(t),errors:t}}}}]);
//# sourceMappingURL=91.5cea0f64.chunk.js.map