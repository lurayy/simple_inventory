(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[101],{243:function(e,a,t){"use strict";t.r(a);var r=t(15),n=t.n(r),l=t(28),c=t(1),o=t(47),s=t(0),u=t.n(s),p=t(292),i=t(260),m=t(309),d=t(302),f=t(105),h=t(2),b=t(258),v=(t(277),t(259)),E=t(25),O=(t(430),t(431)),g=(t(498),t(9)),w=t(31),j=t(4);function y(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){a(t.result)},t.onerror=function(e){console.log("Error: ",e)}}a.default=Object(g.b)(e=>({auth:e.auth}))(e=>{var a=u.a.useState(!0),t=Object(o.a)(a,2),r=t[0],s=t[1],g=u.a.useState(!1),x=Object(o.a)(g,2),C=x[0],P=x[1],N=u.a.useState({username:"",email:"",fname:"",lname:"",password:"",password2:"",role:""}),k=Object(o.a)(N,2),S=k[0],L=k[1],_=u.a.useState({address:"",phone1:"",phone2:"",post:"",profileImage:"",profileImageName:""}),I=Object(o.a)(_,2),G=I[0],T=I[1],U=u.a.useState({}),A=Object(o.a)(U,2),F=A[0],R=A[1];u.a.useEffect(()=>{var a=new AbortController;return Object(O.c)({action:"get",filter:"id",user_id:e.auth.user.user_id},a.signal).then(e=>{if(console.log(e),e.json.status){var a=e.json.users[0];L(Object(c.a)(Object(c.a)({},S),{},{username:a.username,email:a.email,fname:a.first_name,lname:a.last_name,role:a.role_str}));try{var t=a.profile,r=t.profile_image.split("/"),n=r[r.length-1],l=j.a.SERVER_URL+t.profile_image;console.log(l),T(Object(c.a)(Object(c.a)({},G),{},{address:t.address,phone1:t.phone_number,phone2:t.phone_number2,post:t.post,profileImage:"",profileImageName:l})),console.log(n)}catch(o){console.log(o)}s(!1)}}).catch(e=>{console.log(e)}),()=>a.abort()},[]);var z=e=>{var a=e.target,t=a.name,r=(a.type,a.value);L(Object(c.a)(Object(c.a)({},S),{},{[t]:r})),R(Object(c.a)(Object(c.a)({},F),{},{[t]:""}))},J=e=>{console.log("here it changes");var a=e.target,t=a.name,r=(a.type,a.value);T(Object(c.a)(Object(c.a)({},G),{},{[t]:r})),R(Object(c.a)(Object(c.a)({},F),{},{[t]:""}))},V=function(){var e=Object(l.a)(n.a.mark((function e(a){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files[0],console.log(t),y(t,e=>{T(Object(c.a)(Object(c.a)({},G),{},{profileImage:e,profileImageName:e}))});case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();console.log(G);return r?u.a.createElement(v.a,null):u.a.createElement(h.a,null,u.a.createElement(p.a,null,u.a.createElement(i.a,null,u.a.createElement(m.a,null,u.a.createElement(m.a.Body,null,u.a.createElement("h5",null,"Update Profile"),u.a.createElement("hr",null),u.a.createElement(p.a,null,u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Username*"),u.a.createElement(d.a.Control,{name:"username",value:S.username,onChange:z,type:"text",placeholder:"Username"}),u.a.createElement(b.a,null,F.username))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Email*"),u.a.createElement(d.a.Control,{name:"email",value:S.email,onChange:z,type:"text",placeholder:"Email"}),u.a.createElement(b.a,null,F.email))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"First Name*"),u.a.createElement(d.a.Control,{name:"fname",value:S.fname,onChange:z,type:"text",placeholder:"First Name"}),u.a.createElement(b.a,null,F.fname))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Last Name*"),u.a.createElement(d.a.Control,{name:"lname",value:S.lname,onChange:z,type:"text",placeholder:"Last Name"}),u.a.createElement(b.a,null,F.lname))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Password*"),u.a.createElement(d.a.Control,{name:"password",value:S.password||"",onChange:z,type:"password",placeholder:"Password"}),u.a.createElement(b.a,null,F.password))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Confirm Password*"),u.a.createElement(d.a.Control,{name:"password2",value:S.password2||"",onChange:z,type:"password",placeholder:"Confirm Password"}),u.a.createElement(b.a,null,F.password2)))),u.a.createElement("br",null),u.a.createElement("h5",null,"Extra Details"),u.a.createElement("hr",null),u.a.createElement(p.a,null,u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Address"),u.a.createElement(d.a.Control,{name:"address",value:G.address||"",onChange:J,type:"text",placeholder:"Address"}),u.a.createElement(b.a,null,F.address))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Phone No     1"),u.a.createElement(d.a.Control,{name:"phone1",value:G.phone1||"",onChange:J,type:"text",placeholder:"Phone No 1"}),u.a.createElement(b.a,null,F.phone1))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Phone No 2"),u.a.createElement(d.a.Control,{name:"phone2",value:G.phone2||"",onChange:J,type:"text",placeholder:"Phone No 2"}),u.a.createElement(b.a,null,F.phone2))),u.a.createElement(i.a,{md:6},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Post"),u.a.createElement(d.a.Control,{name:"post",value:G.post||"",onChange:J,type:"text",placeholder:"Post"}),u.a.createElement(b.a,null,F.post))),u.a.createElement(i.a,{md:4},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"Profile Image"),u.a.createElement(d.a.File,{label:G.profileImageName?"Change photo":"No file selected","data-browse":"Browse",custom:!0,onChange:V}),u.a.createElement(b.a,null,F.profileImage))),G.profileImageName?u.a.createElement(i.a,{md:2},u.a.createElement(d.a.Group,null,u.a.createElement(d.a.Label,null,"\u200b"),u.a.createElement("div",null,u.a.createElement("img",{src:G.profileImageName,alt:"",style:{height:"42px",minWidth:"42px",width:"42px",objectFit:"cover"}}),u.a.createElement("i",{onClick:()=>{T(Object(c.a)(Object(c.a)({},G),{},{profileImage:"remove",profileImageName:null}))},className:"feather icon-x text-c-red f-15 m-l-5 m-t-6",style:{cursor:"pointer",border:"1px solid red",borderRadius:"3px"}})))):null),u.a.createElement("div",{className:"d-flex justify-content-end"},u.a.createElement(f.a,{variant:"warning",onClick:()=>{e.history.push("/profile")}},"Cancel"),u.a.createElement(f.a,{disabled:C,variant:"primary",onClick:()=>{var a=(e=>{var a={};return Object(w.a)(e.fname)&&(a.fname="First Name cannot be empty."),Object(w.a)(e.lname)&&(a.lname="Last name can't be empty."),Object(w.a)(e.username)&&(a.username="User name can't be empty."),Object(w.a)(e.email)&&(a.email="Email can't be empty."),e.email&&!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)&&(a.email="Email not valid."),e.password2&&Object(w.a)(e.password)&&(a.password="Password can't be empty."),Object(w.a)(e.password2)&&e.password&&(a.password2="Confirm the password."),e.password&&e.password2&&e.password!==e.password2&&(a.password2="Passwords must match."),{isValid:Object(w.a)(a),errors:a}})(S),t=a.isValid,r=a.errors;if(!t)return console.log(r),void R(Object(c.a)({},r));console.log("no errros");var o={action:"update",email:S.email,password:S.password||null,first_name:S.fname,last_name:S.lname,profile:{address:G.address,phone_number:G.phone1,phone_number2:G.phone2,post:G.post,profile_image:G.profileImage}};console.log(JSON.stringify(o)),Object(O.e)(o).then(function(){var a=Object(l.a)(n.a.mark((function a(t){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log(t),t.json.status?(E.a.fire({icon:"success",title:"User Updated successfully!",background:"#dffff0"}),e.history.push("/profile")):E.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch(e=>{P(!1)})}},C?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Submitting"):"Submit")))))))})},277:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"b",(function(){return s})),t.d(a,"a",(function(){return u})),t.d(a,"d",(function(){return p})),t.d(a,"e",(function(){return i}));var r=t(15),n=t.n(r),l=t(28),c=t(41),o=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/categories/get","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/categories/delete","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/add","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/get","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/update","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()},431:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return i})),t.d(a,"e",(function(){return u})),t.d(a,"c",(function(){return s})),t.d(a,"d",(function(){return p}));var r=t(15),n=t.n(r),l=t(28),c=t(41),o=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/add","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/list","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/update","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/delete","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(n.a.mark((function e(a,t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/list","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=101.2eefaa53.chunk.js.map