(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[110],{884:function(e,a,t){"use strict";t.r(a);var n=t(20),s=t.n(n),r=t(33),c=t(1),o=t(55),l=t(0),u=t.n(l),i=(t(10),t(504),t(3)),m=(t(90),t(34),t(14),t(36),t(262)),d=t(580),p=t(479),b=t(30),f=t(38),h=function(e){var a=u.a.useState(""),t=Object(o.a)(a,2),n=t[0],l=t[1],i=u.a.useState({}),h=Object(o.a)(i,2),w=h[0],E=h[1],y=e.location.search,j=(new URLSearchParams(y)||"").get("email")||"";Object(d.a)(j)||(j="");var N=function(){var a=Object(r.a)(s.a.mark((function a(){var t,r,o;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Object(d.b)(n),r=t.isValid,o=t.errors,r){a.next=4;break}return E(o),a.abrupt("return");case 4:Object(p.e)({code:n}).then((function(a){console.log(a),a.json.status?(e.getCode(n),e.showResetPassword()):E(Object(c.a)(Object(c.a)({},o),{},{code:a.json.error}))})).catch((function(e){return console.log(e)}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("div",{className:"mb-4"},u.a.createElement("i",{className:"feather icon-unlock auth-icon"})),u.a.createElement("h3",{className:"mb-4"},"Reset Password"),u.a.createElement("p",{className:"mb-3 text-muted"},"Check your mail and enter the code you received."),u.a.createElement("div",{className:"input-group mb-3",style:{}},u.a.createElement("input",{name:"code",style:{display:"block",width:"100%"},type:"number",className:"form-control",placeholder:"Code",value:f.data.code,onChange:function(e){E(Object(c.a)(Object(c.a)({},w),{},{[e.target.name]:""})),l(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&N()}}),u.a.createElement(m.a,null,w.code)),u.a.createElement("button",{className:"btn btn-primary shadow-2 mb-4",onClick:N},"Continue"),j?u.a.createElement("p",{className:"mb-0 text-muted"},"Didn't Receive Code?",u.a.createElement("span",{className:"btn-link",style:{cursor:"pointer"},onClick:function(){j&&Object(p.d)({email:j}).then((function(a){console.log(a),a.json.status?b.a.fire({icon:"error",title:a.json.error,background:"#ffe5de"}):(b.a.fire({icon:"success",title:"Code send to the email successfully!",background:"#dffff0"}),e.history.push("/reset-password"))})).catch((function(e){return console.log(e)}))}},"  ","Resend")):null)};a.default=function(e){var a=u.a.useState(!1),t=Object(o.a)(a,2),n=t[0],l=t[1],f=u.a.useState({}),w=Object(o.a)(f,2),E=w[0],y=w[1],j=u.a.useState({password:"",password2:"",code:""}),N=Object(o.a)(j,2),g=N[0],v=N[1],O=function(){return l(!0)},k=function(e){y(Object(c.a)(Object(c.a)({},E),{},{[e.target.name]:""})),v(Object(c.a)(Object(c.a)({},g),{},{[e.target.name]:e.target.value}))},C=function(e){"Enter"===e.key&&x()},x=function(){var a=Object(r.a)(s.a.mark((function a(){var t,n,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=Object(d.c)(g),n=t.isValid,r=t.errors,n){a.next=4;break}return y(r),a.abrupt("return");case 4:console.log("Data is ",g),Object(p.c)({code:g.code,password:g.password}).then((function(a){console.log(a),a.json.status?(b.a.fire({icon:"success",title:"Password change successful!",background:"#dffff0"}),e.history.push("/signin")):b.a.fire({icon:"error",title:a.json.error,background:"#ffe5de"})})).catch((function(e){return console.log(e)}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return O?u.a.createElement(i.a,null,u.a.createElement("div",{className:"auth-wrapper"},u.a.createElement("div",{className:"auth-content"},u.a.createElement("div",{className:"auth-bg"},u.a.createElement("span",{className:"r"}),u.a.createElement("span",{className:"r s"}),u.a.createElement("span",{className:"r s"}),u.a.createElement("span",{className:"r"})),u.a.createElement("div",{className:"card"},n?u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("div",{className:"mb-4"},u.a.createElement("i",{className:"feather icon-unlock auth-icon"})),u.a.createElement("h3",{className:"mb-4"},"Reset Password"),u.a.createElement("p",{className:"mb-3 text-muted"},"Get code to reset your password."),u.a.createElement("div",{className:"input-group mb-3",style:{}},u.a.createElement("input",{name:"password",style:{display:"block",width:"100%"},type:"password",className:"form-control",placeholder:"New Password",value:g.password,onChange:k,onKeyDown:C}),u.a.createElement(m.a,null,E.password)),u.a.createElement("div",{className:"input-group mb-3",style:{}},u.a.createElement("input",{name:"password2",style:{display:"block",width:"100%"},type:"password",className:"form-control",placeholder:"Confirm Password",value:g.password2,onChange:k,onKeyDown:C}),u.a.createElement(m.a,null,E.password2)),u.a.createElement("button",{className:"btn btn-primary shadow-2 mb-4",onClick:x},"Reset Password")):u.a.createElement(h,{location:e.location,showResetPassword:O,getCode:function(e){v(Object(c.a)(Object(c.a)({},g),{},{code:e}))}}))))):u.a.createElement(h,null)}}}]);
//# sourceMappingURL=110.d81bc18a.chunk.js.map