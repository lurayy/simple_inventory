(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[107],{217:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a.n(n),c=a(1),l=a(33),s=a(55),o=a(0),u=a.n(o),m=a(296),i=a(264),d=a(313),b=a(256),f=a(888),p=a(111),v=a(57),E=a(5),h=a(30),w=a(435),j=(a(14),a(10));t.default=Object(j.b)((function(e){return{auth:e.auth}}))((function(e){var t=u.a.useState(null),a=Object(s.a)(t,2),n=a[0],o=a[1],j=u.a.useState(null),g=Object(s.a)(j,2),x=g[0],N=g[1],O=u.a.useState(!0),y=Object(s.a)(O,2),k=y[0],_=y[1],S=u.a.useState({showModal:!1,user:{}}),P=Object(s.a)(S,2),C=P[0],R=P[1];u.a.useEffect((function(){var t=new AbortController;return Object(w.b)({action:"get",filter:"id",user_id:e.auth.user.user_id},t.signal).then((function(e){console.log(e.json),e.json.status&&(o(e.json.users[0]),N(e.json.users[0].profile||null),_(!1))})).catch((function(e){console.log(e)})),function(){return t.abort()}}),[]);var L=function(){var e=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C.user,a={action:"deactivate",user_id:t.id},console.log(a),Object(w.d)(a).then((function(e){console.log(e),e.json.status?(o(Object(c.a)(Object(c.a)({},n),{},{is_active:!n.is_active})),R(Object(c.a)(Object(c.a)({},R),{},{showModal:!1,user:{}})),h.a.fire({icon:"success",title:"User ".concat(t.is_active?"deactivated":"activated"," successfully!"),background:"#dffff0"})):h.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(k)return u.a.createElement(v.a,null);try{var M=u.a.createElement("a",{href:"".concat(E.a.SERVER_URL).concat(x.profile_image)},u.a.createElement("img",{src:"".concat(E.a.SERVER_URL).concat(x.profile_image),className:"rounded w-25 mx-auto d-block",alt:"..."}))}catch(T){M=u.a.createElement("a",{href:"https://www.w3schools.com/w3images/avatar6.png"},u.a.createElement("img",{src:"https://www.w3schools.com/w3images/avatar6.png",className:"rounded w-25 mx-auto d-block",alt:"..."}))}return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{className:"d-flex justify-content-between pageHead"},u.a.createElement("h4",{className:"m-b-10",style:{lineHeight:"33px"}},n.name),u.a.createElement("div",null,u.a.createElement("button",{className:"btn btn-primary btn-sm shadow-2 mb-4",onClick:function(){return e.history.push("/profile/update")}}," ",u.a.createElement("i",{className:"feather icon-edit text-c-white f-15 m-r-5"}),"Update"),u.a.createElement("button",{className:"btn btn-danger btn-sm shadow-2 mb-4",onClick:function(){R({showModal:!0,user:n})}},u.a.createElement("i",{className:"feather icon-user-x text-c-white f-15 m-r-5"}),"Deactivate Yourself"))),u.a.createElement(m.a,null,u.a.createElement(i.a,{xl:2}),u.a.createElement(i.a,{xl:8},u.a.createElement(d.a,null,u.a.createElement(d.a.Body,null,u.a.createElement("h5",{className:"mb-4"},"Your Profile"),u.a.createElement("div",{className:"row d-flex align-users-center"},u.a.createElement(i.a,{md:2}),u.a.createElement(i.a,{md:8},M,u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Name")),u.a.createElement("div",{className:"mt-1 mb-3"},n.name," "," ",n.is_active?u.a.createElement(b.a,{variant:"info"},"Active"):u.a.createElement(b.a,{variant:"secondary"},"Deactivated")),u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Username")),u.a.createElement("div",{className:"mt-1 mb-3"},n.username),u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Email")),u.a.createElement("div",{className:"mt-1 mb-3"},n.email),u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Role")),u.a.createElement("div",{className:"mt-1 mb-3"},n.role_str),x?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("div",{className:"w-50"},u.a.createElement("div",{className:"mb-1 border-bottom pr-4"},u.a.createElement("b",null,"Phone 1")),u.a.createElement("div",{className:"mt-1 mb-3"},x.phone_number)),u.a.createElement("div",{className:"w-50 ml-4"},u.a.createElement("div",{className:"mb-1 border-bottom pr-4"},u.a.createElement("b",null,"Phone 2")),u.a.createElement("div",{className:"mt-1 mb-3"},x.phone_number2))),u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Address")),u.a.createElement("div",{className:"mt-1 mb-3"},x.address),u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Post")),u.a.createElement("div",{className:"mt-1 mb-3"},x.post)):null,u.a.createElement("div",{className:"mb-1 border-bottom"},u.a.createElement("b",null,"Last Login")),u.a.createElement("div",{className:"mt-1 mb-3"},n.last_login)),u.a.createElement(i.a,{md:2}))))),u.a.createElement(i.a,{xl:2}),u.a.createElement(f.a,{style:{border:"none",color:"#3d4075",boxShadow:"0 0 10px red"},show:C.showModal,onHide:function(){return R(Object(c.a)(Object(c.a)({},C),{},{showModal:!1,user:{}}))}},u.a.createElement(f.a.Header,{closeButton:!0,style:{margin:"auto 5px"}},u.a.createElement(f.a.Title,{style:{paddingLeft:"15px",color:"#3d4075",fontSize:"1.4em",fontWeight:"bold"}},"Are you sure?")),u.a.createElement(f.a.Body,{style:{paddingLeft:"30px"}},"You will be deactivated and logged out from the system. You will need to contact system admin to be able to use this system again."),u.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"10px"}},u.a.createElement(p.a,{variant:"secondary",onClick:function(){return R(Object(c.a)(Object(c.a)({},C),{},{showModal:!1,user:{}}))}},"Cancel"),u.a.createElement(p.a,{variant:"danger",onClick:L},"Deactivate")))))}))},435:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return u})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return m}));var n=a(20),r=a.n(n),c=a(33),l=a(47),s=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/add","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/list","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/update","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.a)("api/v1/user/list","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=107.d7d1f575.chunk.js.map