(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[115],{218:function(e,t,a){"use strict";a.r(t);var n=a(20),l=a.n(n),r=a(2),c=a(33),o=a(1),u=a(55),s=a(0),i=a.n(s),m=a(296),d=a(264),f=a(313),E=a(298),b=a(3),h=a(267),p=(a(263),a(269)),j=a(30),x=a(36),O=a(274),w=a(273),v=a(271),y=a(291),g=a(519),k=a(275);t.default=function(e){var t=i.a.useState([]),a=Object(u.a)(t,2),n=a[0],s=a[1],N=i.a.useState(!0),C=Object(u.a)(N,2),M=C[0],T=C[1],I=i.a.useState({showModal:!1,taxId:null}),S=Object(u.a)(I,2),_=S[0],A=S[1],D=i.a.useState(0),J=Object(u.a)(D,2),B=J[0],F=J[1];i.a.useEffect((function(){var t=new AbortController;return Object(v.m)(Object(o.a)(Object(o.a)({action:"get",filter:"none"},Object(y.m)(e)),Object(k.a)(e)),t.signal).then((function(e){console.log(e),e.json.status?(console.log(e.json.taxes),s(e.json.taxes),F(e.json.count),T(!1)):j.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})})).catch((function(e){console.log(e)})),function(){return t.abort()}}),[]);var H=n.map((function(t,a){return i.a.createElement("tr",{key:a},i.a.createElement("th",{scope:"row"},t.id),i.a.createElement("td",{onClick:function(){e.history.push("/tax/"+t.id)},style:{cursor:"pointer",color:"#55588b"}},t.name),i.a.createElement("td",null,t.rate),i.a.createElement("td",null,t.tax_type),i.a.createElement("td",null,t.code),i.a.createElement("td",null,t.is_active?"Yes":"No"),i.a.createElement("td",null,i.a.createElement("i",{className:"feather icon-edit text-c-green f-19 m-r-10",style:{cursor:"pointer"},onClick:function(){return e.history.push("/tax/update/"+t.id)}}),i.a.createElement("i",{className:"feather icon-trash-2 text-c-red f-19 m-r-5",style:{cursor:"pointer"},onClick:function(){return e=t.id,void A({showModal:!0,taxId:e});var e}})))}));return i.a.createElement(b.a,null,i.a.createElement(m.a,{className:"d-flex justify-content-between pageHead"},i.a.createElement("h4",{className:"m-b-10"},"Taxes"),i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-primary btn-sm shadow-2 mb-4",onClick:function(){return e.history.push("tax/create")}}," ",i.a.createElement("i",{className:"fa fa-plus text-c-white f-15 m-r-5"}),"Add New"))),i.a.createElement(m.a,null,i.a.createElement(d.a,null,i.a.createElement(f.a,null,i.a.createElement(f.a.Body,null,i.a.createElement(g.a,null),i.a.createElement(E.a,{striped:!0,responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#"),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Rate"),i.a.createElement("th",null,"Tax Type"),i.a.createElement("th",null,"Tax Code"),i.a.createElement("th",null,"Enabled"),i.a.createElement("th",null))),i.a.createElement("tbody",null,H||"")),Object(x.a)(n)&&!M?i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,null,"Data not available"),i.a.createElement("br",null),i.a.createElement("br",null)):"",M?i.a.createElement(O.a,null):null,i.a.createElement(w.a,{instanceCount:B}))),i.a.createElement(p.a,{show:_.showModal,onCancel:function(){return A(Object(o.a)(Object(o.a)({},_),{},{showModal:!1}))},onDelete:function(){return e=_.taxId,void Object(v.f)({action:"delete",taxes_id:[e]}).then(function(){var t=Object(c.a)(l.a.mark((function t(a){var c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a.json),!a.json.status){t.next=12;break}return c=n.find((function(t){return t.id===e})),(u=n).splice(u.indexOf(c),1),t.next=7,s(Object(r.a)(u));case 7:return t.next=9,A(Object(o.a)(Object(o.a)({},A),{},{showModal:!1,taxId:null}));case 9:j.a.fire({icon:"success",title:"Tax deleted successfully!",background:"#dffff0"}),t.next=13;break;case 12:j.a.fire({icon:"error",title:a.json.error,background:"#ffe5de"});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}));var e}}))))}}}]);
//# sourceMappingURL=115.a95e92b7.chunk.js.map