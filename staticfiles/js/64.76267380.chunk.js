(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[64],{193:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n(55),u=n(0),s=n.n(u),l=n(296),i=n(264),o=n(313),m=n(256),p=n(298),f=n(885),d=n(57),v=n(30),b=n(269),h=n(311),E=(n(431),n(275)),O=n(444),j=n(297),x=n(486),w=n(267),y=n(273);t.default=function(e){var t=s.a.useState(null),n=Object(c.a)(t,2),u=n[0],g=n[1],k=s.a.useState(!0),S=Object(c.a)(k,2),C=S[0],N=S[1],T=s.a.useState({showModal:!1,customerId:null}),P=Object(c.a)(T,2),_=P[0],I=P[1],A=s.a.useState([]),B=Object(c.a)(A,2),D=B[0],F=B[1],L=s.a.useState(0),z=Object(c.a)(L,2),M=z[0],R=z[1];s.a.useEffect((function(){var t=new AbortController,n=Object(r.a)({action:"get",filter:"multiple",filters:{date:!1,start_date:null,end_date:null,customer:!0,customer_id:e.match.params.id,status:!1,status_id:null,active:null,canceled:null}},Object(E.a)(e));return Promise.all([Object(h.c)({action:"get",customer_id:e.match.params.id,filter:"none"},t.signal),Object(O.h)(n,t.signal)]).then((function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];n.json.status?g(n.json.customers[0]):v.a.fire({icon:"error",title:n.json.error,background:"#ffe5de"}),r.json.status?(F(Object(a.a)(r.json.invoices)),R(r.json.count)):v.a.fire({icon:"error",title:r.json.error,background:"#ffe5de"}),N(!1)})).catch((function(e){return console.log(e)})),function(){return t.abort()}}),[]);var W=D.map((function(t,n){return s.a.createElement("tr",{key:n,style:{cursor:"pointer"},onClick:function(n){e.history.push("/invoice/"+t.id)}},s.a.createElement("td",null,t.invoice_number),s.a.createElement("td",{style:{maxWidth:"200px",overflow:"hidden",paddingRight:"50px"}},t.items),s.a.createElement("td",null,new Date(t.invoiced_on).toDateString()),s.a.createElement("td",null,t.total_weight," ",t.weight_unit),s.a.createElement("th",{scope:"row"},"Rs. ",s.a.createElement(j.a,null,t.bill_amount)),s.a.createElement("td",null,t.status_name))}));return C?s.a.createElement(d.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{className:"d-flex justify-content-between pageHead"},s.a.createElement("h4",{className:"m-b-10"},u.first_name," ",u.middle_name,u.last_name),s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-primary btn-sm shadow-2 mb-4",onClick:function(){return e.history.push("/customer/update/".concat(e.match.params.id))}}," ",s.a.createElement("i",{className:"feather icon-edit text-c-black f-15 m-r-5"}),"Update"),s.a.createElement("button",{className:"btn btn-danger btn-sm shadow-2 mb-4",onClick:function(t){I({showModal:!0,customerId:e.match.params.id})}}," ",s.a.createElement("i",{className:"feather icon-trash-2 text-c-black f-15 m-r-5"}),"Delete"))),s.a.createElement(l.a,null,s.a.createElement(i.a,{xl:12},s.a.createElement(o.a,null,s.a.createElement(o.a.Body,null,s.a.createElement("h5",{className:"mb-4"},"Customer Profile"),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement(i.a,{md:2}),s.a.createElement(i.a,{md:8},s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Name")),s.a.createElement("div",{className:"mt-1 mb-3"},u.first_name," ",u.middle_name," ",u.last_name," "," ",u.is_active?s.a.createElement(m.a,{variant:"info"},"Active"):s.a.createElement(m.a,{variant:"secondary"},"Inactive")),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Customer Category")),s.a.createElement("div",{className:"mt-1 mb-3"},u.category_str),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Email")),s.a.createElement("div",{className:"mt-1 mb-3"},u.email),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Website")),s.a.createElement("div",{className:"mt-1 mb-3"},u.website||"NA"),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Address")),s.a.createElement("div",{className:"mt-1 mb-3"},u.address||"NA"),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Phone")),s.a.createElement("div",{className:"mt-1 mb-3"},u.phone1,", "," "," "," ",u.phone2),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Tax Number")),s.a.createElement("div",{className:"mt-1 mb-3"},u.tax_number),s.a.createElement("div",{className:"mb-1 border-bottom"},s.a.createElement("b",null,"Country")),s.a.createElement("div",{className:"mt-1 mb-3"},u.country_detail.name)),s.a.createElement(i.a,{md:2})),s.a.createElement(o.a.Body,null,s.a.createElement(o.a.Header,null,s.a.createElement(o.a.Title,{as:"h5",style:{marginTop:"5px"}},"Invoices")),s.a.createElement(p.a,{hover:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Invoice Number"),s.a.createElement("th",null,"Sold By"),s.a.createElement("th",null,"Invoiced On"),s.a.createElement("th",null,"Total Weight"),s.a.createElement("th",null,"Bill Amount"),s.a.createElement("th",null,"Status"))),s.a.createElement("tbody",null,W||"")),Object(x.isEmpty)(D)&&!C?s.a.createElement(s.a.Fragment,null,s.a.createElement(w.a,null,"Data not available"),s.a.createElement("br",null),s.a.createElement("br",null)):"",C?s.a.createElement(f.a,null):null,s.a.createElement(y.a,{instanceCount:M}))))),s.a.createElement(b.a,{show:_.showModal,onCancel:function(){return I(Object(r.a)(Object(r.a)({},_),{},{showModal:!1}))},onDelete:function(){return t=_.customerId,void Object(h.b)({action:"delete",customers_id:[t]}).then((function(e){return e.json})).then((function(t){t.status?(v.a.fire({icon:"success",title:"Customer deleted successfully!",background:"#dffff0"}),e.history.push("/customers")):v.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"})})).catch((function(e){console.log(e)}));var t}})))}},267:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"display-5",style:{fontSize:"1.4em",textAlign:"center",marginTop:"10vh"}},e.children))}},269:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(888),u=n(111);t.a=function(e){return r.a.createElement(c.a,{style:{border:"none",color:"#3d4075",boxShadow:"0 0 10px red"},show:e.show,onHide:e.onCancel},r.a.createElement(c.a.Header,{closeButton:!0,style:{margin:"auto 5px"}},r.a.createElement(c.a.Title,{style:{paddingLeft:"15px",color:"#3d4075",fontSize:"1.4em",fontWeight:"bold"}},"Are you sure?")),r.a.createElement(c.a.Body,{style:{paddingLeft:"30px"}},e.message?e.message:"This action cannot be undone."),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",padding:"10px"}},r.a.createElement(u.a,{variant:"secondary",onClick:e.onCancel},r.a.createElement("b",null,"Cancel")),e.noRedButton?null:r.a.createElement(u.a,{variant:"danger",onClick:e.onDelete},r.a.createElement("b",null,e.redTitle||"Delete"))))}},273:function(e,t,n){"use strict";var a=n(20),r=n.n(a),c=n(33),u=n(55),s=n(0),l=n.n(s),i=n(12),o=n(296),m=n(324),p=n(306),f=n(343);t.a=Object(i.h)((function(e){var t=e.location.search,n=new URLSearchParams(t),a=parseInt(n.get("start")||0),s=parseInt(n.get("end")||25),i=parseInt(a/(s-a)),d=l.a.useState(s-a),v=Object(u.a)(d,1)[0],b=l.a.useState(i),h=Object(u.a)(b,2),E=h[0],O=h[1];l.a.useEffect((function(){(a%25!==0||s%25!==0||s-a!==25&&s-a!==50&&s-a!==100||s<25||a<0)&&(a=0,s=25,n.set("start",0),n.set("end",25),e.history.push({search:n.toString()}))}),[]);var j=function(t){O(t),n.set("start",v*t),n.set("end",v*(t+1)),e.history.push({search:n.toString()}),console.log(t)},x=function(){var t=Object(c.a)(r.a.mark((function t(a){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.set("start",0),n.set("end",parseInt(a.target.value)),e.history.push({search:n.toString()});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=e.instanceCount,y=Math.ceil(w/v);if(E>=y-5)var g=[y-5,y-4,y-3,y-2];else g=[E-1,E-0,E+1,E+2,E+3];return l.a.createElement(o.a,{style:{display:"flex",justifyContent:"space-between",padding:"40px 10px 0 10px   "}},l.a.createElement(m.a,{size:"sm",className:"mb-3",style:{maxWidth:"120px",backgroundColor:"white"}},l.a.createElement(m.a.Prepend,null,l.a.createElement(m.a.Text,{id:"inputGroup-sizing-sm"},"Show:")),l.a.createElement(p.a.Control,{style:{height:"30.21px",backgrondColor:"white"},as:"select",value:v,onChange:x},l.a.createElement("option",{value:"25"},"25"),l.a.createElement("option",{value:"50"},"50"),l.a.createElement("option",{value:"100"},"100"))),l.a.createElement(f.a,{style:{marginBottom:0},size:"sm"},l.a.createElement(f.a.Prev,{onClick:function(){return j(E-1)},disabled:0===E}),y<=8?[1,2,3,4,5,6,7,8].map((function(e,t){if(!(e>y))return l.a.createElement(f.a.Item,{disabled:y<e,key:t,active:E===e-1,onClick:function(){return j(e-1)}},e)})):l.a.createElement(l.a.Fragment,null,E>3?l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a.Item,{active:0===E,onClick:function(){return j(0)}},1),l.a.createElement(f.a.Item,{active:1===E,onClick:function(){return j(1)}},2),l.a.createElement(f.a.Ellipsis,{disabled:!0})):null,(E>3?g:[1,2,3,4,5]).map((function(e,t){return l.a.createElement(f.a.Item,{disabled:y<e,key:t,active:E===e-1,onClick:function(){return j(e-1)}},e)})),y>7&&E<y-5?l.a.createElement(f.a.Ellipsis,{disabled:!0}):null,y>7?l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a.Item,{active:E===y-2,onClick:function(){return j(y-2)}},y-1),l.a.createElement(f.a.Item,{active:E===y-1,onClick:function(){return j(y-1)}},y)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a.Item,{disabled:y<6,active:5===E,onClick:function(){return j(5)}},6),l.a.createElement(f.a.Item,{disabled:y<7,active:6===E,onClick:function(){return j(6)}},7))),l.a.createElement(f.a.Next,{onClick:function(){return j(E+1)},disabled:E===y-1||0===y})))}))},275:function(e,t,n){"use strict";function a(e){var t=new URLSearchParams(e.location.search);return{start:parseInt(t.get("start"))||0,end:parseInt(t.get("end"))||25}}n.d(t,"a",(function(){return a}))},297:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.children.toLocaleString();return t%1!==0&&"number"===typeof t&&(t=e.children.toFixed(2)),t=t.toLocaleString(),r.a.createElement("span",null,t)}},311:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return o}));var a=n(20),r=n.n(a),c=n(33),u=n(47),s=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/get","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/delete","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customer/add","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customer/get","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customer/update","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},431:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return i}));var a=n(20),r=n.n(a),c=n(33),u=n(47),s=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/category","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/category/delete","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/category/update","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/category/add","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/customers/category/get","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},444:function(e,t,n){"use strict";n.d(t,"g",(function(){return d})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return i})),n.d(t,"j",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return b}));var a=n(20),r=n.n(a),c=n(33),u=n(47),s=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoices/get","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoices/delete","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/update","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/add","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v2/sales/invoice/new","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/get","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/update","POST",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/status/get","GET",t,n);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/bill","POST",t,n,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/sales/invoice/sync","POST",t,n,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=64.76267380.chunk.js.map