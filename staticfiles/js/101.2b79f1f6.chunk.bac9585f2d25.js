(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[101],{248:function(e,a,t){"use strict";t.r(a);var n=t(20),r=t.n(n),l=t(33),c=t(1),o=t(55),u=t(0),s=t.n(u),i=t(296),p=t(264),m=t(313),f=t(306),d=t(111),h=t(3),b=t(262),v=(t(281),t(263)),E=t(30),O=(t(434),t(435)),g=(t(502),t(10)),w=t(36),j=t(5);function y(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){a(t.result)},t.onerror=function(e){console.log("Error: ",e)}}a.default=Object(g.b)((function(e){return{auth:e.auth}}))((function(e){var a=s.a.useState(!0),t=Object(o.a)(a,2),n=t[0],u=t[1],g=s.a.useState(!1),x=Object(o.a)(g,2),C=x[0],P=x[1],N=s.a.useState({username:"",email:"",fname:"",lname:"",password:"",password2:"",role:""}),k=Object(o.a)(N,2),S=k[0],L=k[1],_=s.a.useState({address:"",phone1:"",phone2:"",post:"",profileImage:"",profileImageName:""}),I=Object(o.a)(_,2),G=I[0],T=I[1],U=s.a.useState({}),A=Object(o.a)(U,2),F=A[0],R=A[1];s.a.useEffect((function(){var a=new AbortController;return Object(O.c)({action:"get",filter:"id",user_id:e.auth.user.user_id},a.signal).then((function(e){if(console.log(e),e.json.status){var a=e.json.users[0];L(Object(c.a)(Object(c.a)({},S),{},{username:a.username,email:a.email,fname:a.first_name,lname:a.last_name,role:a.role_str}));try{var t=a.profile,n=t.profile_image.split("/"),r=n[n.length-1],l=j.a.SERVER_URL+t.profile_image;console.log(l),T(Object(c.a)(Object(c.a)({},G),{},{address:t.address,phone1:t.phone_number,phone2:t.phone_number2,post:t.post,profileImage:"",profileImageName:l})),console.log(r)}catch(o){console.log(o)}u(!1)}})).catch((function(e){console.log(e)})),function(){return a.abort()}}),[]);var z=function(e){var a=e.target,t=a.name,n=(a.type,a.value);L(Object(c.a)(Object(c.a)({},S),{},{[t]:n})),R(Object(c.a)(Object(c.a)({},F),{},{[t]:""}))},J=function(e){console.log("here it changes");var a=e.target,t=a.name,n=(a.type,a.value);T(Object(c.a)(Object(c.a)({},G),{},{[t]:n})),R(Object(c.a)(Object(c.a)({},F),{},{[t]:""}))},V=function(){var e=Object(l.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.target.files[0],console.log(t),y(t,(function(e){T(Object(c.a)(Object(c.a)({},G),{},{profileImage:e,profileImageName:e}))}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();console.log(G);return n?s.a.createElement(v.a,null):s.a.createElement(h.a,null,s.a.createElement(i.a,null,s.a.createElement(p.a,null,s.a.createElement(m.a,null,s.a.createElement(m.a.Body,null,s.a.createElement("h5",null,"Update Profile"),s.a.createElement("hr",null),s.a.createElement(i.a,null,s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Username*"),s.a.createElement(f.a.Control,{name:"username",value:S.username,onChange:z,type:"text",placeholder:"Username"}),s.a.createElement(b.a,null,F.username))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Email*"),s.a.createElement(f.a.Control,{name:"email",value:S.email,onChange:z,type:"text",placeholder:"Email"}),s.a.createElement(b.a,null,F.email))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"First Name*"),s.a.createElement(f.a.Control,{name:"fname",value:S.fname,onChange:z,type:"text",placeholder:"First Name"}),s.a.createElement(b.a,null,F.fname))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Last Name*"),s.a.createElement(f.a.Control,{name:"lname",value:S.lname,onChange:z,type:"text",placeholder:"Last Name"}),s.a.createElement(b.a,null,F.lname))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Password*"),s.a.createElement(f.a.Control,{name:"password",value:S.password||"",onChange:z,type:"password",placeholder:"Password"}),s.a.createElement(b.a,null,F.password))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Confirm Password*"),s.a.createElement(f.a.Control,{name:"password2",value:S.password2||"",onChange:z,type:"password",placeholder:"Confirm Password"}),s.a.createElement(b.a,null,F.password2)))),s.a.createElement("br",null),s.a.createElement("h5",null,"Extra Details"),s.a.createElement("hr",null),s.a.createElement(i.a,null,s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Address"),s.a.createElement(f.a.Control,{name:"address",value:G.address||"",onChange:J,type:"text",placeholder:"Address"}),s.a.createElement(b.a,null,F.address))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Phone No     1"),s.a.createElement(f.a.Control,{name:"phone1",value:G.phone1||"",onChange:J,type:"text",placeholder:"Phone No 1"}),s.a.createElement(b.a,null,F.phone1))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Phone No 2"),s.a.createElement(f.a.Control,{name:"phone2",value:G.phone2||"",onChange:J,type:"text",placeholder:"Phone No 2"}),s.a.createElement(b.a,null,F.phone2))),s.a.createElement(p.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Post"),s.a.createElement(f.a.Control,{name:"post",value:G.post||"",onChange:J,type:"text",placeholder:"Post"}),s.a.createElement(b.a,null,F.post))),s.a.createElement(p.a,{md:4},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Profile Image"),s.a.createElement(f.a.File,{label:G.profileImageName?"Change photo":"No file selected","data-browse":"Browse",custom:!0,onChange:V}),s.a.createElement(b.a,null,F.profileImage))),G.profileImageName?s.a.createElement(p.a,{md:2},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"\u200b"),s.a.createElement("div",null,s.a.createElement("img",{src:G.profileImageName,alt:"",style:{height:"42px",minWidth:"42px",width:"42px",objectFit:"cover"}}),s.a.createElement("i",{onClick:function(){T(Object(c.a)(Object(c.a)({},G),{},{profileImage:"remove",profileImageName:null}))},className:"feather icon-x text-c-red f-15 m-l-5 m-t-6",style:{cursor:"pointer",border:"1px solid red",borderRadius:"3px"}})))):null),s.a.createElement("div",{className:"d-flex justify-content-end"},s.a.createElement(d.a,{variant:"warning",onClick:function(){e.history.push("/profile")}},"Cancel"),s.a.createElement(d.a,{disabled:C,variant:"primary",onClick:function(){var a=function(e){var a={};return Object(w.a)(e.fname)&&(a.fname="First Name cannot be empty."),Object(w.a)(e.lname)&&(a.lname="Last name can't be empty."),Object(w.a)(e.username)&&(a.username="User name can't be empty."),Object(w.a)(e.email)&&(a.email="Email can't be empty."),e.email&&!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e.email)&&(a.email="Email not valid."),e.password2&&Object(w.a)(e.password)&&(a.password="Password can't be empty."),Object(w.a)(e.password2)&&e.password&&(a.password2="Confirm the password."),e.password&&e.password2&&e.password!==e.password2&&(a.password2="Passwords must match."),{isValid:Object(w.a)(a),errors:a}}(S),t=a.isValid,n=a.errors;if(!t)return console.log(n),void R(Object(c.a)({},n));console.log("no errros");var o={action:"update",email:S.email,password:S.password||null,first_name:S.fname,last_name:S.lname,profile:{address:G.address,phone_number:G.phone1,phone_number2:G.phone2,post:G.post,profile_image:G.profileImage}};console.log(JSON.stringify(o)),Object(O.e)(o).then(function(){var a=Object(l.a)(r.a.mark((function a(t){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:console.log(t),t.json.status?(E.a.fire({icon:"success",title:"User Updated successfully!",background:"#dffff0"}),e.history.push("/profile")):E.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"});case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){P(!1)}))}},C?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Submitting"):"Submit")))))))}))},281:function(e,a,t){"use strict";t.d(a,"c",(function(){return o})),t.d(a,"b",(function(){return u})),t.d(a,"a",(function(){return s})),t.d(a,"d",(function(){return i})),t.d(a,"e",(function(){return p}));var n=t(20),r=t.n(n),l=t(33),c=t(47),o=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/categories/get","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/categories/delete","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/add","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/get","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/inventory/items/category/update","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()},435:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return p})),t.d(a,"e",(function(){return s})),t.d(a,"c",(function(){return u})),t.d(a,"d",(function(){return i}));var n=t(20),r=t.n(n),l=t(33),c=t(47),o=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/add","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/list","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),s=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/update","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/delete","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}(),p=function(){var e=Object(l.a)(r.a.mark((function e(a,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.a)("api/v1/user/list","POST",a,t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a,t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=101.2b79f1f6.chunk.js.map