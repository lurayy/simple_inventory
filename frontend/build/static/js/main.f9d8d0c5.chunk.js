(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{159:function(e,t,a){e.exports={paymentFormField:"invoice_paymentFormField__2Vcj1"}},201:function(e,t,a){e.exports=a(280)},206:function(e,t,a){},207:function(e,t,a){},280:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),s=(a(206),a(207),a(2)),o=a.n(s),l=a(4),u=a(13),p=a(14),d=a(5),m=a(16),h=a(15),f=a(20),b="http://localhost:8000/";function v(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function g(e,t,a){var n="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),n="; expires="+r.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}var E=function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/json"!==(a=t.headers.get("content-type"))){e.next=6;break}return e.next=4,t.json();case 4:return n=e.sent,e.abrupt("return",{response:t,json:n});case 6:if("application/pdf"!==a){e.next=10;break}return t.blob().then((function(e){var t=window.URL.createObjectURL(new Blob([e])),a=document.createElement("a");a.href=t,a.setAttribute("download","export.pdf"),document.body.appendChild(a),a.click(),a.parentNode.removeChild(a)})),r={status:!0},e.abrupt("return",{response:t,json:r});case 10:return e.abrupt("return",{response:t});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(o.a.mark((function e(t,a,n,r){var i,c,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=v("x-csrftoken"))){e.next=9;break}return e.next=4,fetch(new URL("apiv1/users/verify",b),{method:"GET"});case 4:return c=e.sent,e.next=7,E(c);case 7:g("x-csrftoken",e.sent.json["x-csrftoken"],2);case 9:return i=v("x-csrftoken"),e.next=12,fetch(new URL(t,b),{method:a,body:n,signal:r,credentials:"include",headers:{"x-csrftoken":i,"Content-Type":"application/json"}});case 12:return s=e.sent,e.next=15,E(s);case 15:return l=e.sent,e.abrupt("return",l.json);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/login","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/logout","GET");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/create","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/get","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/get/0","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/get/0","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/users/current","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return{type:"loggedIn",payload:e}},I=a(161),P=a.n(I),D=a(54),N=a(11),U=a(1),T=a(9),F=a(339),J=a(331),A=a(363),V=a(351),B=a(352),q=a(335),R=a(95),W=a(353),M=a(289),H=a(329),z=a(338),L=a(171),G=a.n(L),Y=a(173),Q=a.n(Y),K=a(362),X=a(337),$=a(361),Z=a(336),ee=a(360),te=a(357),ae=a(359),ne=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",status:""},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!0===this.props.current_state.user.isLoggedIn&&(window.location.href="/")}},{key:"onChange",value:function(e){this.setState(Object(N.a)({},e.target.name,[e.target.value]))}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a={username:this.state.username[0],password:this.state.password[0]},O(JSON.stringify(a)).then((function(e){try{e.status?window.location.href="/":(""===n.state.username&&""===n.state.password)|(""===n.state.username||""===n.state.password)?n.setState((function(e){return{status:"Username and password empty"}})):!1===e.status&&n.setState((function(t){return{status:e.msg}}))}catch(t){alert(t)}}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(H.a,{component:"main",maxWidth:"xs"},r.a.createElement(J.a,null),r.a.createElement("div",null,r.a.createElement(K.a,{style:{padding:30,margin:"auto",backgroundColor:"#1a237e"}},r.a.createElement("h3",null,"O")),r.a.createElement("form",{onSubmit:this.onSubmit,noValidate:!0},r.a.createElement($.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"uname",label:"Username",name:"username",autoComplete:"email",autoFocus:!0,type:"text",onChange:this.onChange,value:this.state.username}),r.a.createElement($.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChange,value:this.state.password}),r.a.createElement(Z.a,{control:r.a.createElement(ee.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(X.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ae.a,{severity:"error",style:{display:this.state.status?"":"none"}},this.state.status),r.a.createElement(z.a,{container:!0}))),r.a.createElement(te.a,{mt:8}))}}]),a}(n.Component),re=Object(f.b)((function(e){return{current_state:e}}))(ne),ie=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;_().then((function(t){e.props.dispatch({type:"logout"}),e.props.history.push("/")}))}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),a}(n.Component),ce=Object(f.b)()(ie),se=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/vendors","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/vendors","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/vendors/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/vendor","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/vendor","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),de=a(334),me=a(365),he=a(332),fe=a(6),be=a.n(fe),ve=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={update:{middle_name:[""],website:[""],phone2:[""],address:[""]}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,[e.target.value]))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=Object(U.a)({},this.state.update),this.state.update)a[n]=this.state.update[n][0];a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),console.log(a),oe(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("Updated!","Vendor details has been added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;this.props.classes;return r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,"Add New Customer")),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"first_name",label:"First Name",name:"first_name",autoFocus:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{id:"middle_name",label:"Middle Name",name:"middle_name",onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"last_name",label:"Last Name",name:"last_name",onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement(de.a,{fullWidth:!0,required:!0},r.a.createElement(me.a,{htmlFor:"email"},"Email address"),r.a.createElement(he.a,{id:"email",required:!0,name:"email",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"website",name:"website",label:"Website",type:"text",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Primary Phone Number",id:"phone1",name:"phone1",fullWidth:!0,required:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Second Phone Number",id:"phone2",name:"phone2",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"address",name:"address",type:"text",label:"Address",fullWidth:!0,onChange:this.onChange,required:!0})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"tax_number",name:"tax_number",type:"number",fullWidth:!0,label:"Tax Number",onChange:this.onChange,required:!0}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){e.onSubmit()}},"Add")),r.a.createElement(z.a,{item:!0,xm:3,md:6})))),r.a.createElement("br",null))}}]),a}(n.Component)),ge=Object(f.b)((function(e){return{user:e.user}}))(ve),Ee=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={update:{user_type:"STAFF"}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),"MANAGER"!==this.props.user.data.user_type&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,[e.target.value]))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.update.password[0]===this.state.update.password2[0]){for(n in a=Object(U.a)({},this.state.update),this.state.update)a[n]=this.state.update[n][0];j(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("New User Created"):be.a.fire(e.error)}catch(t){console.log(t)}}))}else be.a.fire("Password didn't match");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("h1",null,"Create New User"),r.a.createElement("br",null),r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"First Name: ",r.a.createElement($.a,{id:"first_name",name:"first_name",type:"text",onChange:this.onChange,required:!0})),r.a.createElement("td",null,"Last Name",r.a.createElement($.a,{id:"last_name",name:"last_name",type:"text",onChange:this.onChange,required:!0}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Username :",r.a.createElement($.a,{id:"username",name:"username",type:"text",onChange:this.onChange,required:!0}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Password ",r.a.createElement($.a,{id:"password",name:"password",type:"password",autoComplete:"current-password",onChange:this.onChange,required:!0})),r.a.createElement("td",null,"Confirm Password ",r.a.createElement($.a,{id:"password2",type:"password",name:"password2",autoComplete:"current-password",onChange:this.onChange,required:!0}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Email : ",r.a.createElement($.a,{id:"email",name:"email",type:"email",onChange:this.onChange,required:!0})),r.a.createElement("td",null,"User Post:",r.a.createElement("select",{name:"user_type",id:"user_type",onChange:this.onChange,value:this.state.update.user_type},r.a.createElement("option",{value:"MANAGER"},"Manager"),r.a.createElement("option",{value:"STAFF"},"Staff")))),r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:this.onSubmit},"Update")))))))}}]),a}(n.Component),ye=Object(f.b)((function(e){return{user:e.user}}))(Ee),Oe=a(65),_e=a(341),je=a(345),xe=a(344),ke=a(340),Ce=a(342),we=a(343),Se=a(184),Ie=a(84),Pe=a.n(Ie),De=a(57),Ne=a.n(De),Ue=a(126),Te=a.n(Ue),Fe=Object(F.a)({table:{minWidth:650}}),Je=function(e){var t=!0;e.page||(t=e.page);var a,n,i=Fe(),c=e.header,s=e.data,o=!1,l=!0;0===s.length&&(o=!0),1===e.page&&(l=!1),e.delete&&(a=!0);var u=r.a.createElement("div",null,l?r.a.createElement(M.a,{color:"secondary",onClick:function(){e.update(-10)},"aria-label":"pervious-button"},r.a.createElement(Ne.a,null)):r.a.createElement(M.a,{color:"secondary",onClick:function(){e.update(-10)},"aria-label":"pervious-button",disabled:!0},r.a.createElement(Ne.a,null)),r.a.createElement("b",null,"Page: ",e.page),o?r.a.createElement(M.a,{color:"secondary",onClick:function(){e.update(10)},"aria-label":"pervious-button",disabled:!0},r.a.createElement(Pe.a,null)):r.a.createElement(M.a,{color:"secondary",onClick:function(){e.update(10)},"aria-label":"pervious-button"},r.a.createElement(Pe.a,null)));return r.a.createElement("div",null,r.a.createElement(ke.a,{component:Se.a},r.a.createElement(_e.a,{className:i.table,"aria-label":"simple table"},r.a.createElement(Ce.a,null,r.a.createElement(we.a,null,c.map((function(e){return r.a.createElement(xe.a,{key:e.id},r.a.createElement("b",null,e.name))})))),r.a.createElement(je.a,null,s.map((function(t){return r.a.createElement(we.a,{key:t.id,onClick:function(){e.popUp(t.id,t.uuid)}},c.map((function(e){return n=e.prop,r.a.createElement(xe.a,{key:e.id},t[n])})),r.a.createElement(xe.a,null,a?r.a.createElement(X.a,{variant:"contained",size:"small",color:"secondary",onClick:function(){e.delete(t.id)}},r.a.createElement(Te.a,null)):null))}))))),r.a.createElement(z.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xs:"auto"},o?r.a.createElement("h2",null,"No Data Available"):r.a.createElement("span",null))),r.a.createElement("br",null),r.a.createElement(z.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xs:"auto"},t?u:r.a.createElement("span",null))),r.a.createElement("br",null))},Ae=a(28),Ve=a.n(Ae),Be=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Post",prop:"status"},{id:3,name:"Username",prop:"username"},{id:4,name:"Status",prop:"is_active_str"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,user_data:{},update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/users")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=this,t=this.state.update;t=Object(U.a)(Object(U.a)({},t),{},{action:"edit",user_id:t.id}),C(JSON.stringify(t)).then((function(t){t.status&&(be.a.fire("Updated!","Details has been updated.","success"),e.back())}))}},{key:"userDelete",value:function(e,t){var a=this,n={action:"delete",user_id:e,uuid:t};C(JSON.stringify(n)).then((function(e){e.status&&(be.a.fire("User has been deleted. They cannot login now"),a.back())}))}},{key:"userRevive",value:function(e,t){var a=this,n={action:"revive",user_id:e,uuid:t};C(JSON.stringify(n)).then((function(e){e.status&&(be.a.fire("User has been made active. They login now"),a.back())}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:0,i.length>2?i[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return n={action:"get",user_id:t,uuid:a},e.next=9,k(JSON.stringify(n)).then((function(e){e.status&&(r=e)}));case 9:return e.next=11,this.setState({popUp:!0,user_data:r,update:r});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:4},r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),"          ",r.a.createElement("h1",null,this.state.user_data.name),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("table",{cellPadding:10,cellSpacing:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"First Name : ",r.a.createElement($.a,{id:"first_name",name:"first_name",type:"text",onChange:this.onChange,value:this.state.update.first_name})),r.a.createElement("td",null,"Last Name : ",r.a.createElement($.a,{id:"last_name",name:"last_name",type:"text",onChange:this.onChange,value:this.state.update.last_name}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Username :",r.a.createElement($.a,{id:"username",name:"username",type:"text",onChange:this.onChange,value:this.state.update.username})),r.a.createElement("td",null,"Email : ",r.a.createElement($.a,{id:"email",name:"email",type:"email",onChange:this.onChange,value:this.state.update.email}))),r.a.createElement("tr",null,r.a.createElement("td",null,"User Post:",r.a.createElement("select",{name:"user_type",onChange:this.onChange,defaultValue:this.state.user_data.user_type},r.a.createElement("option",{value:"MANAGER"},"Manager"),r.a.createElement("option",{value:"STAFF"},"Staff")))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:this.onSubmit},"Update")),r.a.createElement("td",null,this.state.user_data.is_active?r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.userDelete(t.state.user_data.id,t.state.user_data.uuid)}},"Deactivate User"):r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.userRevive(t.state.user_data.id,t.state.user_data.uuid)}},"Activate User"))))),r.a.createElement("br",null))));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),qe=a(26),Re=a(30),We=a.n(Re),Me=a(286),He=a(29),ze=a.n(He),Le=a(346);Object(F.a)((function(e){return{root:{display:"flex",backgroundColor:"black",left:e.spacing(2),bottom:e.spacing(2),right:e.spacing(2)}}}));function Ge(){var e=r.a.useState(0),t=Object(D.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){var e=setInterval((function(){n((function(e){return e>=100?0:e+1}))}),20);return function(){clearInterval(e)}}),[]),r.a.createElement(z.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(z.a,{item:!0,xs:3},r.a.createElement(Le.a,{variant:"determinate",value:a})))}var Ye=Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),Qe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={users:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/users/"+e)}},{key:"componentDidMount",value:function(){if(!1===this.props.user.isLoggedIn&&this.props.history.push("/"),"MANAGER"!==this.props.user.data.user_type)return console.log("not manager"),be.a.fire({icon:"error",title:"Permission Denied!",text:"You donont have authorization. Contact Manager or Admin"}),void this.props.history.push("/");this.update_table(0)}},{key:"getUsersData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(JSON.stringify(t)).then((function(e){e.status&&a.setState({users:e.users,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getUsersData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(Be,{pushNewId:this.pushNewId,data:this.state.users,update:this.update_table,page:this.state.page})),a=this.props.classes;return r.a.createElement("div",{className:a.root},r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Vendors"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/users/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Staff"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,{className:a.paper},this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component),Ke=Object(Me.a)(Ye)(Object(f.b)((function(e){return{user:e.user}}))(Qe)),Xe=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Phone Number",prop:"phone1"},{id:3,name:"Email",prop:"email"},{id:4,name:"Address",prop:"address"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,vendor:{},update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.vendorDelete=n.vendorDelete.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/vendors")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit"}),console.log(t),ue(JSON.stringify(t)).then((function(e){try{e.status?(be.a.fire("Updated!","Vendor Details has been updated.","success"),a.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vendorDelete",value:function(e){var t=this,a={vendors_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){le(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Vendor entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2?r[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return a={action:"get",vendor_id:t},e.next=9,pe(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,vendor:n.vendors[0],update:n.vendors[0]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:4},r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),"          ",r.a.createElement("h1",null,this.state.update.name),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0"),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,value:this.state.update.first_name,id:"first_name",label:"First Name",name:"first_name",autoFocus:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{id:"middle_name",value:this.state.update.middle_name,label:"Middle Name",name:"middle_name",onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"last_name",value:this.state.update.last_name,label:"Last Name",name:"last_name",onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement(de.a,{fullWidth:!0,required:!0},r.a.createElement(me.a,{htmlFor:"email"},"Email address"),r.a.createElement(he.a,{id:"email",required:!0,name:"email",value:this.state.update.email,fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"website",name:"website",label:"Website",value:this.state.update.website,type:"text",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Primary Phone Number",id:"phone1",value:this.state.update.phone1,name:"phone1",fullWidth:!0,required:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Second Phone Number",id:"phone2",name:"phone2",value:this.state.update.phone2,fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"address",name:"address",type:"text",label:"Address",value:this.state.update.address,fullWidth:!0,onChange:this.onChange,required:!0})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"tax_number",name:"tax_number",type:"number",fullWidth:!0,label:"Tax Number",value:this.state.update.tax_number,onChange:this.onChange,required:!0}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.vendorDelete(t.state.update.id)}},"Delete Vendor"))))),r.a.createElement("br",null));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),$e=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={vendors:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/vendors/"+e)}},{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getVendorsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVendorsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(JSON.stringify(t)).then((function(e){e.status&&a.setState({vendors:e.vendors,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(this.props.classes,r.a.createElement("div",null,r.a.createElement(Xe,{data:this.state.vendors,update:this.update_table,page:this.state.page,pushNewId:this.pushNewId})));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Vendors"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/vendors/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Discount"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),Ze=Object(f.b)((function(e){return{user:e.user}}))($e),et=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customers","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customers/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customers","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customer","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customer","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/customers/category","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ct=a(347),st=a(358),ot=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Phone Number",prop:"phone1"},{id:3,name:"Email",prop:"email"},{id:4,name:"Address",prop:"address"},{id:5,name:"Category",prop:"category_str"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={loading:!1,popUp:!1,customer:{},update:{},customerCategories:[]},n.getCustomerCategories=n.getCustomerCategories.bind(Object(d.a)(n)),n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.customerDelete=n.customerDelete.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/customers")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCustomerCategories();case 2:if(e.prev=2,!(t=this.props.match.params.id)){e.next=9;break}return e.next=7,this.popUp(t,0,!0);case 7:e.next=9;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerCategories",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get"},e.next=3,it(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{customerCategories:e.customerCategories})):be.a.fire(e.error)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"complete",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!1}))}},{key:"loading",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!0}))}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading(),t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit"}),rt(JSON.stringify(t)).then((function(e){try{e.status?(be.a.fire("Updated!","Customer Details has been updated.","success"),a.back()):(be.a.fire({icon:"error",title:e.error}),a.complete())}catch(t){console.log(t)}})),this.complete();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"customerDelete",value:function(e){var t=this;this.loading();var a={customers_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&tt(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Customer entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.back()):(be.a.fire({icon:"error",title:e.error}),t.complete(),t.back())}catch(a){console.log(a)}}))})),this.complete()}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>1&&void 0!==i[1]?i[1]:0,a=i.length>2&&void 0!==i[2]&&i[2],this.loading(),a){e.next=7;break}this.props.pushNewId(t),e.next=12;break;case 7:return n={action:"get",customer_id:t},e.next=10,nt(JSON.stringify(n)).then((function(e){e.status?r=e:be.a.fire(e.error)}));case 10:return e.next=12,this.setState({popUp:!0,update:r.customers[0],customer:r.customers[0]});case 12:this.complete();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state.customerCategories;e=this.props.data?this.props.data:[];var n=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),i=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,this.state.update.name)),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"first_name",label:"First Name",name:"first_name",defaultValue:this.state.update.first_name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"middle_name",label:"Middle Name",name:"middle_name",defaultValue:this.state.update.middle_name,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"last_name",label:"Last Name",name:"last_name",defaultValue:this.state.update.last_name,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement(de.a,{fullWidth:!0},r.a.createElement(me.a,{htmlFor:"email"},"Email address"),r.a.createElement(he.a,{id:"email",required:!0,name:"email",fullWidth:!0,onChange:this.onChange,defaultValue:this.state.update.email}))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"website",name:"website",label:"Website",type:"text",fullWidth:!0,onChange:this.onChange,defaultValue:this.state.update.website}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Primary Phone Number",id:"phone1",name:"phone1",fullWidth:!0,onChange:this.onChange,value:this.state.update.phone1})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Second Phone Number",id:"phone2",name:"phone2",fullWidth:!0,onChange:this.onChange,value:this.state.update.phone2}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"address",name:"address",type:"text",label:"Address",fullWidth:!0,onChange:this.onChange,value:this.state.update.address})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"tax_number",name:"tax_number",type:"number",fullWidth:!0,label:"Tax Number",onChange:this.onChange,value:this.state.update.tax_number}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement(st.a,{onChange:this.onChange,fullWidth:!0,value:this.state.update.category,name:"category",id:"category"},a.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.customerDelete(t.state.customer.id)}},"Delete Customer"))))),r.a.createElement("br",null));return r.a.createElement("div",null,this.state.loading?r.a.createElement(Ge,null):this.state.popUp?i:n)}}]),a}(n.Component)),lt=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e,n){var r;return Object(u.a)(this,a),(r=t.call(this,e,n)).state={customers:[],loaded:!1,start:0,end:10,page:1},r.update_table=r.update_table.bind(Object(d.a)(r)),r.pushNewId=r.pushNewId.bind(Object(d.a)(r)),r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getCustomersData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCustomersData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(JSON.stringify(t)).then((function(e){e.status&&a.setState({customers:e.customers,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushNewId",value:function(e){this.props.history.push("/customers/"+e)}},{key:"render",value:function(){var e=this,t=(this.props.classes,r.a.createElement("div",null,r.a.createElement(ot,{ref:this.child,data:this.state.customers,update:this.update_table,page:this.state.page,pushNewId:this.pushNewId})));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Customers"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/customers/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Customer"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),ut=Object(f.b)((function(e){return{user:e.user}}))(lt),pt=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={customer:{},update:{first_name:"",middle_name:"",last_name:"",email:"",phone1:"",website:"",phone2:"",address:"",tax_number:""}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"add"}),at(JSON.stringify(t)).then((function(e){try{e.status?be.a.fire("Updated!","New Customer Has Been Added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,"Add New Customer")),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"first_name",label:"First Name",name:"first_name",autoFocus:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{id:"middle_name",label:"Middle Name",name:"middle_name",onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"last_name",label:"Last Name",name:"last_name",onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement(de.a,{fullWidth:!0,required:!0},r.a.createElement(me.a,{htmlFor:"email"},"Email address"),r.a.createElement(he.a,{id:"email",required:!0,name:"email",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"website",name:"website",label:"Website",type:"text",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Primary Phone Number",id:"phone1",name:"phone1",fullWidth:!0,required:!0,onChange:this.onChange})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{label:"Second Phone Number",id:"phone2",name:"phone2",fullWidth:!0,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"address",name:"address",type:"text",label:"Address",fullWidth:!0,onChange:this.onChange,required:!0})),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{id:"tax_number",name:"tax_number",type:"number",fullWidth:!0,label:"Tax Number",onChange:this.onChange,required:!0}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){e.onSubmit()}},"Add")),r.a.createElement(z.a,{item:!0,xm:3,md:6})))),r.a.createElement("br",null));return r.a.createElement("div",null,t)}}]),a}(n.Component)),dt=Object(f.b)((function(e){return{user:e.user}}))(pt),mt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/porders","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ht=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/porders/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/porders","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),bt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/porder","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/porder","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),gt=a(49),Et=a.n(gt),yt=(a(78),a(40)),Ot=a(48),_t=a.n(Ot),jt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/pitems/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/pitems","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),kt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/pitem","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/pitems","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),wt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/pitem","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),St=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/discounts","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),It=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/discounts/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/discounts","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/discount","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Nt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/discount","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ut=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/taxes","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Tt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/taxes/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/taxes","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Jt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/tax","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),At=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/tax","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/status/porders","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/placements","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),qt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/places/assign","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/export","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/export","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),zt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/item","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/item","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Yt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Item Name",prop:"item_name"},{id:2,name:"Quantity",prop:"quantity"},{id:3,name:"Stock",prop:"stock"},{id:4,name:"Defective",prop:"defective"},{id:5,name:"Sold",prop:"sold"},{id:6,name:"Discount",prop:"discount"},{id:7,name:"Purchase Price",prop:"purchase_price"},{id:8,name:"Status",prop:"status"}],n.state={popUp:!1,new:!1,current:0,status:[],vendor_selection:[{id:0,name:"None"}],item_selection:[{id:0,name:"None"}],update:{purchase_order:Object(U.a)(Object(U.a)({},n.props.purchase_order),{},{invoiced_on:n.converter(n.props.purchase_order.invoiced_on),completed_on:n.converter(n.props.purchase_order.completed_on)}),purchase_items:n.props.purchase_items}},n.refreshTable=n.refreshTable.bind(Object(d.a)(n)),n.getItemData=n.getItemData.bind(Object(d.a)(n)),n.selectItem=n.selectItem.bind(Object(d.a)(n)),n.searchItem=n.searchItem.bind(Object(d.a)(n)),n.addPurchaseItem=n.addPurchaseItem.bind(Object(d.a)(n)),n.invoiceHandler=n.invoiceHandler.bind(Object(d.a)(n)),n.completeHandler=n.completeHandler.bind(Object(d.a)(n)),n.getVendorsData=n.getVendorsData.bind(Object(d.a)(n)),n.converter=n.converter.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n.searchVendor=n.searchVendor.bind(Object(d.a)(n)),n.selectVendor=n.selectVendor.bind(Object(d.a)(n)),n.onChange=n.onChange.bind(Object(d.a)(n)),n.updatePurchaseOrder=n.updatePurchaseOrder.bind(Object(d.a)(n)),n.onChangePI=n.onChangePI.bind(Object(d.a)(n)),n.postPurchaseItem=n.postPurchaseItem.bind(Object(d.a)(n)),n.deletePurchaseItem=n.deletePurchaseItem.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get"},e.next=3,Vt(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{status:e.data}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getVendorsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getging vendor data"),e.next=3,se(JSON.stringify(t)).then((function(e){console.log("got",e),e.status&&(console.log("setting"),a.setState({vendor_selection:e.vendors}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectVendor",value:function(e,t){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{vendor:e,vendor_name:t})})})}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},Object(N.a)({},e.target.name,e.target.value))})})}},{key:"converter",value:function(e){return new Date(Date.parse(e))}},{key:"popUp",value:function(e){var t;for(t in this.state.update.purchase_items)if(this.state.update.purchase_items[t].id===e)return void this.setState(Object(U.a)(Object(U.a)({},this.state),{},{current:t,popUp:!0}))}},{key:"searchVendor",value:function(e){if(console.log("serch"),e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",first_name:e.target.value};this.getVendorsData(t)}}},{key:"invoiceHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{invoiced_on:e})})})}},{key:"completeHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{completed_on:e})})})}},{key:"updatePurchaseOrder",value:function(){var e=Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{action:"edit",purchase_order_id:this.state.update.purchase_order.id});vt(JSON.stringify(e)).then((function(e){e.status?be.a.fire("Purchase Order Details Has Been Updated."):be.a.fire("Error : ",e.error)}))}},{key:"onChangePI",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:Object(U.a)(Object(U.a)({},this.state.update.purchase_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.purchase_items[this.state.current]),{},Object(N.a)({},e.target.name,e.target.value))))})})}},{key:"postPurchaseItem",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a)return e=Object(U.a)({action:"add",purchase_order:this.state.update.purchase_order.id},this.state.update.purchase_items[this.state.current]),void xt(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Purchase Item Has Been Added."),t.refreshTable()):be.a.fire(e.error)}));e=Object(U.a)({action:"edit"},this.state.update.purchase_items[this.state.current]),kt(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Purchase Item Details Has Been Updated."),t.refreshTable()):be.a.fire(e.error)}))}},{key:"deletePurchaseItem",value:function(){var e=this,t={purchase_items_id:[this.state.update.purchase_items[this.state.current].id]};jt(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Purchase Item Has Beed Deleted."),e.refreshTable()):be.a.fire(t.error)}))}},{key:"addPurchaseItem",value:function(){var e,t=0,a=[];for(e in this.state.update.purchase_items)e.id&&"Fake Key"!==e.id&&(t+=1,a.push(e));this.setState({current:t,new:!0,popUp:!0,update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:[].concat(a,[{item_name:"None",discount_type:"percentage",status:"incomplete"}])})})}},{key:"searchItem",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getItemData(t)}}},{key:"getItemData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_selection:e.items}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectItem",value:function(e,t){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:Object(U.a)(Object(U.a)({},this.state.update.purchase_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.purchase_items[this.state.current]),{},{item_name:t,item:e})))})})}},{key:"refreshTable",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.update.purchase_order.id,a=[],n={action:"get",purchase_order_id:t},e.next=5,bt(JSON.stringify(n)).then((function(e){e.status&&(a=e.p_items)}));case 5:return 0===a.length&&(a=[{id:"Fake Key",item_name:""}]),e.next=8,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1,update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:a})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.item_selection,a=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Select Item"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Item Name",id:"item_search_box",name:"item_serach_box",onChange:this.searchItem}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"vendor_dropdown"},t.map((function(t){return r.a.createElement("a",{href:"#",key:t.id,onClick:function(){e.selectItem(t.id,t.name)}},t.name)}))))),n=r.a.createElement("table",{cellPadding:10,cellSpacing:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(M.a,{color:"secondary",onClick:function(){e.refreshTable()}},r.a.createElement(Ne.a,null)))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_items[this.state.current].item_name,InputProps:{readOnly:!0},label:"Item",variant:"outlined"})),r.a.createElement("td",null,this.state.new?a:r.a.createElement("span",null))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_items[this.state.current].quantity,type:"number",required:!0,name:"quantity",onChange:this.onChangePI,label:"Quantity",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{name:"defective",value:this.state.update.purchase_items[this.state.current].defective,type:"number",onChange:this.onChangePI,required:!0,label:"Defective",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Discount Type  :  ",r.a.createElement(st.a,{lable:"Discount Type",fullWidth:!0,name:"discount_type",id:"discount_type",value:this.state.update.purchase_items[this.state.current].discount_type,onChange:this.onChangePI},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{name:"discount",value:this.state.update.purchase_items[this.state.current].discount,type:"number",onChange:this.onChangePI,required:!0,label:"Discount",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{name:"purchase_price",value:this.state.update.purchase_items[this.state.current].purchase_price,type:"number",onChange:this.onChangePI,required:!0,label:"Purchase Price",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(st.a,{value:this.state.update.purchase_items[this.state.current].status,name:"status",onChange:this.onChangePI},r.a.createElement(ct.a,{value:"delivered"},"Delivered"),r.a.createElement(ct.a,{value:"incomplete"},"Incomplete"),r.a.createElement(ct.a,{value:"addedtocirculation"},"Added To Circulation")))),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.new?r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.postPurchaseItem(!0)}},"Add"):r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.postPurchaseItem()}},"Update")),r.a.createElement("td",null,this.state.new?r.a.createElement("span",null):r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.deletePurchaseItem()}},"Delete"))))),i=this.state.vendor_selection,c=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Change Vendor"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Vendor's first name",id:"vendor_serach_box",name:"vendor_serach_box",onChange:this.searchVendor}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"vendor_dropdown"},i.map((function(t){return r.a.createElement("a",{href:"#",key:t.id,onClick:function(){e.selectVendor(t.id,t.name)}},t.name)}))))),s=this.state.status;return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("h1",null,this.props.purchase_order.vendor_name))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("table",{cellPadding:"10",cellSpacing:"10"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.vendor_name,InputProps:{readOnly:!0},label:"Vendor",variant:"outlined"})),r.a.createElement("td",null,c)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement($.a,{value:this.state.update.purchase_order.added_by_name,InputProps:{readOnly:!0},label:"Added By",variant:"outlined",fullWidth:!0}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement($.a,{value:this.state.update.purchase_order.third_party_invoice_number,label:"Third Party Invoice Number",variant:"outlined",name:"third_party_invoice_number",onChange:this.onChange,fullWidth:!0}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Invoiced On:",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"invoiced_on",selected:this.state.update.purchase_order.invoiced_on,onChange:this.invoiceHandler})),r.a.createElement("td",null,"Completed On : ",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"completed_on",selected:this.state.update.purchase_order.completed_on,onChange:this.completeHandler}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.total_cost,name:"total_cost",onChange:this.onChange,label:"Total Cost",variant:"outlined",fullWidth:!0})),r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.discount,name:"discount",onChange:this.onChange,label:"Discount",variant:"outlined",fullWidth:!0}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Discount Type  :  ",r.a.createElement(st.a,{lable:"Discount Type",fullWidth:!0,name:"discount_type",id:"discount_type",onChange:this.onChange,value:this.state.update.purchase_order.discount_type},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Status : ",r.a.createElement(st.a,{name:"status",id:"status",fullWidth:!0,onChange:this.onChange,value:this.state.update.purchase_order.status,required:!0},s.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.updatePurchaseOrder()}},"Update")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.props.delete(e.props.purchase_order.id)}},"Delete"))))),r.a.createElement("br",null))),r.a.createElement("hr",null),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,md:1}),r.a.createElement(z.a,{item:!0,md:3},r.a.createElement("h1",null,"Items"))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:8},r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},this.state.popUp?n:r.a.createElement("div",null," ",r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.addPurchaseItem()}},"Add New Items"),r.a.createElement("br",null),r.a.createElement(Je,{data:this.state.update.purchase_items,header:this.columns,page:!1,popUp:this.popUp})))))))))}}]),a}(n.Component),Qt=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Vendor Name",prop:"vendor_name"},{id:2,name:"Items",prop:"items"},{id:3,name:"Invoiced On",prop:"invoiced_on"},{id:4,name:"Total Cost",prop:"total_cost"},{id:5,name:"Status",prop:"status_name"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,purchase_order:{},purchase_items:[],update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.purchaseOrderDelete=n.purchaseOrderDelete.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,[e.target.value]))})}},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/purchaseorders")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=this.state.vendor,this.state.update)a[n]=this.state.update[n][0];a=Object(U.a)(Object(U.a)({},a),{},{action:"edit"}),vt(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({title:"Updated",icon:"success",text:"Purchase Order Details updated."}),r.back()):be.a.fire(e.error)}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"purchaseOrderDelete",value:function(e){var t=this,a={purchase_orders_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){1==e.value&&ht(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Purchase Order Deleted."),t.back()):be.a.fire(e.error)}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2?r[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=12;break;case 6:return a={action:"get",purchase_order_id:t},e.next=9,bt(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return 0===n.p_items.length&&(console.log("blank"),n.p_items=[{id:0}]),e.next=12,this.setState({popUp:!0,purchase_order:n.p_order[0],purchase_items:n.p_items});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;e=this.props.data?this.props.data:[];var t=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),a=r.a.createElement(Yt,{purchase_order:this.state.purchase_order,purchase_items:this.state.purchase_items,update:this.props.update,delete:this.purchaseOrderDelete});return r.a.createElement("div",null,this.state.popUp?a:t)}}]),a}(n.Component),Kt=(a(273),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={purchaseOrders:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/purchaseorders/"+e)}},{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getPurchaseOrdersData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPurchaseOrdersData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt(JSON.stringify(t)).then((function(e){e.status?a.setState({purchaseOrders:e.p_orders,loaded:!0}):be.a.fire(e.error)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(Qt,{pushNewId:this.pushNewId,data:this.state.purchaseOrders,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{margin:0}},"Purchase Orders"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/purchaseorders/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add Purchase Order"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),Xt=Object(f.b)((function(e){return{user:e.user}}))(Kt),$t=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Item Name",prop:"item_name"},{id:2,name:"Quantity",prop:"quantity"},{id:3,name:"Stock",prop:"stock"},{id:4,name:"Defective",prop:"defective"},{id:5,name:"Sold",prop:"sold"},{id:6,name:"Discount",prop:"discount"},{id:7,name:"Purchase Price",prop:"purchase_price"},{id:8,name:"Status",prop:"status"}],n.state={registered:!1,popUp:!1,new:!1,current:0,status:[],vendor_selection:[{id:0,name:"None"}],item_selection:[{id:0,name:"None"}],update:{purchase_order:{vendor_name:"",total_cost:0,discount:0,invoiced_on:n.converter((new Date).toISOString()),completed_on:n.converter((new Date).toISOString()),discount_type:"percent"},purchase_items:[{id:"Fake Key"}]}},n.converter=n.converter.bind(Object(d.a)(n)),n.addPurchaseOrder=n.addPurchaseOrder.bind(Object(d.a)(n)),n.getItemData=n.getItemData.bind(Object(d.a)(n)),n.selectItem=n.selectItem.bind(Object(d.a)(n)),n.searchItem=n.searchItem.bind(Object(d.a)(n)),n.addPurchaseItem=n.addPurchaseItem.bind(Object(d.a)(n)),n.invoiceHandler=n.invoiceHandler.bind(Object(d.a)(n)),n.completeHandler=n.completeHandler.bind(Object(d.a)(n)),n.getVendorsData=n.getVendorsData.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n.searchVendor=n.searchVendor.bind(Object(d.a)(n)),n.selectVendor=n.selectVendor.bind(Object(d.a)(n)),n.onChange=n.onChange.bind(Object(d.a)(n)),n.updatePurchaseOrder=n.updatePurchaseOrder.bind(Object(d.a)(n)),n.onChangePI=n.onChangePI.bind(Object(d.a)(n)),n.postPurchaseItem=n.postPurchaseItem.bind(Object(d.a)(n)),n.deletePurchaseItem=n.deletePurchaseItem.bind(Object(d.a)(n)),n.refreshTable=n.refreshTable.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get"},e.next=3,Vt(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{status:e.data}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getVendorsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(JSON.stringify(t)).then((function(e){e.status&&a.setState({vendor_selection:e.vendors})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectVendor",value:function(e,t){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{vendor:e,vendor_name:t})})})}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},Object(N.a)({},e.target.name,e.target.value))})})}},{key:"converter",value:function(e){return new Date(Date.parse(e))}},{key:"popUp",value:function(e){var t;for(t in this.state.update.purchase_items)if(this.state.update.purchase_items[t].id===e)return void this.setState(Object(U.a)(Object(U.a)({},this.state),{},{current:t,popUp:!0}))}},{key:"searchVendor",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",first_name:e.target.value};this.getVendorsData(t)}}},{key:"invoiceHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{invoiced_on:e})})})}},{key:"completeHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{completed_on:e})})})}},{key:"updatePurchaseOrder",value:function(){var e=this;if(this.state.registered){console.log(this.state);var t=Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{action:"edit",purchase_order_id:this.state.update.purchase_order.id});vt(JSON.stringify(t)).then((function(e){e.status?be.a.fire("Purchase Order Details Has Been Updated."):be.a.fire(e.error)}))}else{t=Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{action:"add",purchase_order_id:this.state.update.purchase_order.id});ft(JSON.stringify(t)).then((function(t){t.status?(console.log(t),be.a.fire("Purchase Order Has Been Added."),e.setState(Object(U.a)(Object(U.a)({},e.state),{},{registered:!0,update:Object(U.a)(Object(U.a)({},e.state.update),{},{purchase_order:Object(U.a)(Object(U.a)({},e.state.update.purchase_order),{},{id:t.p_orders[0].id,added_by:t.p_orders[0].added_by_name})})}))):be.a.fire(t.error)}))}}},{key:"addPurchaseOrder",value:function(){var e=this,t=Object(U.a)(Object(U.a)({},this.state.update.purchase_order),{},{action:"add"});ft(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Purchase Order Has Been Added."),t.p_orders[0].invoiced_on=e.converter(t.p_orders[0].invoiced_on),t.p_orders[0].completed_on=e.converter(t.p_orders[0].completed_on),e.setState(Object(U.a)(Object(U.a)({},e.state),{},{update:Object(U.a)(Object(U.a)({},e.state.update),{},{purchase_order:t.p_orders[0]})}))):be.a.fire("Error : ",t.error)}))}},{key:"onChangePI",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:Object(U.a)(Object(U.a)({},this.state.update.purchase_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.purchase_items[this.state.current]),{},Object(N.a)({},e.target.name,e.target.value))))})})}},{key:"postPurchaseItem",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a)return e=Object(U.a)({action:"add",purchase_order:this.state.update.purchase_order.id},this.state.update.purchase_items[this.state.current]),void xt(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Purchase Item Has Been Added."),t.refreshTable()):be.a.fire(e.error)}));e=Object(U.a)({action:"edit"},this.state.update.purchase_items[this.state.current]),kt(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Purchase Item Details Has Been Updated."),t.refreshTable()):be.a.fire(e.error)}))}},{key:"deletePurchaseItem",value:function(){var e=this,t={purchase_items_id:[this.state.update.purchase_items[this.state.current].id]};jt(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Purchase Item Has Beed Deleted."),e.refreshTable()):be.a.fire(t.error)}))}},{key:"addPurchaseItem",value:function(){var e,t=0,a=[];for(e in this.state.update.purchase_items)e.id&&"Fake Key"!==e.id&&(t+=1,a.push(e));this.setState({current:t,new:!0,popUp:!0,update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:[].concat(a,[{item_name:"None",discount_type:"percentage",status:"incomplete"}])})})}},{key:"searchItem",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getItemData(t)}}},{key:"getItemData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_selection:e.items}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectItem",value:function(e,t){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:Object(U.a)(Object(U.a)({},this.state.update.purchase_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.purchase_items[this.state.current]),{},{item_name:t,item:e})))})})}},{key:"refreshTable",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.update.purchase_order.id,a=[],n={action:"get",purchase_order_id:t},e.next=5,bt(JSON.stringify(n)).then((function(e){e.status&&(a=e.p_items)}));case 5:return 0===a.length&&(a=[{id:"Fake Key",item_name:""}]),e.next=8,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1,update:Object(U.a)(Object(U.a)({},this.state.update),{},{purchase_items:a})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.item_selection,a=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Select Item"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Item Name",id:"item_search_box",name:"item_serach_box",onChange:this.searchItem}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"vendor_dropdown"},t.map((function(t){return r.a.createElement("a",{key:t.id,onClick:function(){e.selectItem(t.id,t.name)}},t.name)}))))),n=r.a.createElement("table",{cellPadding:10,cellSpacing:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(M.a,{color:"secondary",onClick:function(){e.refreshTable()}},r.a.createElement(Ne.a,null)))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_items[this.state.current].item_name,InputProps:{readOnly:!0},label:"Item",variant:"outlined"})),r.a.createElement("td",null,this.state.new?a:r.a.createElement("span",null))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_items[this.state.current].quantity,type:"number",required:!0,name:"quantity",onChange:this.onChangePI,label:"Quantity",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{name:"defective",value:this.state.update.purchase_items[this.state.current].defective,type:"number",onChange:this.onChangePI,required:!0,label:"Defective",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Discount Type  :  ",r.a.createElement(st.a,{lable:"Discount Type",fullWidth:!0,name:"discount_type",id:"discount_type",value:this.state.update.purchase_items[this.state.current].discount_type,onChange:this.onChangePI},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{name:"discount",value:this.state.update.purchase_items[this.state.current].discount,type:"number",onChange:this.onChangePI,required:!0,label:"Discount",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{name:"purchase_price",value:this.state.update.purchase_items[this.state.current].purchase_price,type:"number",onChange:this.onChangePI,required:!0,label:"Purchase Price",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(st.a,{value:this.state.update.purchase_items[this.state.current].status,name:"status",onChange:this.onChangePI},r.a.createElement(ct.a,{value:"delivered"},"Delivered"),r.a.createElement(ct.a,{value:"incomplete"},"Incomplete"),r.a.createElement(ct.a,{value:"addedtocirculation"},"Added To Circulation")))),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.new?r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.postPurchaseItem(!0)}},"Add"):r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.postPurchaseItem()}},"Update")),r.a.createElement("td",null,this.state.new?r.a.createElement("span",null):r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.deletePurchaseItem()}},"Delete"))))),i=this.state.vendor_selection,c=r.a.createElement(yt.a,{trigger:this.state.update.purchase_order.id?r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Change Vendor"):r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Select Vendor"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Vendor's first name",id:"vendor_serach_box",name:"vendor_serach_box",onChange:this.searchVendor}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"vendor_dropdown"},i.map((function(t){return r.a.createElement("a",{key:t.id,onClick:function(){e.selectVendor(t.id,t.name)}},t.name)}))))),s=this.state.status;return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("h1",null,"Create New Purchase Order"))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("table",{cellPadding:"10",cellSpacing:"10"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.vendor_name,InputProps:{readOnly:!0},label:"Vendor",variant:"outlined"})),r.a.createElement("td",null,c)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement($.a,{value:this.state.update.purchase_order.third_party_invoice_number,label:"Third Party Invoice Number",variant:"outlined",name:"third_party_invoice_number",onChange:this.onChange,fullWidth:!0}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Invoiced On:",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"invoiced_on",selected:this.state.update.purchase_order.invoiced_on,onChange:this.invoiceHandler})),r.a.createElement("td",null,"Completed On : ",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"completed_on",selected:this.state.update.purchase_order.completed_on,onChange:this.completeHandler}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.total_cost,name:"total_cost",onChange:this.onChange,label:"Total Cost",variant:"outlined",fullWidth:!0})),r.a.createElement("td",null,r.a.createElement($.a,{value:this.state.update.purchase_order.discount,name:"discount",onChange:this.onChange,label:"Discount",variant:"outlined",fullWidth:!0}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Discount Type  :  ",r.a.createElement(st.a,{lable:"Discount Type",fullWidth:!0,name:"discount_type",id:"discount_type",onChange:this.onChange,value:this.state.update.purchase_order.discount_type},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Status : ",r.a.createElement(st.a,{name:"status",id:"status",fullWidth:!0,onChange:this.onChange,value:this.state.update.purchase_order.status,required:!0},s.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.updatePurchaseOrder()}},this.state.registered?"Update":"Add")),r.a.createElement("td",null)))),r.a.createElement("br",null))),r.a.createElement("hr",null),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,md:1}),r.a.createElement(z.a,{item:!0,md:3},r.a.createElement("h1",null,"Items"))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:8},r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},this.state.popUp?n:r.a.createElement("div",null," ",r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.addPurchaseItem()}},"Add New Items"),r.a.createElement("br",null),r.a.createElement(Je,{data:this.state.update.purchase_items,header:this.columns,page:!1,popUp:this.popUp})))))))))}}]),a}(n.Component),Zt=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoices","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ea=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoices/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ta=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoices","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),aa=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoice","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),na=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoice","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ra=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoices/status","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ia=(a(159),a(12)),ca=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoiceitems/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),sa=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoiceitems","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),oa=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/sales/invoiceitem","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),la=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/places","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ua=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/places/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),pa=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/places","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),da=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/place","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ma=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/place","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ha=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/places/assign","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),fa=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/methods","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),ba=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/giftcard/validate","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),va=a(120),ga=a(349),Ea=a(348),ya=a(168),Oa=a.n(ya);function _a(e){var t=e.onClose,a=e.open,n=e.onOpen,i=function(){console.log("close"),t()};return r.a.createElement(Ea.a,{onClose:i,"aria-labelledby":"simple-dialog-title",open:a,fullWidth:!0,maxWidth:"sm"},r.a.createElement(ga.a,{id:"simple-dialog-title"},"Place the QR inside the Box"),r.a.createElement(Oa.a,{delay:300,onError:function(e){console.log(e)},onScan:function(t){t?e.onFind(t)&&i():(i(),function(e){var t=Date.now(),a=null;do{a=Date.now()}while(a-t<e)}(3e3),n())},style:{width:"100%"}}))}var ja=function(e){var t=r.a.useState(!1),a=Object(D.a)(t,2),n=a[0],i=a[1],c=function(){i(!0)};return r.a.createElement("div",null,r.a.createElement(X.a,{variant:"contained",ref:e.refoption,color:"secondary",id:"btnScanner",onClick:c},"Scan QR Code"),r.a.createElement(_a,{open:n,onClose:function(){i(!1)},onOpen:c,onFind:e.onFind}))},xa=Object(F.a)({paymentFormField:{margin:"10px"}}),ka=function(e){var t=xa(),a=e.invoiceData.invoice,n=r.a.useState({invoice_id:"",amount:"",transaction_from:"",transaction_id:"",payment_method_id:""}),i=Object(D.a)(n,2),c=i[0],s=i[1],u=r.a.useState(!1),p=Object(D.a)(u,2),d=p[0],m=p[1],h=r.a.useState(""),f=Object(D.a)(h,2),b=f[0],v=f[1],g=r.a.useState(!1),E=Object(D.a)(g,2),y=E[0],O=E[1],_=function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(b),a={action:"get",code:b},e.next=4,ba(JSON.stringify(a)).then((function(e){O(!0),console.log(e),e.status?(be.a.fire("Great!",e.msg,"success"),O(e.status)):be.a.fire("Ooops!",e.msg,"error")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={action:"add",payment_method:c.payment_method_id,invoice_id:a.id,amount:c.amount,transaction_from:c.amount,transaction_id:c.transaction_id},console.log(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log(a),r.a.createElement(yt.a,{open:e.show,closeOnDocumentClick:!0,onClose:e.onClose},r.a.createElement("div",{style:{padding:20,display:"flex",flexDirection:"column"}},r.a.createElement("h3",null,"Proceed"),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,"Discount Total"),r.a.createElement("div",null,r.a.createElement("b",null,"Rs. ",a.discount_total))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,"Tax Total"),r.a.createElement("div",null,r.a.createElement("b",null,"Rs. ",a.tax_total))),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",null,"Total"),r.a.createElement("div",null,r.a.createElement("b",null,"Rs. ",a.total_amount)))),r.a.createElement("br",null),r.a.createElement("form",{noValidate:!0,autoComplete:"off",style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{padding:"5px 30px",display:"flex",flexDirection:"row"}},r.a.createElement("div",{style:{width:"80%"}},"Select Payment Method :"),r.a.createElement(st.a,{fullWidth:!0,value:c.payment_method_id,onChange:function(e){e.preventDefault(),console.log("clicked"),console.log(e.target.value),s(Object(U.a)(Object(U.a)({},c),{},{payment_method_id:e.target.value})),m(!0)}},e.payment_methods.map((function(e,t){return r.a.createElement(ct.a,{key:t,value:e.id},e.name)})))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement($.a,{className:t.paymentFormField,required:!0,label:"Transaction From",size:"small",variant:"outlined",onChange:function(e){s(Object(U.a)(Object(U.a)({},c),{},{transaction_from:e.target.value}))}}),r.a.createElement($.a,{className:t.paymentFormField,required:!0,label:"Transaction ID",size:"small",variant:"outlined",onChange:function(e){s(Object(U.a)(Object(U.a)({},c),{},{transaction_id:e.target.value}))}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement($.a,{fullWidth:!0,className:t.paymentFormField,label:"Amount",variant:"outlined",onChange:function(e){s(Object(U.a)(Object(U.a)({},c),{},{amount:e.target.value}))},size:"small"})),d?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",padding:"10px"}},r.a.createElement("div",{style:{width:"35%",verticalAlign:"center",lineHeight:"59px"}},"Apply Gift Card :"),r.a.createElement($.a,{className:t.paymentFormField,label:"Input Code",size:"small",variant:"outlined",onChange:function(e){v(e.target.value)}}),r.a.createElement(X.a,{variant:"contained",color:"primary",style:{margin:"10px 0"},onClick:_},y?"Verified":"Verify"))):null),r.a.createElement("div",null,r.a.createElement(X.a,{style:{float:"right",margin:"10px 20px 0 0",display:"inline-block"},variant:"contained",color:"secondary",onClick:j},"Save Payment"))))},Ca=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Item Name",prop:"item_name"},{id:2,name:"Quantity",prop:"quantity"},{id:8,name:"Price",prop:"price"},{id:3,name:"Sold From",prop:"sold_from_name"},{id:4,name:"Tax Total",prop:"tax_total"},,{id:5,name:"Disount Amount",prop:"discount_amount"},{id:6,name:"Sub Total",prop:"sub_total"},{id:7,name:"Total",prop:"total"}],n.discount_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"discount_type"},{id:5,name:"Remove",prop:"removeButton"}],n.tax_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"tax_type"},{id:5,name:"Remove",prop:"removeButton"}],n.add_discount_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"discount_type"}],n.add_tax_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"tax_type"}],n.confirmPayment=function(){},n.closePaymentPopup=function(){n.setState(Object(U.a)(Object(U.a)({},n.state),{},{showPaymentPopup:!1}))},n.closeDiscountPopup=function(){n.setState(Object(U.a)(Object(U.a)({},n.state),{},{showDiscountPopup:!1}))},n.closeTaxPopup=function(){n.setState(Object(U.a)(Object(U.a)({},n.state),{},{showTaxPopup:!1}))},n.qrRef=r.a.createRef(),n.state={tax_start:0,tax_end:5,discount_start:0,discount_end:5,tax_loaded:!1,discount_loaded:!1,discount_page:[],tax_page:[],discount_selection:[],tax_selection:[],place_selection:[],stock_selection:[],sold_from_selection:[],popUp:!1,new:!1,current:0,status:[],showDiscountPopup:!1,showTaxPopup:!1,showPaymentPopup:!1,payment_methods:[],customer_selection:[{id:0,name:"None"}],item_selection:[{id:0,name:"None"}],update:{invoice:Object(U.a)(Object(U.a)({},n.props.invoice),{},{invoiced_on:n.converter(n.props.invoice.invoiced_on),due_on:n.converter(n.props.invoice.due_on)}),invoice_items:n.props.invoice_items}},n.update_table=n.update_table.bind(Object(d.a)(n)),n.refreshTable=n.refreshTable.bind(Object(d.a)(n)),n.getItemData=n.getItemData.bind(Object(d.a)(n)),n.selectItem=n.selectItem.bind(Object(d.a)(n)),n.searchItem=n.searchItem.bind(Object(d.a)(n)),n.addInvoiceItem=n.addInvoiceItem.bind(Object(d.a)(n)),n.invoiceHandler=n.invoiceHandler.bind(Object(d.a)(n)),n.dueOnHandler=n.dueOnHandler.bind(Object(d.a)(n)),n.getCustomerData=n.getCustomerData.bind(Object(d.a)(n)),n.converter=n.converter.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n.searchCustomer=n.searchCustomer.bind(Object(d.a)(n)),n.selectCustomer=n.selectCustomer.bind(Object(d.a)(n)),n.onChange=n.onChange.bind(Object(d.a)(n)),n.updateInvoice=n.updateInvoice.bind(Object(d.a)(n)),n.onChangePI=n.onChangePI.bind(Object(d.a)(n)),n.postInvoiceItem=n.postInvoiceItem.bind(Object(d.a)(n)),n.deleteInvoiceItem=n.deleteInvoiceItem.bind(Object(d.a)(n)),n.onChangePlace=n.onChangePlace.bind(Object(d.a)(n)),n.removeEntry=n.removeEntry.bind(Object(d.a)(n)),n.addEntryDiscount=n.addEntryDiscount.bind(Object(d.a)(n)),n.addEntryTax=n.addEntryTax.bind(Object(d.a)(n)),n.popUpTemp=n.popUpTemp.bind(Object(d.a)(n)),n.handleQRMultiple=n.handleQRMultiple.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"sleep",value:function(e){var t=Date.now(),a=null;do{a=Date.now()}while(a-t<e)}},{key:"handleQRMultiple",value:function(e){return this.addItemFromQR(e),!0}},{key:"addItemFromQR",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={action:"get",filter:"uuid",uuid:t},e.next=3,wt(JSON.stringify(a)).then((function(e){if(e.status){for(var t in n.state.update.invoice_items)if(parseInt(e.purchase_item[0].id)===parseInt(n.state.update.invoice_items[t].purchase_item)){var a=n.state.update.invoice_items;return a[t].quantity=a[t].quantity+1,n.setState(Object(U.a)(Object(U.a)({},n.state),{},{update:Object(U.a)(Object(U.a)({},n.state.update),{},{invoice_items:a})})),n.postInvoiceItem(!1,!1),void be.a.fire({title:"Invoice Item added !",text:"Scan Another One",timer:1e3,onClose:function(){}}).then((function(e){e.dismiss===be.a.DismissReason.timer&&n.qrRef.current.click()}))}n.addInvoiceItem(),n.selectItem(e.purchase_item[0].item,e.purchase_item[0].item_name),n.setState(Object(U.a)(Object(U.a)({},n.state),{},{update:Object(U.a)(Object(U.a)({},n.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},n.state.update.invoice_items),{},Object(N.a)({},n.state.current,Object(U.a)(Object(U.a)({},n.state.update.invoice_items[n.state.current]),{},{purchase_item:e.purchase_item[0].id,price:e.purchase_item[0].sales_price})))})}))}}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"popUpTemp",value:function(){}},{key:"removeEntry",value:function(e,t){var a,n;t?((a=this.state.update.invoice_items[this.state.current].applied_discount).pop(t),(n=this.state.update.invoice_items[this.state.current].discount).pop(a.id),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},t,{applied_discount:a,discount:n}))})}))):((a=this.state.update.invoice_items[this.state.current].applied_tax).pop(t),(n=this.state.update.invoice_items[this.state.current].taxes).pop(a.id),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},t,{applied_tax:a,taxes:n}))})})))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get"},e.next=3,ra(JSON.stringify(t)).then((function(e){console.log("Data of the invoice",e),e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{status:e.data}))}));case 3:return e.next=5,fa(JSON.stringify(t)).then((function(e){console.log(e),e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{payment_methods:e.payment_methods}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{customer_selection:e.customers})):be.a.fire({icon:"error",title:e.error})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectCustomer",value:function(e,t){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{customer:e,customer_name:t})})}))}},{key:"onChange",value:function(e){console.log("clicked on stuff"),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},Object(N.a)({},e.target.name,e.target.value))})}))}},{key:"converter",value:function(e){return new Date(Date.parse(e))}},{key:"popUp",value:function(e){var t;for(t in this.state.update.invoice_items)if(this.state.update.invoice_items[t].id===e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{current:t,popUp:!0}));break}var a={action:"get",filter:"item",item_id:this.state.update.invoice_items[t].item};this.getPlacesData(a)}},{key:"getPlacesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(JSON.stringify(t)).then((function(e){if(e.status){a.setState(Object(U.a)(Object(U.a)({},a.state),{},{sold_from_selection:e.placements}));var t,n,r=[];for(t in e.placements)n={id:e.placements[t].placed_on,str_placed_on:e.placements[t].str_placed_on},r[e.placements[t].placed_on]=n;r=r.filter((function(e){return null!=e})),a.setState(Object(U.a)(Object(U.a)({},a.state),{},{place_selection:r})),a.update_stock(e)}else be.a.fire({icon:"error",title:e.error})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_stock",value:function(e){var t;t=this.state.update.invoice_items[this.state.current].sold_from?this.state.update.invoice_items[this.state.current].sold_from:e.placements[0].placed_on;var a,n=[];for(a in e.placements)if(t===e.placements[a].placed_on){var r=e.placements[a].purchase_item_details.purchase_price+"/-  "+e.placements[a].purchase_item_details.quantity+" "+e.placements[a].purchase_item_details.vendor;n.push({id:e.placements[a].purchase_item,str:r,sales_price:e.placements[a].sales_price})}console.log("temp",e),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{stock_selection:n}))}},{key:"onChangePlace",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.state.sold_from_selection),e.next=3,this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},Object(N.a)({},t.target.name,t.target.value))))})});case 3:for(n in a=[],this.state.sold_from_selection)parseInt(this.state.update.invoice_items[this.state.current].sold_from)===parseInt(this.state.sold_from_selection[n].placed_on)&&(r=this.state.sold_from_selection[n].purchase_item_details.purchase_price+"/-  "+this.state.sold_from_selection[n].purchase_item_details.quantity+" "+this.state.sold_from_selection[n].purchase_item_details.vendor,a.push({id:this.state.sold_from_selection[n].purchase_item,str:r,sales_price:this.state.sold_from_selection[n].purchase_item.sales_price}));this.setState(Object(U.a)(Object(U.a)({},this.state),{},{stock_selection:a}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchCustomer",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getCustomerData(t)}}},{key:"invoiceHandler",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{invoiced_on:e})})}))}},{key:"dueOnHandler",value:function(e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{due_on:e})})}))}},{key:"updateInvoice",value:function(){var e=this,t=Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{action:"edit",invoice_id:this.state.update.invoice.id});na(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Invoice Details Has Been Updated."),e.refreshTable()):be.a.fire({icon:"error",title:t.error})}))}},{key:"onChangePI",value:function(e){"purchase_item"===e.target.name?(console.log(this.state.stock_selection),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},Object(N.a)({},e.target.name,e.target.value))))})}))):this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},Object(N.a)({},e.target.name,e.target.value))))})}))}},{key:"postInvoiceItem",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(a)return(e=Object(U.a)({action:"add",invoice:this.state.update.invoice.id},this.state.update.invoice_items[this.state.current])).applied_tax=[],e.applied_discount=[],void sa(JSON.stringify(e)).then((function(e){e.status?(n&&be.a.fire("Invoice Item Has Been Added."),t.refreshTable()):be.a.fire({icon:"error",title:e.error})}));(e=Object(U.a)({action:"edit",invoice:this.state.update.invoice.id,invoice_item_id:this.state.update.invoice_items[this.state.current].id},this.state.update.invoice_items[this.state.current])).applied_tax=[],e.applied_discount=[],oa(JSON.stringify(e)).then((function(e){e.status?(n&&be.a.fire("Invoice Item Details Has Been Updated."),t.refreshTable()):be.a.fire({icon:"error",title:e.error})}))}},{key:"deleteInvoiceItem",value:function(){var e=this,t={invoice_items_id:[this.state.update.invoice_items[this.state.current].id]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(a){ca(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Invoice Item Has Beed Deleted."),e.refreshTable()):be.a.fire({icon:"error",title:t.error})}))}))}},{key:"addInvoiceItem",value:function(){var e,t=0,a=[];for(e in this.state.update.invoice_items)e.id&&"Fake Key"!==e.id&&(t+=1,a.push(e));this.setState(Object(U.a)(Object(U.a)({},this.state),{},{current:t,new:!0,popUp:!0,update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:[].concat(a,[{item_name:"None",discount_type:"percentage",status:"incomplete",discount:[],taxes:[],applied_tax:[],applied_discount:[],purchase_item:""}])})}))}},{key:"searchItem",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getItemData(t)}}},{key:"getItemData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_selection:e.items})):be.a.fire({icon:"error",title:e.error})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectItem",value:function(e,t,a){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{item_name:t,item:e,price:a})))})}));var n={action:"get",filter:"item",item_id:e};this.getPlacesData(n)}},{key:"refreshTable",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.update.invoice.id,a=[],n={action:"get",invoice_id:t},e.next=5,aa(JSON.stringify(n)).then((function(e){e.status?a=e.invoice_items:be.a.fire({icon:"error",title:e.error})}));case 5:return 0===a.length&&(a=[{id:"Fake Key",item_name:""}]),e.next=8,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1,update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:a})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t<0?-1:1,!a){e.next=18;break}if(0!==t){e.next=7;break}return e.next=5,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{discoount_loaded:!1,discount_start:0,discount_end:10,discount_page:1}));case 5:e.next=14;break;case 7:if(!(this.state.discount_start+t>-1)){e.next=12;break}return e.next=10,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{discount_loaded:!1,discount_start:this.state.discount_start+t,discount_end:this.state.discount_end+t,discount_page:this.state.discount_page+n}));case 10:e.next=14;break;case 12:return alert("Cannot move futher from here."),e.abrupt("return");case 14:r={action:"get",filter:"none",start:this.state.discount_start,end:this.state.discount_end},this.getDiscountsData(r),e.next=32;break;case 18:if(0!==t){e.next=23;break}return e.next=21,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{tax_loaded:!1,tax_start:0,tax_end:10,tax_page:1}));case 21:e.next=30;break;case 23:if(!(this.state.tax_start+t>-1)){e.next=28;break}return e.next=26,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{tax_loaded:!1,tax_start:this.state.tax_start+t,tax_end:this.state.tax_end+t,tax_page:this.state.tax_page+n}));case 26:e.next=30;break;case 28:return alert("Cannot move futher from here."),e.abrupt("return");case 30:r={action:"get",filter:"none",start:this.state.tax_start,end:this.state.tax_end},this.getTaxesData(r);case 32:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getDiscountsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{discount_selection:e.discounts,discount_loaded:!0})):be.a.fire({icon:"error",title:e.error})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaxesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{tax_selection:e.taxes,tax_loaded:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addEntryDiscount",value:function(e){var t,a,n;for(t in this.state.discount_selection)if(this.state.discount_selection[t].id===e){a=this.state.update.invoice_items[this.state.current].applied_discount;var r=this.state.discount_selection[t];a.push(r),(n=this.state.update.invoice_items[this.state.current].discount).push(e),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{discount:n,applied_discount:a})))})}))}}},{key:"addEntryTax",value:function(e){var t;for(t in this.state.tax_selection)if(this.state.tax_selection[t].id===e){var a=this.state.update.invoice_items[this.state.current].applied_tax,n=this.state.tax_selection[t];a.push(n);var r=this.state.update.invoice_items[this.state.current].taxes;r.push(e),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{tax:r,applied_tax:a})))})}))}}},{key:"render",value:function(){var e,t=this,a=(this.props.classes,this.state.item_selection),n=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"primary",size:"small"},"Select Item"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Item Name",id:"item_search_box",name:"item_serach_box",onChange:this.searchItem}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"item_dropdown"},a.map((function(e){return r.a.createElement("a",{key:e.id,onClick:function(){t.selectItem(e.id,e.name,e.sales_price)}},e.name," ",e.sales_price)}))))),i=this.state.place_selection,c=r.a.createElement("select",{name:"sold_from",id:"sold_from",onChange:this.onChangePlace,value:this.state.update.invoice_items[this.state.current].sold_from},r.a.createElement("option",{key:"Fake Key",value:"Fake Value"},"Select Place"),i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.str_placed_on)}))),s=this.state.stock_selection,o=this.state.update.invoice_items[this.state.current].purchase_item?this.state.update.invoice_items[this.state.current].purchase_item:"",l=r.a.createElement("select",{name:"purchase_item",id:"purchase_item",onChange:this.onChangePI,value:o},r.a.createElement("option",{key:"Fake Key",value:"Fake Value"},"Select Stock"),s.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.str)}))),u=r.a.createElement(yt.a,{open:this.state.showDiscountPopup,closeOnDocumentClick:!0,onClose:this.closeDiscountPopup},r.a.createElement("div",null,r.a.createElement("h3",null," Click To Apply New Discount"),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:12,md:12},r.a.createElement(Je,{data:this.state.discount_selection,header:this.add_discount_columns,page:!1,popUp:this.addEntryDiscount})),r.a.createElement(z.a,{item:!0,xm:12,md:3},r.a.createElement(M.a,{onClick:function(){t.update_table(-5,!0)}},r.a.createElement(Ne.a,null)),r.a.createElement("span",null,"      ",this.state.discount_page,"       "),r.a.createElement(M.a,{onClick:function(){t.update_table(5,!0)}},r.a.createElement(Pe.a,null)))),r.a.createElement(X.a,{style:{float:"right",margin:"0 40px 20px 0"},variant:"contained",color:"secondary",size:"small",onClick:this.closeDiscountPopup},"Done"))),p=r.a.createElement(yt.a,{open:this.state.showTaxPopup,closeOnDocumentClick:!0,onClose:this.closeTaxPopup},r.a.createElement("div",null,r.a.createElement("h3",null,"Click To Apply New Tax "),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:12,md:12},r.a.createElement(Je,{data:this.state.tax_selection,header:this.add_tax_columns,page:!1,popUp:this.addEntryTax})),r.a.createElement(z.a,{item:!0,xm:12,md:3},r.a.createElement(M.a,{onClick:function(){t.update_table(-5,!1)}},r.a.createElement(Ne.a,null)),r.a.createElement("span",null,"      ",this.state.discount_page,"       "),r.a.createElement(M.a,{onClick:function(){t.update_table(5,!1)}},r.a.createElement(Pe.a,null)))),r.a.createElement(X.a,{style:{float:"right",margin:"0 40px 20px 0"},variant:"contained",color:"secondary",size:"small",onClick:this.closeTaxPopup},"Done"))),d=this.state.update.invoice_items[this.state.current].applied_discount;for(e in d)d[e]=Object(U.a)(Object(U.a)({},d[e]),{},{removeButton:r.a.createElement("button",{onClick:function(){t.removeEntry(e,!0)}}," Remove ")});var m=this.state.update.invoice_items[this.state.current].applied_tax;for(e in m)m[e]=Object(U.a)(Object(U.a)({},m[e]),{},{removeButton:r.a.createElement("button",{onClick:function(){t.removeEntry(e,!1)}}," Remove ")});var h=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,md:"auto"},r.a.createElement(va.a,{cellSpacing:10,cellPadding:10,responsive:"sm"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.refreshTable()}},"Back"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null,"Item :  ",this.state.update.invoice_items[this.state.current].item_name)),r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},r.a.createElement("b",null,"Sold From "))),r.a.createElement("tr",null,r.a.createElement("td",null,"Place:"),r.a.createElement("td",null,this.state.update.invoice_items[this.state.current].item?c:"Select An Item First")),r.a.createElement("tr",null,r.a.createElement("td",null,"Stock :"),r.a.createElement("td",null,this.state.update.invoice_items[this.state.current].item?l:"Select An Item First")),r.a.createElement("tr",null,r.a.createElement("td",null,"Quantity : ",r.a.createElement("input",{name:"quantity",value:this.state.update.invoice_items[this.state.current].quantity,type:"number",onChange:this.onChangePI,required:!0,min:"1"}),r.a.createElement("br",null)),r.a.createElement("td",null,"Price : ",r.a.createElement("input",{name:"price",value:this.state.update.invoice_items[this.state.current].price,type:"number",onChange:this.onChangePI,required:!0}),r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",null,"Tax Total : ",this.state.update.invoice_items[this.state.current].tax_total," ",r.a.createElement("br",null)),r.a.createElement("td",null,"Sub Total : ",this.state.update.invoice_items[this.state.current].sub_total," ",r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",null,"Discount Amount : ",this.state.update.invoice_items[this.state.current].discount_amount,r.a.createElement("br",null)),r.a.createElement("td",null,"Total without discount : ",this.state.update.invoice_items[this.state.current].total_without_discount,r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",null,"Total : ",this.state.update.invoice_items[this.state.current].total,r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",null,"Applied Discounts"),r.a.createElement("th",null,r.a.createElement(X.a,{onClick:function(){t.update_table(0,!0),t.setState(Object(U.a)(Object(U.a)({},t.state),{},{showDiscountPopup:!0}))},variant:"contained",color:"secondary",size:"small"},"Apply New Discount"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement(Je,{data:d,header:this.discount_columns,page:!1,popUp:this.popUpTemp,removeEntry:this.removeEntry}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},u)),r.a.createElement("tr",null,r.a.createElement("td",null,"Applied Taxes"),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){t.update_table(0,!1),t.setState(Object(U.a)(Object(U.a)({},t.state),{},{showTaxPopup:!0}))}},"Apply New Tax"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement(Je,{data:m,header:this.tax_columns,page:!1,popUp:this.popUpTemp,removeEntry:this.removeEntry}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},p,r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",null,this.state.new?r.a.createElement(X.a,{variant:"contained",color:"primary",size:"small",onClick:function(){t.postInvoiceItem(!0)}},"Add"):r.a.createElement(X.a,{variant:"contained",color:"primary",size:"small",onClick:function(){t.postInvoiceItem()}},"Update")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",size:"small",onClick:function(){t.deleteInvoiceItem()}},"Delete")))))))),f=this.state.customer_selection,b=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"primary"},"Change Customer"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Customer's first name",id:"customer_serach_box",name:"customer_serach_box",onChange:this.searchCustomer}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"customer_dropdown"},f.map((function(e){return r.a.createElement("a",{href:"#",key:e.id,onClick:function(){t.selectCustomer(e.id,e.name)}},e.name)}))))),v=this.state.status;return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spaceing:6},r.a.createElement(z.a,{item:!0,xm:12},r.a.createElement("h2",null,this.state.update.invoice.customer_name))),this.state.payment_methods.length>0?r.a.createElement(ka,{payment_methods:this.state.payment_methods,show:this.state.showPaymentPopup,onClose:this.closePaymentPopup,invoiceData:this.state.update}):null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:8},r.a.createElement(va.a,{cellPadding:"10",cellSpacing:"10"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{defaultValue:this.state.update.invoice.added_by_name,InputProps:{readOnly:!0},label:"Added By",variant:"outlined"})),r.a.createElement("td",null," ",r.a.createElement($.a,{defaultValue:this.state.update.invoice.customer_name,InputProps:{readOnly:!0},label:"Customer",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,b)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement($.a,{defaultValue:this.state.update.invoice.invoice_number,InputProps:{readOnly:!0},fullWidth:!0,label:"Invoice Number",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{defaultValue:this.state.update.invoice.total_amount,InputProps:{readOnly:!0},label:"Total Amount",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{defaultValue:this.state.update.invoice.tax_total,InputProps:{readOnly:!0},label:"Tax Total",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{defaultValue:this.state.update.invoice.discount_total,InputProps:{readOnly:!0},label:"Discount Total",variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{defaultValue:this.state.update.invoice.paid_amount,InputProps:{readOnly:!0},label:"Paid Amount",variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{variant:"outlined",value:this.state.update.invoice.additional_discount,name:"additional_discount",onChange:this.onChange,type:"float",label:"Additional Discount"}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Invoiced On : "),r.a.createElement("br",null),r.a.createElement(Et.a,{name:"invoiced_on",selected:this.state.update.invoice.invoiced_on,onChange:this.invoiceHandler})),r.a.createElement("td",null,r.a.createElement("b",null,"Due On : ")," ",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"completed_on",selected:this.state.update.invoice.due_on,onChange:this.dueOnHandler}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Status : "),r.a.createElement(st.a,{label:"Status",fullWidth:!0,name:"status",id:"status",onChange:this.onChange,value:this.state.update.invoice.status},v.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){t.updateInvoice()}},"Update Invoice"),r.a.createElement(X.a,{style:{marginLeft:20},variant:"contained",color:"primary",onClick:function(){return t.setState(Object(U.a)(Object(U.a)({},t.state),{},{showPaymentPopup:!0}))}},"Add Payment")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.props.delete(t.props.invoice.id)}},"Delete"))))))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xs:8},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.addInvoiceItem()}},"Add New Items")),r.a.createElement("td",null,r.a.createElement(ja,{refoption:this.qrRef,onFind:this.handleQRMultiple}))))),r.a.createElement("h3",null,"Items"),this.state.popUp?h:r.a.createElement(Je,{data:this.state.update.invoice_items,header:this.columns,page:!1,popUp:this.popUp}))))}}]),a}(n.Component),wa=Object(ia.a)((function(){return{paymentFormField:{margin:"10px"}}}))(Ca),Sa=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Customer's Name",prop:"customer_name"},{id:2,name:"Sold By",prop:"added_by_name"},{id:3,name:"Paid Amount",prop:"paid_amount"},{id:4,name:"Order Number",prop:"invoice_number"},{id:5,name:"Invoiced On",prop:"invoiced_on_str"},{id:6,name:"Status",prop:"status_name"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,invoices:{},invoice_items:[],update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.invoiceDelete=n.invoiceDelete.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/invoices")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,[e.target.value]))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=this.state.vendor,this.state.update)a[n]=this.state.update[n][0];a=Object(U.a)(Object(U.a)({},a),{},{action:"edit"}),na(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Invoice Data updated."),r.props.update(0)):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"invoiceDelete",value:function(e){var t=this,a={invoices_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){1==e.value&&ea(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Invoice has been Deleted."),t.props.update(0)):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2&&void 0!==r[2]&&r[2]){e.next=6;break}this.props.pushNewId(t),e.next=12;break;case 6:return a={action:"get",invoice_id:t},e.next=9,aa(JSON.stringify(a)).then((function(e){e.status?(console.log(e),n=e):be.a.fire({icon:"error",title:e.error})}));case 9:return 0===n.invoice_items.length&&(console.log("blank"),n.invoice_items=[{id:0}]),e.next=12,this.setState({popUp:!0,invoice:n.invoice[0],invoice_items:n.invoice_items});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;e=this.props.data?this.props.data:[];var t=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),a=r.a.createElement(wa,{invoice:this.state.invoice,invoice_items:this.state.invoice_items,update:this.props.update,delete:this.invoiceDelete});return r.a.createElement("div",null,this.state.popUp?a:t)}}]),a}(n.Component),Ia=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={invoices:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return be.a.fire({icon:"error",title:"cannot go any further"}),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getInvoiceData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInvoiceData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zt(JSON.stringify(t)).then((function(e){if(e.status){for(a in e.invoices)e.invoices[a].invoiced_on_str=e.invoices[a].invoiced_on.split("T")[0],e.invoices[a].due_on_str=e.invoices[a].due_on.split("T")[0];n.setState({invoices:e.invoices,loaded:!0})}else be.a.fire(e.error)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushNewId",value:function(e){this.props.history.push("/invoices/"+e)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(Sa,{pushNewId:this.pushNewId,data:this.state.invoices,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Invoices"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/invoices/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Invoice"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),Pa=Object(f.b)((function(e){return{user:e.user}}))(Ia),Da=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Item Name",prop:"item_name"},{id:2,name:"Quantity",prop:"quantity"},{id:8,name:"Price",prop:"price"},{id:3,name:"Sold From",prop:"sold_from_name"},{id:4,name:"Tax Total",prop:"tax_total"},,{id:5,name:"Disount Amount",prop:"discount_amount"},{id:6,name:"Sub Total",prop:"sub_total"},{id:7,name:"Total",prop:"total"}],n.discount_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"discount_type"},{id:5,name:"Remove",prop:"removeButton"}],n.tax_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"tax_type"},{id:5,name:"Remove",prop:"removeButton"}],n.add_discount_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"discount_type"}],n.add_tax_columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Rate",prop:"rate"},{id:3,name:"Code",prop:"code"},{id:4,name:"Type",prop:"tax_type"}],n.state={tax_start:0,tax_end:5,discount_start:0,discount_end:5,tax_loaded:!1,discount_loaded:!1,discount_page:[],tax_page:[],discount_selection:[],tax_selection:[],place_selection:[],stock_selection:[],sold_from_selection:[],popUp:!1,new:!1,current:0,status:[],customer_selection:[{id:0,name:"None"}],item_selection:[{id:0,name:"None"}],update:{invoice:{customer_name:"",invoiced_on:new Date,due_on:new Date},invoice_items:[[{id:"Fake Key",discount:[],applied_discount:[],tax:[],applied_tax:[]}]]}},n.update_table=n.update_table.bind(Object(d.a)(n)),n.stateman=n.stateman.bind(Object(d.a)(n)),n.refreshTable=n.refreshTable.bind(Object(d.a)(n)),n.getItemData=n.getItemData.bind(Object(d.a)(n)),n.selectItem=n.selectItem.bind(Object(d.a)(n)),n.searchItem=n.searchItem.bind(Object(d.a)(n)),n.addInvoiceItem=n.addInvoiceItem.bind(Object(d.a)(n)),n.invoiceHandler=n.invoiceHandler.bind(Object(d.a)(n)),n.dueOnHandler=n.dueOnHandler.bind(Object(d.a)(n)),n.getCustomerData=n.getCustomerData.bind(Object(d.a)(n)),n.converter=n.converter.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n.searchCustomer=n.searchCustomer.bind(Object(d.a)(n)),n.selectCustomer=n.selectCustomer.bind(Object(d.a)(n)),n.onChange=n.onChange.bind(Object(d.a)(n)),n.updateInvoice=n.updateInvoice.bind(Object(d.a)(n)),n.onChangePI=n.onChangePI.bind(Object(d.a)(n)),n.postInvoiceItem=n.postInvoiceItem.bind(Object(d.a)(n)),n.deleteInvoiceItem=n.deleteInvoiceItem.bind(Object(d.a)(n)),n.onChangePlace=n.onChangePlace.bind(Object(d.a)(n)),n.removeEntry=n.removeEntry.bind(Object(d.a)(n)),n.addEntryDiscount=n.addEntryDiscount.bind(Object(d.a)(n)),n.addEntryTax=n.addEntryTax.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"removeEntry",value:function(e,t){var a,n;t?((a=this.state.update.invoice_items[this.state.current].applied_discount).pop(t),(n=this.state.update.invoice_items[this.state.current].discount).pop(a.id),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},t,{applied_discount:a,discount:n}))})}))):((a=this.state.update.invoice_items[this.state.current].applied_tax).pop(t),(n=this.state.update.invoice_items[this.state.current].taxes).pop(a.id),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},t,{applied_tax:a,taxes:n}))})})))}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get"},e.next=3,ra(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{status:e.data})):be.a.fire(e.error)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(JSON.stringify(t)).then((function(e){e.status?a.setState({customer_selection:e.customers}):be.a.fire(e.error)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectCustomer",value:function(e,t){console.log(e,t),this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{customer:e,customer_name:t})})})}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},Object(N.a)({},e.target.name,e.target.value))})})}},{key:"converter",value:function(e){return new Date(Date.parse(e))}},{key:"popUp",value:function(e){var t;for(t in this.state.update.invoice_items)if(this.state.update.invoice_items[t].id===e){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{current:t,popUp:!0}));break}var a={action:"get",filter:"item",item_id:this.state.update.invoice_items[t].item};this.getPlacesData(a)}},{key:"getPlacesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(JSON.stringify(t)).then((function(e){if(e.status){a.setState({sold_from_selection:e.placements});var t,n,r=[];for(t in e.placements)n={id:e.placements[t].placed_on,str_placed_on:e.placements[t].str_placed_on},r[e.placements[t].placed_on]=n;r=r.filter((function(e){return null!=e})),a.setState({place_selection:r}),a.update_stock(e)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_stock",value:function(e){var t;console.log("data",e),this.state.update.invoice_items[this.state.current].sold_from?t=this.state.update.invoice_items[this.state.current].sold_from:(t=e.placements[0].placed_on,console.log("default",t));var a,n=[];for(a in e.placements)if(console.log(t,"  ",e.placements[a].placed_on),parseInt(t)===parseInt(e.placements[a].placed_on)){var r=e.placements[a].purchase_item_details.purchase_price+"/-  "+e.placements[a].purchase_item_details.quantity+" "+e.placements[a].purchase_item_details.vendor;n.push({id:e.placements[a].purchase_item,str:r}),console.log(n)}this.setState(Object(U.a)(Object(U.a)({},this.state),{},{stock_selection:n}))}},{key:"onChangePlace",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},Object(N.a)({},t.target.name,t.target.value))))})});case 2:for(n in a=[],this.state.update.invoice_items[this.state.current].sold_from?r=this.state.update.invoice_items[this.state.current].sold_from:(r=this.state.sold_from[0].placed_on,console.log("default",r)),this.state.sold_from_selection)parseInt(r)===parseInt(this.state.sold_from_selection[n].placed_on)&&(i=this.state.sold_from_selection[n].purchase_item_details.purchase_price+"/-  "+this.state.sold_from_selection[n].purchase_item_details.quantity+" "+this.state.sold_from_selection[n].purchase_item_details.vendor,a.push({id:this.state.sold_from_selection[n].purchase_item,str:i}));this.setState(Object(U.a)(Object(U.a)({},this.state),{},{stock_selection:a}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchCustomer",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getCustomerData(t)}}},{key:"invoiceHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{invoiced_on:e})})})}},{key:"dueOnHandler",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice:Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{due_on:e})})})}},{key:"updateInvoice",value:function(){var e=Object(U.a)(Object(U.a)({},this.state.update.invoice),{},{action:"add",status:""});console.log(e),ta(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Invoice Details Has Been Updated."),window.location.pathname="/invoices"):be.a.fire(e.error)}))}},{key:"onChangePI",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},Object(N.a)({},e.target.name,e.target.value))))})})}},{key:"postInvoiceItem",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a)return(e=Object(U.a)({action:"add",invoice:this.state.update.invoice.id},this.state.update.invoice_items[this.state.current])).applied_tax=[],e.applied_discount=[],void sa(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Invoice Item Has Been Added."),t.refreshTable()):be.a.fire(e.error)}));(e=Object(U.a)({action:"edit",invoice:this.state.update.invoice.id,invoice_item_id:this.state.update.invoice_items[this.state.current].id},this.state.update.invoice_items[this.state.current])).applied_tax=[],e.applied_discount=[],oa(JSON.stringify(e)).then((function(e){e.status?(be.a.fire("Invoice Item Details Has Been Updated."),t.refreshTable()):be.a.fire(e.error)}))}},{key:"deleteInvoiceItem",value:function(){var e=this,t={invoice_items_id:[this.state.update.invoice_items[this.state.current].id]};ca(JSON.stringify(t)).then((function(t){t.status?(be.a.fire("Invoice Item Has Beed Deleted."),e.refreshTable()):be.a.fire(t.error)}))}},{key:"addInvoiceItem",value:function(){var e,t=0,a=[];for(e in this.state.update.invoice_items)e.id&&"Fake Key"!==e.id&&(t+=1,a.push(e));this.setState({current:t,new:!0,popUp:!0,update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:[].concat(a,[{item_name:"None",discount_type:"percentage",status:"incomplete",applied_tax:[],applied_discount:[],purchase_item:"",discount:[],taxes:[]}])})})}},{key:"searchItem",value:function(e){if(e.target.value.length>2){var t={action:"get",start:0,end:10,filter:"name",name:e.target.value};this.getItemData(t)}}},{key:"getItemData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(JSON.stringify(t)).then((function(e){e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_selection:e.items})):be.a.fire(e.error)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectItem",value:function(e,t){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{item_name:t,item:e})))})});var a={action:"get",filter:"item",item_id:e};this.getPlacesData(a)}},{key:"refreshTable",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.update.invoice.id,a=[],n={action:"get",invoice_id:t},e.next=5,aa(JSON.stringify(n)).then((function(e){e.status?a=e.invoice_items:be.a.fire(e.error)}));case 5:return 0===a.length&&(a=[{id:"Fake Key",item_name:""}]),e.next=8,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1,update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:a})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stateman",value:function(){console.log(this.state)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t<0?-1:1,!a){e.next=18;break}if(0!==t){e.next=7;break}return e.next=5,this.setState({discoount_loaded:!1,discount_start:0,discount_end:10,discount_page:1});case 5:e.next=14;break;case 7:if(!(this.state.discount_start+t>-1)){e.next=12;break}return e.next=10,this.setState({discount_loaded:!1,discount_start:this.state.discount_start+t,discount_end:this.state.discount_end+t,discount_page:this.state.discount_page+n});case 10:e.next=14;break;case 12:return be.a.fire("Cannot move futher from here."),e.abrupt("return");case 14:r={action:"get",filter:"none",start:this.state.discount_start,end:this.state.discount_end},this.getDiscountsData(r),e.next=32;break;case 18:if(0!==t){e.next=23;break}return e.next=21,this.setState({tax_loaded:!1,tax_start:0,tax_end:10,tax_page:1});case 21:e.next=30;break;case 23:if(!(this.state.tax_start+t>-1)){e.next=28;break}return e.next=26,this.setState({tax_loaded:!1,tax_start:this.state.tax_start+t,tax_end:this.state.tax_end+t,tax_page:this.state.tax_page+n});case 26:e.next=30;break;case 28:return be.a.fire("Cannot move futher from here."),e.abrupt("return");case 30:r={action:"get",filter:"none",start:this.state.tax_start,end:this.state.tax_end},this.getTaxesData(r);case 32:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getDiscountsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(JSON.stringify(t)).then((function(e){e.status?a.setState({discount_selection:e.discounts,discount_loaded:!0}):be.a.fire(e.error)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaxesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(JSON.stringify(t)).then((function(e){e.status&&a.setState({tax_selection:e.taxes,tax_loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addEntryDiscount",value:function(e){var t;for(t in this.state.discount_selection)if(this.state.discount_selection[t].id===e){var a=this.state.update.invoice_items[this.state.current].applied_discount,n=this.state.discount_selection[t];a.push(n);var r=this.state.update.invoice_items[this.state.current].discount;r.push(e),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{discount:r,applied_discount:a})))})}))}}},{key:"addEntryTax",value:function(e){var t;for(t in this.state.tax_selection)if(this.state.tax_selection[t].id===e){var a=this.state.update.invoice_items[this.state.current].applied_tax,n=this.state.tax_selection[t];a.push(n);var r=this.state.update.invoice_items[this.state.current].taxes;r.push(e),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},{invoice_items:Object(U.a)(Object(U.a)({},this.state.update.invoice_items),{},Object(N.a)({},this.state.current,Object(U.a)(Object(U.a)({},this.state.update.invoice_items[this.state.current]),{},{tax:r,applied_tax:a})))})}))}}},{key:"render",value:function(){var e=this,t=this.state.item_selection,a=r.a.createElement(yt.a,{trigger:r.a.createElement("button",null,"Select Item"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Item Name",id:"item_search_box",name:"item_serach_box",onChange:this.searchItem}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"item_dropdown"},t.map((function(t){return r.a.createElement("a",{key:t.id,onClick:function(){e.selectItem(t.id,t.name)}},t.name," ",t.sales_price)}))))),n=this.state.place_selection,i=r.a.createElement("select",{name:"sold_from",id:"sold_from",onChange:this.onChangePlace,value:this.state.update.invoice_items[this.state.current].sold_from},r.a.createElement("option",{key:"Fake Key",value:"Fake Value"},"Select Place"),n.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.str_placed_on)}))),c=this.state.stock_selection,s=this.state.update.invoice_items[this.state.current].purchase_item?this.state.update.invoice_items[this.state.current].purchase_item:"",o=r.a.createElement("select",{name:"purchase_item",id:"purchase_item",onChange:this.onChangePI,value:s},r.a.createElement("option",{key:"Fake Key",value:"Fake Value"},"Select Stock"),c.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.str)}))),l=r.a.createElement("div",null,r.a.createElement("h3",null," Click To Apply New Discount"),r.a.createElement(Je,{data:this.state.discount_selection,header:this.add_discount_columns,page:!1,popUp:this.addEntryDiscount}),r.a.createElement("button",{onClick:function(){e.update_table(-5,!0)}},"Previous"),r.a.createElement("span",null,"      ",this.state.discount_page,"       "),r.a.createElement("button",{onClick:function(){e.update_table(5,!0)}},"Next")),u=r.a.createElement("div",null,r.a.createElement("h3",null,"Click To Apply New Tax "),r.a.createElement(Je,{data:this.state.tax_selection,header:this.add_tax_columns,page:!1,popUp:this.addEntryTax}),r.a.createElement("button",{onClick:function(){e.update_table(-5,!1)}},"Previous"),r.a.createElement("span",null,"      ",this.state.tax_page,"       "),r.a.createElement("button",{onClick:function(){e.update_table(5,!1)}},"Next")),p=this.state.update.invoice_items[this.state.current].applied_discount;for(var d in p)p[d]=Object(U.a)(Object(U.a)({},p[d]),{},{removeButton:r.a.createElement("button",{onClick:function(){e.removeEntry(d,!0)}}," Remove ")});var m=this.state.update.invoice_items[this.state.current].applied_tax;for(var d in m)m[d]=Object(U.a)(Object(U.a)({},m[d]),{},{removeButton:r.a.createElement("button",{onClick:function(){e.removeEntry(d,!1)}}," Remove ")});this.state.update.invoice_items[this.state.current].item_name,this.state.update.invoice_items[this.state.current].item,this.state.update.invoice_items[this.state.current].item,this.state.update.invoice_items[this.state.current].quantity,this.onChangePI,this.state.update.invoice_items[this.state.current].price,this.onChangePI,this.state.update.invoice_items[this.state.current].tax_total,this.state.update.invoice_items[this.state.current].sub_total,this.state.update.invoice_items[this.state.current].discount_amount,this.state.update.invoice_items[this.state.current].total_without_discount,this.state.update.invoice_items[this.state.current].total,this.discount_columns,this.popUp,this.removeEntry,this.state.discount_loaded,this.tax_columns,this.popUp,this.removeEntry,this.state.tax_loaded,this.state.new;var h=this.state.customer_selection,f=r.a.createElement(yt.a,{trigger:r.a.createElement(X.a,{variant:"contained",color:"secondary"},"Select Customer"),closeOnDocumentClick:!0},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Customer's first name",id:"customer_serach_box",name:"customer_serach_box",onChange:this.searchCustomer}),r.a.createElement("div",{className:_t.a.dropdown_content,id:"customer_dropdown"},h.map((function(t){return r.a.createElement("a",{href:"#",key:t.id,onClick:function(){e.selectCustomer(t.id,t.name)}},t.name)})))));this.state.status;return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:8},r.a.createElement("table",{cellPadding:"10",cellSpacing:"10"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:3},r.a.createElement("h1",null,"New Invoice Order"),r.a.createElement("h4",null,"Select customer and Date only"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null)," ",r.a.createElement($.a,{value:this.state.update.invoice.customer_name,label:"Customer",variant:"outlined"})),r.a.createElement("td",null,f)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Invoiced On : "),r.a.createElement("br",null),r.a.createElement(Et.a,{name:"invoiced_on",selected:this.state.update.invoice.invoiced_on,onChange:this.invoiceHandler})),r.a.createElement("td",null,r.a.createElement("b",null,"Due On : ")," ",r.a.createElement("br",null),r.a.createElement(Et.a,{name:"completed_on",selected:this.state.update.invoice.due_on,onChange:this.dueOnHandler}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){e.updateInvoice()}},"Create Invoice"))))))))}}]),a}(n.Component),Na=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Code",prop:"code"},{id:3,name:"Discount Type",prop:"discount_type"},{id:4,name:"Rate",prop:"rate"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,discount:{},update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.discountDelete=n.discountDelete.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/discounts")}},{key:"complete",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!1}))}},{key:"loading",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!0}))}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit",discount_id:t.id}),console.log(t),Nt(JSON.stringify(t)).then((function(e){try{e.status?(be.a.fire("Updated!","Discounts details has been updated.","success"),a.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"discountDelete",value:function(e){var t=this,a={discounts_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&It(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Discount entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2&&void 0!==r[2]&&r[2]){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return a={action:"get",discount_id:t},e.next=9,Dt(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,discount:n.discounts[0],update:n.discounts[0]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,this.state.discount.name)),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.discount.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.discount.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Discount Type :",r.a.createElement(de.a,null,r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.discount_type,name:"discount_type",id:"discount_type"},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{required:!0,id:"rate",name:"rate",label:"rate",defaultValue:this.state.discount.rate,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.discountDelete(t.state.discount.id)}},"Delete Discount"))))),r.a.createElement("br",null));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),Ua=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={taxes:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getDiscountsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDiscountsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(JSON.stringify(t)).then((function(e){e.status&&a.setState({discounts:e.discounts,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushNewId",value:function(e){this.props.history.push("/discounts/"+e)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(Na,{pushNewId:this.pushNewId,data:this.state.discounts,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Discounts"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/discounts/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Discount"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component),Ta=Object(f.b)((function(e){return{user:e.user}}))(Ua),Fa=Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),Ja=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={update:{name:"",code:"",discount_type:"percent",rate:""}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=Object(U.a)({},this.state.update),this.state.update)a[n]=this.state.update[n];a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),console.log(a),Pt(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("Updated!","Discounts details has been added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.props.classes;return r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,"Add New Discounts")),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.update.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.update.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Discount Type :",r.a.createElement(de.a,{className:a.formControl},r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.discount_type,name:"discount_type",id:"discount_type"},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,(e={required:!0,id:"rate",name:"rate",onChange:this.onChange,label:"rate"},Object(N.a)(e,"name","rate"),Object(N.a)(e,"defaultValue",this.state.update.rate),Object(N.a)(e,"onChange",this.onChange),e)))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Add")),r.a.createElement(z.a,{item:!0,xm:3,md:6})))),r.a.createElement("br",null))}}]),a}(n.Component),Aa=Object(Me.a)(Fa)(Object(f.b)((function(e){return{user:e.user}}))(Ja)),Va=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Code",prop:"code"},{id:3,name:"Tax Type",prop:"tax_type"},{id:4,name:"Rate",prop:"rate"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,tax:{},update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.taxDelete=n.taxDelete.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/taxes")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state.update,a=Object(U.a)(Object(U.a)({},a),{},{action:"edit",tax_id:a.id}),At(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Updated!","Tax details has been updated.","success"),n.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"taxDelete",value:function(e){var t=this,a={taxes_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){Tt(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Tax entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2?r[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return a={action:"get",tax_id:t},e.next=9,Jt(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,tax:n.taxes[0],update:n.taxes[0]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;this.props.classes;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,this.state.tax.name)),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.tax.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.tax.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Tax Type :",r.a.createElement(de.a,null,r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.tax_type,name:"tax_type",id:"tax_type"},r.a.createElement(ct.a,{value:"normal"},"Normal (Percentage)"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{required:!0,id:"rate",name:"rate",label:"rate",defaultValue:this.state.tax.rate,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.taxDelete(t.state.tax.id)}},"Delete Tax"))))));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component)),Ba=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={taxes:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/taxes/"+e)}},{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getTaxesData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTaxesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut(JSON.stringify(t)).then((function(e){console.log(e),e.status&&a.setState({taxes:e.taxes,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(Va,{data:this.state.taxes,update:this.update_table,page:this.state.page,pushNewId:this.pushNewId}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Taxes"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/taxes/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Tax"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),qa=Object(f.b)((function(e){return{user:e.user}}))(Ba),Ra=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={update:{name:"",code:"",tax_type:"normal",rate:""}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=Object(U.a)({},this.state.update),this.state.update)a[n]=this.state.update[n];a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),console.log(a),Ft(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("Updated!","Tax details has been added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,"Add New Tax")),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.update.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.update.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Tax Type :",r.a.createElement(de.a,null,r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.discount_type,name:"discount_type",id:"discount_type"},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,(e={required:!0,id:"rate",name:"rate",onChange:this.onChange,label:"rate"},Object(N.a)(e,"name","rate"),Object(N.a)(e,"defaultValue",this.state.update.rate),Object(N.a)(e,"onChange",this.onChange),e)))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Add")),r.a.createElement(z.a,{item:!0,xm:3,md:6})))),r.a.createElement("br",null))}}]),a}(n.Component)),Wa=Object(f.b)((function(e){return{user:e.user}}))(Ra),Ma=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/catagories","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/catagories/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),za=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/catagories","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),La=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/catagory","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ga=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/inventory/items/catagory","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Ya=a(139),Qa=a.n(Ya),Ka=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Catagory",prop:"catagory_str"},{id:3,name:"Price",prop:"sales_price"},,{id:4,name:"Stock",prop:"stock"},{id:5,name:"Sold",prop:"sold"}],n.placementColumns=[{id:1,name:"Item",prop:"item_name"},{id:2,name:"Place On",prop:"placed_on_str"},{id:3,name:"Stock",prop:"stock"},{id:4,name:"Purchase Order ID",prop:"purchase_order_uuid"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={catagories:[],popUp:!1,item:{catagory:""},update:{},placements:[],thumbnail_image:!1,product_image:!1},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.itemDelete=n.itemDelete.bind(Object(d.a)(n)),n.getPlacementsData=n.getPlacementsData.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.dummy=n.dummy.bind(Object(d.a)(n)),n.onFileChange=n.onFileChange.bind(Object(d.a)(n)),n.handleQR=n.handleQR.bind(Object(d.a)(n)),n.getDataFromQR=n.getDataFromQR.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"handleQR",value:function(e){return this.getDataFromQR(e),!0}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/items")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onFileChange",value:function(e){var t,a=this;(t=e.target.files[0],fetch(t).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,a){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.onerror=a,n.readAsDataURL(e)}))}))).then((function(e){console.log("RESULT:",e),a.setState(Object(U.a)(Object(U.a)({},a.state),{},{product_image:e}))}))}},{key:"getFiles",value:function(e){this.setState({product_image:e})}},{key:"getThumbnail",value:function(e){this.setState({thumbnail_image:e})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(this.state),a=this.state.update,(a=Object(U.a)(Object(U.a)({},a),{},{action:"edit",item_id:a.id})).new_product_image=this.state.product_image,a.new_thumbnail_image=this.state.thumbnail_image,Gt(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Updated!","ItemData updated.","success"),n.props.update(0)):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"itemDelete",value:function(e){var t=this,a={items_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&Ht(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Item entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.props.update(0)):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"getDataFromQR",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={action:"get",filter:"purchase_item",uuid:t},e.next=3,Lt(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 3:return e.next=5,this.setState({popUp:!0,update:n.items[0]});case 5:return a={action:"get",start:0,end:50},e.next=8,Ma(JSON.stringify(a)).then((function(e){try{e.status?r.setState(Object(U.a)(Object(U.a)({},r.state),{},{catagories:e.item_catagories})):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 8:a={action:"get",start:0,end:10,filter:"item",item:n.items[0].id},this.getPlacementsData(a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>1&&void 0!==i[1]?i[1]:0,i.length>2?i[2]:void 0){e.next=7;break}this.props.pushNewId(t),console.log("popup ",t),e.next=17;break;case 7:return a={action:"get",item_id:t},e.next=10,Lt(JSON.stringify(a)).then((function(e){console.log(e),e.status?n=e:be.a.fire(e.error)}));case 10:return e.next=12,this.setState({popUp:!0,update:n.items[0]});case 12:return a={action:"get",start:0,end:50},e.next=15,Ma(JSON.stringify(a)).then((function(e){try{e.status?r.setState(Object(U.a)(Object(U.a)({},r.state),{},{catagories:e.item_catagories})):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 15:a={action:"get",start:0,end:10,filter:"item",item:t},this.getPlacementsData(a);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlacementsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(JSON.stringify(t)).then((function(e){try{if(e.status){for(var t in e.placements)e.placements[t].qr_code_image=b.slice(0,-1)+e.placements[t].qr_code_image;console.log(e),a.setState(Object(U.a)(Object(U.a)({},a.state),{},{placements:e.placements}))}else be.a.fire({icon:"error",title:e.error})}catch(n){console.log(n)}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update_placement_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,placementStart:0,placementEnd:10,placementPage:1});case 4:e.next=13;break;case 6:if(!(this.state.placementStart+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,placementStart:this.state.placementStart+t,placementEnd:this.state.placementEnd+t,placementPage:this.state.placementPage+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"item",item:this.state.update.id,start:this.state.placementStart,end:this.state.placementEnd},this.getPlacementsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dummy",value:function(e){for(var t in this.state.placements)parseInt(this.state.placements[t].id)===parseInt(e)&&(window.location.href="/purchaseorders/"+this.state.placements[t].purchase_order_id)}},{key:"render",value:function(){var e,t=this,a=b.slice(0,-1)+this.state.update.product_image,n=b.slice(0,-1)+this.state.update.thumbnail_image;e=this.props.data?this.props.data:[];var i=this.state.catagories,c=r.a.createElement("div",null,r.a.createElement(ja,{onFind:this.handleQR}),r.a.createElement("br",null),r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page})),s=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,xm:3},r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back")),r.a.createElement(z.a,{item:!0,xm:8},"  ",r.a.createElement("h1",null,this.state.update.name)),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,md:6},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"name",name:"name",type:"text",label:"Item's Name",onChange:this.onChange,defaultValue:this.state.update.name})),r.a.createElement("td",null,r.a.createElement($.a,{type:"number",label:"Sales Price",defaultValue:this.state.update.sales_price,onChange:this.onChange}),r.a.createElement("br",null))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Item Catagory :",r.a.createElement(st.a,{fullWidth:!0,lable:"Item Catagory",name:"catagory",id:"catagory",onChange:this.onChange,value:this.state.update.catagory,required:!0},i.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"outlined-read-only-input",label:"Current Stock",defaultValue:this.state.update.stock,InputProps:{readOnly:!0},variant:"outlined"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"outlined-read-only-input",label:"Number Of Sold Items",defaultValue:this.state.update.sold,InputProps:{readOnly:!0},variant:"outlined"}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"weight",name:"weight",type:"number",label:"Item's Weight (in kg)",onChange:this.onChange,defaultValue:this.state.update.weight})),r.a.createElement("td",null,r.a.createElement($.a,{id:"average_cost_price",name:"average_cost_price",type:"number",label:"Item's Cost Price",onChange:this.onChange,defaultValue:this.state.update.average_cost_price}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement($.a,{fullWidth:!0,id:"description",name:"description",type:"text",label:"Description",onChange:this.onChange,defaultValue:this.state.update.description}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h3",null,"Product Image"),r.a.createElement("img",{width:"100%",src:a,alt:"Product Image"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Upload Product Image : ",r.a.createElement(Qa.a,{multiple:!0,onDone:this.getFiles.bind(this)}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h3",null,"Thumbnail Image"),r.a.createElement("img",{width:"100%",src:n,alt:"Thumbnail Image"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Upload Thumbnail : ",r.a.createElement(Qa.a,{multiple:!0,onDone:this.getThumbnail.bind(this)}))),r.a.createElement("tr",null,r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Update")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.itemDelete(t.state.update.id)}},"Delete Item")))))),r.a.createElement("br",null)))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("u",null,r.a.createElement("h3",null,"Placement Of Current Item")),r.a.createElement(Je,{data:this.state.placements,header:this.placementColumns,popUp:this.dummy,update:this.update_placement_table,page:this.state.placementPage}),r.a.createElement("hr",null),r.a.createElement(z.a,{item:!0,xm:4},this.state.placements.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("h4",null," ",e.uuid," "),r.a.createElement("img",{src:e.qr_code_image}))}))))));return r.a.createElement("div",null,this.state.popUp?s:c)}}]),a}(n.Component),Xa=a(350),$a=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleScan=function(e){e&&n.setState(Object(U.a)(Object(U.a)({},n.state),{},{result:e}))},n.handleError=function(e){console.error(e)},n.state={item_catagories:[],items:[],loaded:!1,start:0,end:10,page:1,result:"No result",dialog_open:!1,filters:{exact_name:!0,is_applied_name:!1,is_applied_weight_from:!1,is_applied_weight_upto:!1,is_applied_average_cost_price_from:!1,is_applied_average_cost_price_upto:!1,is_applied_catagory:!1,is_applied_stock_from:!1,is_applied_stock_upto:!1,is_applied_sales_price_from:!1,is_applied_sales_price_upto:!1,is_applied_sold_from:!1,is_applied_sold_upto:!1}},n.update_table=n.update_table.bind(Object(d.a)(n)),n.handleFilterChange=n.handleFilterChange.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/items/"+e)}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.props.user.isLoggedIn),!1===this.props.user.isLoggedIn&&this.props.history.push("/"),t={action:"get",start:0,end:50},e.next=5,Ma(JSON.stringify(t)).then((function(e){try{e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_catagories:e.item_catagories})):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:this.update_table(0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFilterChange",value:function(e){var t,a="is_applied_"+e.target.name;"exact_name"===e.target.name?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{filters:Object(U.a)(Object(U.a)({},this.state.filters),{},{exact_name:!this.state.filters.exact_name})})):this.setState(Object(U.a)(Object(U.a)({},this.state),{},{filters:Object(U.a)(Object(U.a)({},this.state.filters),{},(t={},Object(N.a)(t,a,!0),Object(N.a)(t,e.target.name,e.target.value),t))}))}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loaded:!1,start:0,end:10,page:1}));case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a}));case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"multiple",start:this.state.start,end:this.state.end,filters:this.state.filters},this.getItemsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getItemsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt(JSON.stringify(t)).then((function(e){e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{items:e.items,loaded:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this,a=this.state.item_catagories,n=r.a.createElement("div",null,r.a.createElement(Ka,{pushNewId:this.pushNewId,data:this.state.items,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Items"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){t.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/items/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Item"))),r.a.createElement(z.a,{item:!0,md:10},r.a.createElement("table",{cellSpacing:5,cellPadding:5},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},"Name"),r.a.createElement("th",{colSpan:2},"Weight")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"name",size:"small",variant:"outlined",name:"name",defaultValue:this.state.filters.name,onChange:this.handleFilterChange,label:"Name"})),r.a.createElement("td",null,r.a.createElement(Z.a,{control:r.a.createElement(Xa.a,{checked:this.state.filters.exact_name,onChange:this.handleFilterChange,name:"exact_name"}),label:this.state.filters.exact_name?"Match Exactly":"Partial Match"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"weight_from",size:"small",variant:"outlined",defaultValue:this.state.filters.weight_from,name:"weight_from",type:"number",onChange:this.handleFilterChange,label:"Start Weight"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"weight_upto",size:"small",variant:"outlined",name:"weight_upto",type:"number",defaultValue:this.state.filters.weight_upto,onChange:this.handleFilterChange,label:"Start Upto"}))),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},"Average Cost Price"),r.a.createElement("th",{colSpan:2},"Catagory")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"average_cost_price_from",size:"small",variant:"outlined",name:"average_cost_price_from",defaultValue:this.state.filters.average_cost_price_from,type:"number",onChange:this.handleFilterChange,label:"ACP From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"average_cost_price_upto",size:"small",variant:"outlined",name:"average_cost_price_upto",type:"number",defaultValue:this.state.filters.average_cost_price_upto,onChange:this.handleFilterChange,label:"ACP Upto"})),r.a.createElement("td",{colSpan:2},r.a.createElement(st.a,{fullWidth:!0,name:"catagory",id:"catagory",defaultValue:this.state.filters.catagory,onChange:this.handleFilterChange,required:!0},a.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},"Stock"),r.a.createElement("th",{colSpan:2},"Sales Price")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"stock_from",variant:"outlined",size:"small",name:"stock_from",type:"number",defaultValue:this.state.filters.stock_from,onChange:this.handleFilterChange,label:"Stock From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"stock_upto",variant:"outlined",size:"small",name:"stock_upto",type:"number",defaultValue:this.state.filters.stock_upto,onChange:this.handleFilterChange,label:"Stock Upto"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"sales_price_from",variant:"outlined",size:"small",name:"sales_price_from",type:"number",defaultValue:this.state.filters.sales_price_from,onChange:this.handleFilterChange,label:"Sales Price From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"sales_price_upto",variant:"outlined",size:"small",name:"sales_price_upto",type:"number",onChange:this.handleFilterChange,defaultValue:this.state.filters.sales_price_upto,label:"Sales Price Upto"}))),r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},"Sold")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,(e={id:"sold_from",size:"small",variant:"outlined"},Object(N.a)(e,"size","small"),Object(N.a)(e,"name","sold_from"),Object(N.a)(e,"type","number"),Object(N.a)(e,"defaultValue",this.state.filters.sold_from),Object(N.a)(e,"onChange",this.handleFilterChange),Object(N.a)(e,"label","Sold From"),e))),r.a.createElement("td",null,r.a.createElement($.a,{id:"sold_upto",variant:"outlined",name:"sold_upto",size:"small",type:"number",onChange:this.handleFilterChange,defaultValue:this.state.filters.sold_upto,label:"Sold Upto"})),r.a.createElement("td",{colSpan:2},r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){return t.update_table(0)}},"Show Filtered Data"))))),r.a.createElement(Se.a,null,this.state.loaded?n:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),Za=Object(f.b)((function(e){return{user:e.user}}))($a),en=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={catagories:[],update:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1===this.props.user.isLoggedIn&&this.props.history.push("/"),t={action:"get",start:0,end:50},e.next=4,Ma(JSON.stringify(t)).then((function(e){try{e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{catagories:e.item_catagories})):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t.preventDefault(),a=Object(U.a)({},this.state.update),this.state.update)a[n]=this.state.update[n];a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),console.log(a),zt(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("Updated!","Item has been added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.catagories;return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("form",{onSubmit:this.onSubmit},"Name: ",r.a.createElement($.a,{id:"name",name:"name",type:"text",onChange:this.onChange}),"Catagory : ",r.a.createElement("select",{name:"catagory",id:"catagory",onChange:this.onChange,required:!0},e.map((function(e){return r.a.createElement("option",{key:e.id,value:parseInt(e.id)},e.name)})))," ",r.a.createElement("br",null),r.a.createElement("br",null),"Sales Price : ",r.a.createElement("input",{name:"sales_price",type:"float",onChange:this.onChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Create")),r.a.createElement("br",null))))}}]),a}(n.Component),tn=Object(f.b)((function(e){return{user:e.user}}))(en),an=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Items Under This Catagory",prop:"count"}],n.items_c=[{id:1,name:"Item's Name",prop:"name"},{id:2,name:"Price",prop:"sales_price"},{id:3,name:"Sales Price",prop:"sales_price"},{id:4,name:"Stock",prop:"stock"},{id:5,name:"Sold",prop:"sold"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,itemCatagory:{},update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.itemCatDelete=n.itemCatDelete.bind(Object(d.a)(n)),n.popUptemp=n.popUptemp.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.updatetemp=n.updatetemp.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"popUptemp",value:function(e,t){}},{key:"updatetemp",value:function(){}},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/itemcatagories")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({itemCatagory:Object(U.a)(Object(U.a)({},this.state.itemCatagory),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=this.state.itemCatagory,a=Object(U.a)(Object(U.a)({},a),{},{action:"edit",item_catagory_id:a.id}),console.log(a),Ga(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire("Updated!","ItemCatagory Data updated.","success"),n.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"itemCatDelete",value:function(e){var t=this,a={item_catagories_id:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&Ha(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Item Catagory entry has been deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2?r[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return a={action:"get",item_catagory_id:t},e.next=9,La(JSON.stringify(a)).then((function(e){console.log(e),e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,itemCatagory:n.item_catagories[0]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement("h1",null,this.state.update.name),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement($.a,{id:"name",name:"name",type:"text",onChange:this.onChange,defaultValue:this.state.itemCatagory.name}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Update")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.itemCatDelete(t.state.itemCatagory.id)}},"Delete Discount"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},r.a.createElement("h1",null," Related Items"),r.a.createElement(Je,{data:this.state.itemCatagory.items,header:this.items_c,popUp:this.popUptemp,update:this.updatetemp,page:!1})))))))));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),nn=(Object(F.a)((function(e){return{root:{flexGrow:12},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}})),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={items:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"pushNewId",value:function(e){this.props.history.push("/itemcatagories/"+e)}},{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getItemCatagoriesData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getItemCatagoriesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ma(JSON.stringify(t)).then((function(e){e.status&&(console.log(e),a.setState({item_catagories:e.item_catagories,loaded:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(an,{data:this.state.item_catagories,update:this.update_table,page:this.state.page,pushNewId:this.pushNewId}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Item Categories"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/itemcatagories/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Item Catagories"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component)),rn=Object(f.b)((function(e){return{user:e.user}}))(nn),cn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={itemCatagory:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState({itemCatagory:Object(U.a)(Object(U.a)({},this.state.itemCatagory),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=Object(U.a)({},this.state.itemCatagory),a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),za(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("Updated!","ItemCatagory Data has been added.","success"):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name:"),r.a.createElement("td",null,r.a.createElement($.a,{id:"name",name:"name",type:"text",onChange:this.onChange,defaultValue:this.state.itemCatagory.name}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Add")),r.a.createElement("td",null))))))))}}]),a}(n.Component),sn=Object(f.b)((function(e){return{user:e.user}}))(cn),on=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Number of Items Assigned To The Place (different Purchase orders)",prop:"count_assignment"}],n.placementColumn=[{id:1,name:"Item",prop:"item_name"},{id:2,name:"Purchase Order ID",prop:"purchase_order_uuid"},{id:3,name:"Stock",prop:"stock"}],n.itemsColumn=[{id:1,name:"Item",prop:"name"},{id:2,name:"Defined Sales Price",prop:"sales_price"},{id:3,name:"Stock",prop:"stock"},{id:4,name:"catagory",prop:"catagory_str"}],n.purchaseItemsColumn=[{id:1,name:"Vendor",prop:"vendor"},{id:2,name:"Purchase Order ID",prop:"purchase_order_id"},{id:3,name:"Purchase Price",prop:"price"},{id:4,name:"Total Stock",prop:"stock"},{id:5,name:"Unassigned Stock (On Default Place)",prop:"on_default"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={itemsPage:1,itemsStart:0,itemsEnd:10,newPlacementPopUpSelectItem:!1,purchaseItemSelectPopUp:!1,addPlacementFinal:!1,page:1,start:0,end:10,popUpPlacement:!1,popUp:!1,place:{},update:{name:"",stock:1},placementUpdate:{},placements:[],items:[],purchaseItems:[],selectedPurchaseItem:[]},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.placeDelete=n.placeDelete.bind(Object(d.a)(n)),n.update=n.update.bind(Object(d.a)(n)),n.popUpPlacement=n.popUpPlacement.bind(Object(d.a)(n)),n.deletePlacement=n.deletePlacement.bind(Object(d.a)(n)),n.addNewItem=n.addNewItem.bind(Object(d.a)(n)),n.updateItemsTable=n.updateItemsTable.bind(Object(d.a)(n)),n.selectItem=n.selectItem.bind(Object(d.a)(n)),n.selectPurchaseItem=n.selectPurchaseItem.bind(Object(d.a)(n)),n.assignPlacement=n.assignPlacement.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/places")}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",place:this.state.update.id,filter:"place",start:this.state.start,end:this.state.end},this.getPlacementsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlacementsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bt(JSON.stringify(t)).then((function(e){e.status&&(a=e.placements)}));case 2:return e.next=4,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUpPlacement:!0,placements:a}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePlacement",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a={action:"delete",id:t},be.a.fire({title:"Are you sure?",text:"The remaining stock will be added to the default storage place.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&qt(JSON.stringify(a)).then((function(e){e.status?(be.a.fire("Placement is deleted and the remaining stock is added to the default storing place."),n.popUp(n.state.place.id)):be.a.fire(e.error)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"popUpPlacement",value:function(){}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit",place_id:t.id}),ma(JSON.stringify(t)).then((function(e){try{e.status?(alert("Place Data updated."),a.back()):alert(e.error)}catch(t){console.log(t)}}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"placeDelete",value:function(e){var t=this,a={places_id:[e]};ua(JSON.stringify(a)).then((function(e){try{e.status?(alert("Place data deleted."),t.back()):alert(e.error)}catch(a){console.log(a)}}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>1&&void 0!==i[1]?i[1]:0,i.length>2?i[2]:void 0){e.next=6;break}this.props.pushNewId(t),e.next=13;break;case 6:return a={action:"get",place_id:t},e.next=9,da(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,place:n.places[0],update:n.places[0]});case 11:r={action:"get",place:t,filter:"place",start:0,end:10},this.getPlacementsData(r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addNewItem",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={action:"get",filter:"none",start:0,end:10},e.next=3,Mt(JSON.stringify(a)).then((function(e){e.status?n.setState(Object(U.a)(Object(U.a)({},n.state),{},{newPlacementPopUpSelectItem:!0,items:e.items})):be.a.fire(e.error)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"assignPlacement",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"add",place_id:this.state.place.id,purchase_item:this.state.selectedPurchaseItem.id,stock:this.state.update.stock},e.next=3,ha(JSON.stringify(t)).then((function(e){e.status?(be.a.fire("Selected Items have been assigned to the place."),a.updateItemsTable(0)):be.a.fire(e.error)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateItemsTable",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({itemsStart:0,itemsEnd:10,itemsPage:1});case 4:e.next=8;break;case 6:return e.next=8,this.setState({itemsStart:this.state.itemsStart+t,itemsEnd:this.state.itemsEnd+t,itemsPage:this.state.itemsPage+a});case 8:return n={action:"get",filter:"none",start:this.state.itemsStart,end:this.state.itemsEnd},e.next=11,Mt(JSON.stringify(n)).then((function(e){e.status?r.setState(Object(U.a)(Object(U.a)({},r.state),{},{items:e.items})):be.a.fire(e.error)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectItem",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a={action:"get",filter:"itemForPlace",item_id:t},this.state.items)this.state.items[r].id===t&&(n=this.state.items[r]);return e.next=4,Ct(JSON.stringify(a)).then((function(e){console.log(e),e.status?i.setState(Object(U.a)(Object(U.a)({},i.state),{},{selectedItem:n,purchaseItemSelectPopUp:!0,purchaseItems:e.purchase_items})):be.a.fire(e.error)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"selectPurchaseItem",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in this.state.purchaseItems)this.state.purchaseItems[n].id===t&&(a=this.state.purchaseItems[n]);return e.next=3,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{addPlacementFinal:!0,placementUpdate:Object(U.a)(Object(U.a)({},this.state.placementUpdate),{},{placementUpdate:{purchase_item_id:t,placed_on:this.state.place.id}}),selectedPurchaseItem:a}));case 3:console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h2",null,r.a.createElement("u",null,"Selected Item")),r.a.createElement(Je,{data:[this.state.selectedItem],header:this.itemsColumn}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h2",null,r.a.createElement("u",null,"Selected Stock (Purchase Order)")),r.a.createElement(Je,{data:[this.state.selectedPurchaseItem],header:this.purchaseItemsColumn}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{required:!0,id:"stock",name:"stock",onChange:this.onChange,label:"Number of Items To Assign",fullWidth:!0,defaultValue:this.state.update.stock,type:"number",autoFocus:!0,min:1,max:this.state.selectedPurchaseItem.on_default})),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){t.assignPlacement()}},"Assign")))))),i=r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("table",{cellSpacing:10,cellPadding:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{colSpan:2},r.a.createElement("h1",null,"Place new item to ",this.state.place.name),this.state.purchaseItemSelectPopUp?r.a.createElement("h4",null,"Select a Purchase Order"):r.a.createElement("h4",null,"Select an Item"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},this.state.purchaseItemSelectPopUp?this.state.addPlacementFinal?n:r.a.createElement(Je,{data:this.state.purchaseItems,header:this.purchaseItemsColumn,popUp:this.selectPurchaseItem}):r.a.createElement(Je,{data:this.state.items,header:this.itemsColumn,popUp:this.selectItem,update:this.updateItemsTable,page:this.state.itemsPage})))))),c=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{item:!0,xs:3},r.a.createElement("span",null," ")),r.a.createElement(z.a,{item:!0,xs:6},r.a.createElement("table",{cellSpacing:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("h1",null,this.state.place.name))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement($.a,{id:"name",name:"name",label:"Place Name",autoFocus:!0,fullWidth:!0,required:!0,type:"text",onChange:this.onChange,value:this.state.update.name}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Update")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.placeDelete(t.state.place.id)}},"Delete Place"))))))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xm:8},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h1",null,"Items Located On ",this.state.update.name)),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){t.addNewItem(t.state.place.id)}},r.a.createElement(We.a,null)))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},this.state.newPlacementPopUpSelectItem?i:r.a.createElement(Je,{data:this.state.placements,header:this.placementColumn,delete:this.deletePlacement,popUp:this.popUpPlacement,update:this.update,page:this.state.page}))))))));return r.a.createElement("div",null,this.state.popUp?c:a)}}]),a}(n.Component),ln=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={places:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"pushNewId",value:function(e){this.props.history.push("/places/"+e)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getPlacesData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlacesData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,la(JSON.stringify(t)).then((function(e){console.log(e),e.status&&a.setState({places:e.places,loaded:!0})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(on,{pushNewId:this.pushNewId,data:this.state.places,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Item Managements"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/places/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Add New Place"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component),un=Object(f.b)((function(e){return{user:e.user}}))(ln),pn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={update:{}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:!1===this.props.user.isLoggedIn&&this.props.history.push("/");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=Object(U.a)({},this.state.update),a=Object(U.a)(Object(U.a)({},a),{},{action:"add"}),console.log(a),pa(JSON.stringify(a)).then((function(e){try{e.status?be.a.fire("New Place Added"):be.a.fire(e.error)}catch(t){console.log(t)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("table",{cellPadding:10,cellSpacing:10},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name: ",r.a.createElement($.a,{id:"name",name:"name",type:"text",onChange:this.onChange}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary"},"Create")))))))))}}]),a}(n.Component),dn=Object(f.b)((function(e){return{user:e.user}}))(pn),mn=a(290),hn=a(354),fn=a(355),bn=a(172),vn=a.n(bn),gn=a(174),En=a.n(gn),yn=a(175),On=a.n(yn),_n=a(176),jn=a.n(_n),xn=a(177),kn=a.n(xn),Cn=a(178),wn=a.n(Cn),Sn=a(179),In=a.n(Sn),Pn=a(94),Dn=a.n(Pn),Nn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loaded:!0,fields:{},docs:!1},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/")}},{key:"export",value:function(){var e=this;Wt(JSON.stringify({action:"export",filter:"none"})).then((function(t){t.status&&e.setState(Object(U.a)(Object(U.a)({},e.state),{},{items:t.items,docs:!0}))}))}},{key:"redirect",value:function(e){this.props.history.push("/export/"+e)}},{key:"render",value:function(){var e=this,t=r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xs:10},r.a.createElement("table",{cellPadding:15,cellSpacing:25},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.redirect("purchaseorders")}},"Export Purchase Orders")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.redirect("invoices")}},"Export Invoices")),r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){e.redirect("items")}},"Export Items"))))))),a=r.a.createElement("div",null,t,r.a.createElement(z.a,{container:!0},r.a.createElement(z.a,{md:10,item:!0})));this.props.classes;return r.a.createElement("div",null,r.a.createElement("h2",{style:{marginTop:0}},"Export"),r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,md:10},r.a.createElement(Se.a,null,this.state.loaded?a:r.a.createElement(Ge,null)))))}}]),a}(n.Component),Un=Object(f.b)((function(e){return{user:e.user}}))(Nn),Tn=a(181),Fn=a.n(Tn),Jn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Purchase Orders"))}}]),a}(n.Component),An=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Invoices"))}}]),a}(n.Component),Vn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Catagory",prop:"catagory_str"},{id:3,name:"Price",prop:"sales_price"},,{id:4,name:"Stock",prop:"stock"},{id:5,name:"Sold",prop:"sold"}],n.state={fields:[],loading:!0,update:[],filters:{exact_name:!0,is_applied_name:!1,is_applied_weight_from:!1,is_applied_weight_upto:!1,is_applied_average_cost_price_from:!1,is_applied_average_cost_price_upto:!1,is_applied_catagory:!1,is_applied_stock_from:!1,is_applied_stock_upto:!1,is_applied_sales_price_from:!1,is_applied_sales_price_upto:!1,is_applied_sold_from:!1,is_applied_sold_upto:!1},item_catagories:[],items:[],loadingTable:!0,showItems:!1,page:0,start:0,end:10},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleFilterChange=n.handleFilterChange.bind(Object(d.a)(n)),n.update_table=n.update_table.bind(Object(d.a)(n)),n.handlePopUp=n.handlePopUp.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={action:"get",model:"item"},e.next=3,Rt(JSON.stringify(t)).then((function(e){if(e.status){var t,n,r={},i=[];e.fields.map((function(e){n=e,r[e]=!1,t=e.split("_"),e="",t.map((function(t){e=e+t.charAt(0).toUpperCase()+t.slice(1)+" "})),i.push({key:n,str:e})})),r.name=!0,a.setState(Object(U.a)(Object(U.a)({},a.state),{},{fields:i,update:r,loading:!1}))}}));case 3:return t={action:"get",start:0,end:50},e.next=6,Ma(JSON.stringify(t)).then((function(e){try{e.status?a.setState(Object(U.a)(Object(U.a)({},a.state),{},{item_catagories:e.item_catagories})):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){"name"===e.target.name||this.setState(Object(U.a)(Object(U.a)({},this.state),{},{update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,!this.state.update[e.target.name]))}))}},{key:"handleFilterChange",value:function(e){var t,a="is_applied_"+e.target.name;"exact_name"===e.target.name?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{filters:Object(U.a)(Object(U.a)({},this.state.filters),{},{exact_name:!this.state.filters.exact_name})})):this.setState(Object(U.a)(Object(U.a)({},this.state),{},{filters:Object(U.a)(Object(U.a)({},this.state.filters),{},(t={},Object(N.a)(t,a,!0),Object(N.a)(t,e.target.name,e.target.value),t))}))}},{key:"exportData",value:function(){var e={model:"item",action:"export",showItems:!1,filter:Object(U.a)({fields:this.state.update},this.state.filters)};Rt(JSON.stringify(e)).then((function(e){e.status||be.a.fire(e.error)}))}},{key:"back",value:function(){this.props.history.push("/export")}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loadingTable:!0}));case 2:if(a=t<0?-1:1,0!==t){e.next=8;break}return e.next=6,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{start:0,end:10,page:1}));case 6:e.next=15;break;case 8:if(!(this.state.start+t>-1)){e.next=13;break}return e.next=11,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{start:this.state.start+t,end:this.state.end+t,page:this.state.page+a}));case 11:e.next=15;break;case 13:return alert("Cannot move futher from here."),e.abrupt("return");case 15:return n={model:"item",action:"export",start:this.state.start,end:this.state.end,showItems:!0,filter:Object(U.a)({fields:this.state.update},this.state.filters)},Rt(JSON.stringify(n)).then((function(e){e.status?r.setState(Object(U.a)(Object(U.a)({},r.state),{},{items:e.items,showItems:!0})):be.a.fire(e.error)})),e.next=19,this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loadingTable:!1}));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePopUp",value:function(e){this.props.history.push("/items/"+this.state.items[e].id)}},{key:"render",value:function(){var e,t=this,a=r.a.createElement("div",null,r.a.createElement("h1",null,"Item List")," ",r.a.createElement(Je,{data:this.state.items,header:this.columns,update:this.update_table,popUp:this.handlePopUp,page:this.state.page})),n=this.state.item_catagories,i=r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xs:3},r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back")),r.a.createElement(z.a,{item:!0,xs:5}),r.a.createElement(z.a,{item:!0,xs:3},r.a.createElement(X.a,{variant:"contained",color:"secondary"},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Filters"))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,md:4},r.a.createElement("table",{cellSpacing:5,cellPadding:5},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null,r.a.createElement("b",null,"Select Data To Include On Export")))),this.state.fields.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",{key:e.key},r.a.createElement(Z.a,{control:r.a.createElement(Xa.a,{checked:t.state.update[e.key],onChange:t.handleChange,name:e.key}),label:e.str})))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.exportData()}},"Export Data")))))),r.a.createElement(z.a,{item:!0,md:4},r.a.createElement("table",{cellSpacing:5,cellPadding:5},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h3",null,r.a.createElement("b",null,"Additional Filters")))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"name",size:"small",variant:"outlined",name:"name",defaultValue:this.state.filters.name,onChange:this.handleFilterChange,label:"Name"})),r.a.createElement("td",null,r.a.createElement(Z.a,{control:r.a.createElement(Xa.a,{checked:this.state.filters.exact_name,onChange:this.handleFilterChange,name:"exact_name"}),label:this.state.filters.exact_name?"Match Exactly":"Partial Match"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Weight Filter")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"weight_from",size:"small",variant:"outlined",defaultValue:this.state.filters.weight_from,name:"weight_from",type:"number",onChange:this.handleFilterChange,label:"Start Weight"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"weight_upto",size:"small",variant:"outlined",name:"weight_upto",type:"number",defaultValue:this.state.filters.weight_upto,onChange:this.handleFilterChange,label:"Start Upto"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Average Cost Price Filter")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"average_cost_price_from",size:"small",variant:"outlined",name:"average_cost_price_from",defaultValue:this.state.filters.average_cost_price_from,type:"number",onChange:this.handleFilterChange,label:"ACP From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"average_cost_price_upto",size:"small",variant:"outlined",name:"average_cost_price_upto",type:"number",defaultValue:this.state.filters.average_cost_price_upto,onChange:this.handleFilterChange,label:"ACP Upto"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Catagory")),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(st.a,{fullWidth:!0,name:"catagory",id:"catagory",defaultValue:this.state.filters.catagory,onChange:this.handleFilterChange,required:!0},n.map((function(e){return r.a.createElement(ct.a,{key:e.id,value:parseInt(e.id)},e.name)}))))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Stock")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"stock_from",variant:"outlined",size:"small",name:"stock_from",type:"number",defaultValue:this.state.filters.stock_from,onChange:this.handleFilterChange,label:"Stock From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"stock_upto",variant:"outlined",size:"small",name:"stock_upto",type:"number",defaultValue:this.state.filters.stock_upto,onChange:this.handleFilterChange,label:"Stock Upto"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Sales Price Filter")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,{id:"sales_price_from",variant:"outlined",size:"small",name:"sales_price_from",type:"number",defaultValue:this.state.filters.sales_price_from,onChange:this.handleFilterChange,label:"Sales Price From"})),r.a.createElement("td",null,r.a.createElement($.a,{id:"sales_price_upto",variant:"outlined",size:"small",name:"sales_price_upto",type:"number",onChange:this.handleFilterChange,defaultValue:this.state.filters.sales_price_upto,label:"Sales Price Upto"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"Sold Filter")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement($.a,(e={id:"sold_from",size:"small",variant:"outlined"},Object(N.a)(e,"size","small"),Object(N.a)(e,"name","sold_from"),Object(N.a)(e,"type","number"),Object(N.a)(e,"defaultValue",this.state.filters.sold_from),Object(N.a)(e,"onChange",this.handleFilterChange),Object(N.a)(e,"label","Sold From"),e))),r.a.createElement("td",null,r.a.createElement($.a,{id:"sold_upto",variant:"outlined",name:"sold_upto",size:"small",type:"number",onChange:this.handleFilterChange,defaultValue:this.state.filters.sold_upto,label:"Sold Upto"}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement(X.a,{variant:"contained",color:"primary",onClick:function(){return t.update_table(0)}},"Show Filtered Data"))))))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,md:8},this.state.showItems?this.state.loadingTable?r.a.createElement(Ge,null):a:r.a.createElement("span",null))));return r.a.createElement("div",null,this.state.loading?r.a.createElement(Ge,null):i)}}]),a}(n.Component),Bn=a(180),qn=a.n(Bn),Rn=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/giftcards","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Wn=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/giftcard","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Mn=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/giftcard","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Hn=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("apiv1/payment/giftcards/delete","POST",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),zn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Code",prop:"code"},{id:3,name:"Discount Type",prop:"discount_type"},{id:4,name:"Rate",prop:"rate"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,update:{},giftCard:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.deleteGiftCard=n.deleteGiftCard.bind(Object(d.a)(n)),n.popUp=n.popUp.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.props.match.params.id,console.log(t),!t){e.next=6;break}return e.next=6,this.popUp(0,t,!0);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/cards")}},{key:"complete",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!1}))}},{key:"loading",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!0}))}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit",giftCardUUID:t.uuid}),console.log(t),Mn(JSON.stringify(t)).then((function(e){try{e.status?(be.a.fire("Updated!","Gift Card details has been updated.","success"),a.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteGiftCard",value:function(e){var t=this,a={giftCardsUUID:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&Hn(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Gift Card Has Been Deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:0,i.length>2&&void 0!==i[2]&&i[2]){e.next=6;break}this.props.pushNewId(a),e.next=12;break;case 6:return console.log("po",a),n={action:"get",uuid:a,filter:"uuid"},e.next=10,Wn(JSON.stringify(n)).then((function(e){console.log("data",e),e.status&&(r=e)}));case 10:console.log("this.data",r),this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!0,giftCard:r.gift_cards[0],update:r.gift_cards[0]}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[],console.log(e);var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,this.state.update.name)),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.update.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.update.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Discount Type :",r.a.createElement(de.a,null,r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.discount_type,name:"discount_type",id:"discount_type"},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{required:!0,id:"rate",name:"rate",label:"rate",defaultValue:this.state.update.rate,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.giftCard(t.state.update.id)}},"Delete Discount"))))),r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,md:6},r.a.createElement("h1",null,"Unique Codes"))),r.a.createElement("br",null));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),Ln=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={giftCards:[],loaded:!1,start:0,end:10,page:1},n.update_table=n.update_table.bind(Object(d.a)(n)),n.pushNewId=n.pushNewId.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){!1===this.props.user.isLoggedIn&&this.props.history.push("/"),this.update_table(0)}},{key:"update_table",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t<0?-1:1,0!==t){e.next=6;break}return e.next=4,this.setState({loaded:!1,start:0,end:10,page:1});case 4:e.next=13;break;case 6:if(!(this.state.start+t>-1)){e.next=11;break}return e.next=9,this.setState({loaded:!1,start:this.state.start+t,end:this.state.end+t,page:this.state.page+a});case 9:e.next=13;break;case 11:return alert("Cannot move futher from here."),e.abrupt("return");case 13:n={action:"get",filter:"none",start:this.state.start,end:this.state.end},this.getGiftCardsData(n);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGiftCardsData",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(JSON.stringify(t)).then((function(e){console.log(e),e.status&&a.setState(Object(U.a)(Object(U.a)({},a.state),{},{giftCards:e.gift_cards,loaded:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"pushNewId",value:function(e){this.props.history.push("/cards/"+e)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",null,r.a.createElement(zn,{pushNewId:this.pushNewId,data:this.state.giftCards,update:this.update_table,page:this.state.page}));return r.a.createElement("div",null,r.a.createElement(z.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement("h2",{style:{marginTop:0}},"Gift Cards"),r.a.createElement("div",null,r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"primary",onClick:function(){e.update_table(0)}},r.a.createElement(ze.a,null),"\xa0\xa0\xa0Refresh Table"),r.a.createElement(qe.b,{to:"/cards/create",style:{textDecoration:"none"}},r.a.createElement(X.a,{style:{margin:"5px 10px"},variant:"contained",color:"secondary"},r.a.createElement(We.a,null),"\xa0\xa0\xa0Create New Gift Card"))),r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Se.a,null,this.state.loaded?t:r.a.createElement(Ge,null)))))}}]),a}(n.Component),Gn=Object(f.b)((function(e){return{user:e.user}}))(Ln),Yn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).columns=[{id:1,name:"Name",prop:"name"},{id:2,name:"Code",prop:"code"},{id:3,name:"Discount Type",prop:"discount_type"},{id:4,name:"Rate",prop:"rate"}],n.popUp=n.popUp.bind(Object(d.a)(n)),n.state={popUp:!1,update:{}},n.onChange=n.onChange.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.giftCardDelete=n.giftCard.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.props.match.params.id)){e.next=5;break}return e.next=5,this.popUp(t,0,!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"back",value:function(){this.props.data?this.setState(Object(U.a)(Object(U.a)({},this.state),{},{popUp:!1})):this.props.history.push("/cards")}},{key:"complete",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!1}))}},{key:"loading",value:function(){this.setState(Object(U.a)(Object(U.a)({},this.state),{},{loading:!0}))}},{key:"onChange",value:function(e){this.setState({update:Object(U.a)(Object(U.a)({},this.state.update),{},Object(N.a)({},e.target.name,e.target.value))})}},{key:"onSubmit",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.update,t=Object(U.a)(Object(U.a)({},t),{},{action:"edit",giftCardUUID:t.uuid}),console.log(t),Mn(JSON.stringify(t)).then((function(e){try{e.status?(be.a.fire("Updated!","Gift Card details has been updated.","success"),a.back()):be.a.fire({icon:"error",title:e.error})}catch(t){console.log(t)}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"giftCard",value:function(e){var t=this,a={giftCardsUUID:[e]};be.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&Hn(JSON.stringify(a)).then((function(e){try{e.status?(be.a.fire({icon:"success",title:"Gift Card Has Been Deleted.",showConfirmButton:!1,timer:1e3}),t.back()):be.a.fire({icon:"error",title:e.error})}catch(a){console.log(a)}}))}))}},{key:"popUp",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,n,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.length>1&&void 0!==r[1]?r[1]:0,r.length>2&&void 0!==r[2]&&r[2]){e.next=6;break}this.props.pushNewId(t),e.next=11;break;case 6:return a={action:"get",gitfCardUUID:t},e.next=9,Wn(JSON.stringify(a)).then((function(e){e.status&&(n=e)}));case 9:return e.next=11,this.setState({popUp:!0,giftCards:n.giftCards[0],update:n.giftCards[0]});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;e=this.props.data?this.props.data:[];var a=r.a.createElement(Je,{data:e,header:this.columns,popUp:this.popUp,update:this.props.update,page:this.props.page}),n=r.a.createElement("div",null,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.a.createElement(X.a,{variant:"contained",size:"small",color:"primary",onClick:function(){t.back()}},r.a.createElement(Ve.a,null),"Back"),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",spacing:3},r.a.createElement(z.a,{item:!0,xm:4}),r.a.createElement(z.a,{item:!0,xs:4},r.a.createElement("h1",null,this.state.discount.name)),r.a.createElement(z.a,{item:!0,xm:4})),r.a.createElement(z.a,{container:!0,justify:"center",alignContent:"center",alignItems:"center",direction:"column",spacing:10},r.a.createElement(z.a,{item:!0,xm:6},r.a.createElement(z.a,{container:!0,spacing:3,justify:"center",alignItems:"center"},r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"name",label:"Name",name:"name",defaultValue:this.state.discount.name,onChange:this.onChange,autoFocus:!0})),r.a.createElement(z.a,{item:!0,xm:2},r.a.createElement($.a,{required:!0,id:"code",label:"code",name:"code",defaultValue:this.state.discount.code,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3},r.a.createElement(z.a,{item:!0,xm:6,md:6},"Discount Type :",r.a.createElement(de.a,null,r.a.createElement(st.a,{onChange:this.onChange,value:this.state.update.discount_type,name:"discount_type",id:"discount_type"},r.a.createElement(ct.a,{value:"percent"},"Percentage"),r.a.createElement(ct.a,{value:"fixed"},"Fixed")))),r.a.createElement(z.a,{item:!0,xm:6,md:6},r.a.createElement($.a,{required:!0,id:"rate",name:"rate",label:"rate",defaultValue:this.state.discount.rate,onChange:this.onChange}))),r.a.createElement(z.a,{container:!0,spacing:3,alignItems:"flex-end"},r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{type:"submit",variant:"contained",color:"primary",onClick:function(){t.onSubmit()}},"Update")),r.a.createElement(z.a,{item:!0,xm:3,md:6},r.a.createElement(X.a,{variant:"contained",color:"secondary",onClick:function(){t.giftCard(t.state.discount.id)}},"Delete Discount"))))),r.a.createElement("br",null));return r.a.createElement("div",null,this.state.popUp?n:a)}}]),a}(n.Component),Qn=Object(F.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(U.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(N.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",textAlign:"center",flexDirection:"column"},fixedHeight:{height:240},active:{backgroundColor:"#ddd"},avatar:{margin:"auto"}}}));var Kn=Object(Oe.g)((function(e){var t=Qn(),a=r.a.useState(!0),n=Object(D.a)(a,2),i=n[0],c=n[1],s=r.a.useState(""),o=Object(D.a)(s,2),l=o[0],u=o[1],p=Object(Oe.f)();r.a.useEffect((function(){var e=p.pathname.split("/")[1];u(e),console.log(e)}));var d=Object(f.c)((function(e){return e.user}));return"/"===window.location.pathname&&!0,r.a.createElement("div",{className:t.root},r.a.createElement(J.a,null),r.a.createElement(V.a,{position:"absolute",className:Object(T.a)(t.appBar,i&&t.appBarShift)},r.a.createElement(B.a,{className:t.toolbar},r.a.createElement(M.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){c(!0)},className:Object(T.a)(t.menuButton,i&&t.menuButtonHidden)},r.a.createElement(G.a,null)),r.a.createElement(R.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Mandala IMS"),r.a.createElement(M.a,{color:"inherit",onClick:function(){window.location.href="/logout"}},r.a.createElement(vn.a,null)))),r.a.createElement(A.a,{variant:"permanent",classes:{paper:Object(T.a)(t.drawerPaper,!i&&t.drawerPaperClose)},open:i},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(K.a,{className:t.avatar,alt:d.data.first_name+" "+d.data.last_name,src:"https://material-ui.com/static/images/avatar/1.jpg"})),r.a.createElement(R.a,null,d.data.first_name," John ",r.a.createElement("span",null,"  ")," ",d.data.last_name," Doe ",r.a.createElement("br",null),d.data.user_type),r.a.createElement(M.a,{onClick:function(){c(!1)}},r.a.createElement(Q.a,null))),r.a.createElement(W.a,null),r.a.createElement(W.a,null),r.a.createElement(q.a,{style:{padding:0}},r.a.createElement(mn.a,{className:""==l?t.active:"null",button:!0,onClick:function(){e.history.push("/")}},r.a.createElement(hn.a,null,r.a.createElement(En.a,null)),r.a.createElement(fn.a,{primary:"Dashboard"})),r.a.createElement(mn.a,{className:"purchaseorders"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/purchaseorders")}},r.a.createElement(hn.a,null,r.a.createElement(On.a,null)),r.a.createElement(fn.a,{primary:"Purchase Orders"})),r.a.createElement(mn.a,{className:"vendors"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/vendors")}},r.a.createElement(hn.a,null,r.a.createElement(jn.a,null)),r.a.createElement(fn.a,{primary:"Vendors"})),r.a.createElement(mn.a,{className:"invoices"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/invoices")}},r.a.createElement(hn.a,null,r.a.createElement(kn.a,null)),r.a.createElement(fn.a,{primary:"Invoices"})),r.a.createElement(mn.a,{className:"customers"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/customers")}},r.a.createElement(hn.a,null,r.a.createElement(wn.a,null)),r.a.createElement(fn.a,{primary:"Customers"})),r.a.createElement(mn.a,{className:"items"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/items")}},r.a.createElement(hn.a,null,r.a.createElement(In.a,null)),r.a.createElement(fn.a,{primary:"Items"})),r.a.createElement(mn.a,{className:"cards"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/cards")}},r.a.createElement(hn.a,null,r.a.createElement(qn.a,null)),r.a.createElement(fn.a,{primary:"Gift Cards"}))),r.a.createElement(W.a,null),r.a.createElement(q.a,null,r.a.createElement(mn.a,{className:"places"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/places")}},r.a.createElement(hn.a,null,r.a.createElement(Dn.a,null)),r.a.createElement(fn.a,{primary:"Item Managements"})),r.a.createElement(mn.a,{className:"discounts"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/discounts")}},r.a.createElement(hn.a,null,r.a.createElement(Dn.a,null)),r.a.createElement(fn.a,{primary:"Discounts"})),r.a.createElement(mn.a,{className:"taxes"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/taxes")}},r.a.createElement(hn.a,null,r.a.createElement(Dn.a,null)),r.a.createElement(fn.a,{primary:"Taxes"})),r.a.createElement(mn.a,{className:"itemcatagories"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/itemcatagories")}},r.a.createElement(hn.a,null,r.a.createElement(Dn.a,null)),r.a.createElement(fn.a,{primary:"Item Catagories"})),r.a.createElement(mn.a,{className:"users"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/users")}},r.a.createElement(hn.a,null,r.a.createElement(Dn.a,null)),r.a.createElement(fn.a,{primary:"Staff Management"})),r.a.createElement(mn.a,{className:"export"==l?t.active:"null",button:!0,onClick:function(){e.history.push("/export")}},r.a.createElement(hn.a,null,r.a.createElement(Fn.a,null)),r.a.createElement(fn.a,{primary:"Export Data"})))),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(H.a,{className:t.container},r.a.createElement(z.a,{container:!0,justify:"center"},r.a.createElement(z.a,{item:!0,xs:12},r.a.createElement(Oe.c,null,r.a.createElement(Oe.a,{path:"/login",component:re}),r.a.createElement(Oe.a,{path:"/logout",component:ce}),r.a.createElement(Oe.a,{path:"/users/create",component:ye}),r.a.createElement(Oe.a,{path:"/users/:id",component:Be}),r.a.createElement(Oe.a,{path:"/users",component:Ke}),r.a.createElement(Oe.a,{path:"/vendors/create",component:ge}),r.a.createElement(Oe.a,{path:"/vendors/:id",component:Xe}),r.a.createElement(Oe.a,{path:"/vendors",component:Ze}),r.a.createElement(Oe.a,{path:"/customers/create",component:dt}),r.a.createElement(Oe.a,{path:"/customers/:id",component:ot}),r.a.createElement(Oe.a,{path:"/customers",component:ut}),r.a.createElement(Oe.a,{path:"/purchaseorders/create",component:$t}),r.a.createElement(Oe.a,{path:"/purchaseorders/:id",component:Qt}),r.a.createElement(Oe.a,{path:"/purchaseorders",component:Xt}),r.a.createElement(Oe.a,{path:"/invoices/create",component:Da}),r.a.createElement(Oe.a,{path:"/invoices/:id",component:Sa}),r.a.createElement(Oe.a,{path:"/invoices",component:Pa}),r.a.createElement(Oe.a,{path:"/discounts/create",component:Aa}),r.a.createElement(Oe.a,{path:"/discounts/:id",component:Na}),r.a.createElement(Oe.a,{path:"/discounts",component:Ta}),r.a.createElement(Oe.a,{path:"/taxes/create",component:Wa}),r.a.createElement(Oe.a,{path:"/taxes/:id",component:Va}),r.a.createElement(Oe.a,{path:"/taxes",component:qa}),r.a.createElement(Oe.a,{path:"/items/create",component:tn}),r.a.createElement(Oe.a,{path:"/items/:id",component:Ka}),r.a.createElement(Oe.a,{path:"/items",component:Za}),r.a.createElement(Oe.a,{path:"/itemcatagories/create",component:sn}),r.a.createElement(Oe.a,{path:"/itemcatagories/:id",component:an}),r.a.createElement(Oe.a,{path:"/itemcatagories",component:rn}),r.a.createElement(Oe.a,{path:"/places/create",component:dn}),r.a.createElement(Oe.a,{path:"/places/:id",component:on}),r.a.createElement(Oe.a,{path:"/places",component:un}),r.a.createElement(Oe.a,{path:"/export/purchaseorders",component:Jn}),r.a.createElement(Oe.a,{path:"/export/invoices",component:An}),r.a.createElement(Oe.a,{path:"/export/items",component:Vn}),r.a.createElement(Oe.a,{path:"/export",component:Un}),r.a.createElement(Oe.a,{path:"/cards/create",component:Yn}),r.a.createElement(Oe.a,{path:"/cards/:id",component:zn}),r.a.createElement(Oe.a,{path:"/cards",component:Gn})))))))})),Xn=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.redirect=n.redirect.bind(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"redirect",value:function(e){this.props.history.push(e)}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().then((function(e){e?(console.log(e),e.status&&t.props.dispatch(S(e.user_data)),t.setState({loading:!1})):P()("Cannot connet to the server, make sure you have a stable internet connection.")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=r.a.createElement(Ge,null);return e=this.state.loading?r.a.createElement(Ge,null):this.props.user.isLoggedIn?r.a.createElement(Kn,{redirect:this.redirect}):r.a.createElement(re,null),r.a.createElement("div",null,e)}}]),a}(n.Component),$n=Object(f.b)((function(e){return{user:e.user}}))(Xn);var Zn=function(){return r.a.createElement("div",null,r.a.createElement($n,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var er=a(81),tr={isLoggedIn:!1,data:{}},ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"logout":return e.data={},e.isLoggedIn=!1,{isLoggedIn:e.isLoggedIn};case"loggedIn":return e.data=t.payload,e.isLoggedIn=!0,{data:e.data,isLoggedIn:e.isLoggedIn};default:return e}},nr={data:{}},rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setUsers":return e.users=t.payload,{users:e.users};default:return e}},ir=Object(er.c)({user:ar,users:rr}),cr=a(182),sr=a(183),or=a(356),lr=Object(er.d)(ir,Object(er.a)(cr.a)),ur=Object(sr.a)({typography:{fontFamily:["Poppins","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")}});c.a.render(r.a.createElement(or.a,{theme:ur},r.a.createElement(f.a,{store:lr},r.a.createElement(qe.a,null,r.a.createElement(Zn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){e.exports={loader:"popUp_loader__ji3PT",spin:"popUp_spin__1nLou",dropbtn:"popUp_dropbtn__1fyGN",dropdown:"popUp_dropdown__2vgTr",dropdown_content:"popUp_dropdown_content__1rTux",paymentFormField:"popUp_paymentFormField__1ge61"}}},[[201,1,2]]]);
//# sourceMappingURL=main.f9d8d0c5.chunk.js.map