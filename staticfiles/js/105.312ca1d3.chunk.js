(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[105],{234:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a.n(n),l=a(33),c=a(0),s=a.n(c),m=a(3),o=a(1),i=a(55),u=a(879),d=a(296),f=a(264),b=a(313),E=a(366),p=a(859),h=a(272),v=a(371),O=a(287),g=a(295),w=a(364),j=a(361),y=a(362),N=a(290),x=a(363),D=a(547),k=a(337),S=a(359),P=(a(344),{startOfWeek:Object(h.default)(new Date),endOfWeek:Object(v.default)(new Date),startOfLastWeek:Object(h.default)(Object(O.default)(new Date,-7)),endOfLastWeek:Object(v.default)(Object(O.default)(new Date,-7)),startOfToday:Object(g.default)(new Date),endOfToday:Object(w.default)(new Date),startOfYesterday:Object(g.default)(Object(O.default)(new Date,-1)),endOfYesterday:Object(w.default)(Object(O.default)(new Date,-1)),startOfMonth:Object(j.default)(new Date),endOfMonth:Object(y.default)(new Date),startOfLastMonth:Object(j.default)(Object(N.default)(new Date,-1)),endOfLastMonth:Object(y.default)(Object(N.default)(new Date,-1)),startOfYear:Object(x.default)(new Date),endOfYear:Object(D.a)(new Date),startOfLastYear:Object(x.default)(Object(k.default)(new Date,-1)),endOfLastYear:Object(D.a)(Object(k.default)(new Date,-1))}),L={range:{},isSelected(e){var t=this.range();return Object(S.default)(e.startDate,t.startDate)&&Object(S.default)(e.endDate,t.endDate)}};var T=[{label:"This Week",range:function(){return{startDate:P.startOfWeek,endDate:P.endOfWeek}}},{label:"Last Week",range:function(){return{startDate:P.startOfLastWeek,endDate:P.endOfLastWeek}}},{label:"This month",range:function(){return{startDate:P.startOfMonth,endDate:P.endOfMonth}}},{label:"Last Month",range:function(){return{startDate:P.startOfLastMonth,endDate:P.endOfLastMonth}}},{label:"This Year",range:function(){return{startDate:P.startOfYear,endDate:P.endOfYear}}},{label:"Last Year",range:function(){return{startDate:P.startOfLastYear,endDate:P.endOfLastYear}}}].map((function(e){return Object(o.a)(Object(o.a)({},L),e)})),_=a(47),I=function(){var e=Object(l.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)("api/v1/accounting/summary","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)("api/v1/inventory/summary","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.a)("api/v1/sales/summary","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),Y=a(30),C=a(36),R=a(381),B={endOfToday:Object(w.default)(new Date),startOfToday:Object(g.default)(new Date)},A=[{name:"1",Sales:0,Purchases:0,Profit:0,amt:0},{name:"2",Sales:0,Purchases:0,Profit:0,amt:0},{name:"3",Sales:0,Purchases:0,Profit:0,amt:0},{name:"4",Sales:0,Purchases:0,Profit:0,amt:0},{name:"5",Sales:0,Purchases:0,Profit:0,amt:0},{name:"6",Sales:0,Purchases:0,Profit:0,amt:0},{name:"7",Sales:0,Purchases:0,Profit:0,amt:0},{name:"8",Sales:0,Purchases:0,Profit:0,amt:0},{name:"9",Sales:0,Purchases:0,Profit:0,amt:0},{name:"0",Sales:0,Purchases:0,Profit:0,amt:0},{name:"1",Sales:1500,Purchases:1900,Profit:0,amt:400},{name:"2",Sales:0,Purchases:0,Profit:0,amt:0}],K={startDate:Object(O.default)(B.startOfToday,-1*(Math.max(Number(7),1)-1)),endDate:B.endOfToday,key:"selection"},F=function(e){var t=s.a.useState(!1),a=Object(i.a)(t,2),n=a[0],c=a[1],m=s.a.useState(Object(o.a)({},K)),h=Object(i.a)(m,2),v=h[0],O=h[1],g=s.a.useState(Object(o.a)({},K)),w=Object(i.a)(g,2),j=w[0],y=w[1],N=s.a.useState(A),x=Object(i.a)(N,2),D=x[0],k=x[1],S=function(e){var t={action:"get",filters:{date:{start:new Date(new Date(v.startDate)),end:new Date(new Date(v.endDate))},delta:1}};W(t,e).then((function(e){if(console.log(e),e.json.status){k(Object(o.a)({},e.json.data));var t=e.json.data,a=Object.keys(t).map((function(e,a){return{name:"".concat(Object(R.default)(new Date(e),"MMM dd yyyy")),Profit:t[e].profit,Purchases:t[e].purchase,Sales:t[e].sales}}));k(a)}else Y.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})})).catch((function(e){return console.log(e)}))};v.endDate;s.a.useEffect((function(){var e=new AbortController;return Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(e.signal);case 1:case"end":return t.stop()}}),t)})))(),function(){return e.abort()}}),[]),s.a.useEffect((function(){S()}),[v]);return s.a.createElement(d.a,null,s.a.createElement(f.a,{md:12},s.a.createElement(b.a,null,s.a.createElement(b.a.Header,{className:"d-flex justify-content-between"},s.a.createElement(b.a.Title,{as:"h5"},"Cash Flow"),s.a.createElement("div",{className:"dashboardDateRange"},s.a.createElement("span",null,s.a.createElement("button",{className:"btn btn-outline-secondary rounded-0 btn-sm mr-2",onClick:function(){return c(!n)},style:{padding:"4px 8px",margin:0,marginLeft:"2px"}},v.startDate.toDateString()+"-"+v.endDate.toDateString(),s.a.createElement("i",{className:"fa fa-calendar ml-2","aria-hidden":"true"}))),s.a.createElement(E.a,{in:n,style:{background:"white"}},s.a.createElement("div",{id:"basic-collapse"},s.a.createElement(b.a.Body,null,s.a.createElement(p.DateRangePicker,{editableDateInputs:!0,ranges:[j],staticRanges:T,onChange:function(e){console.log(e),y(Object(o.a)(Object(o.a)({},j),e.selection))}}),s.a.createElement(d.a,{style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement("button",{className:"btn btn-outline-secondary rounded-0 btn-sm mr-2",onClick:function(){y(Object(o.a)({},v)),c(!1)},style:{padding:"4px 8px",margin:0,marginLeft:"2px"}},"Close"),s.a.createElement("button",{className:"btn btn-secondary rounded-0 btn-sm mr-4",onClick:function(){O(Object(o.a)({},j)),c(!1)},style:{padding:"4px 8px",margin:0,marginLeft:"2px"}},"Apply"))))))),s.a.createElement(b.a.Body,null,s.a.createElement("div",{style:{width:"100%",height:300}},s.a.createElement(u.e,null,s.a.createElement(u.d,{width:600,height:300,data:Object(C.a)(D)?[]:D,margin:{top:5,right:30,left:20,bottom:5}},s.a.createElement(u.g,{dataKey:"name"}),s.a.createElement(u.h,null),s.a.createElement(u.a,{strokeDasharray:"3 3"}),s.a.createElement(u.f,null),s.a.createElement(u.b,null),s.a.createElement(u.c,{type:"monotone",dataKey:"Profit",strokeWidth:2,stroke:"#8884d8",activeDot:{r:5}}),s.a.createElement(u.c,{type:"monotone",dataKey:"Purchases",strokeWidth:2,stroke:"#eb5234",activeDot:{r:5}}),s.a.createElement(u.c,{type:"monotone",dataKey:"Sales",strokeWidth:2,stroke:"#82ca9d",activeDot:{r:5}}))))))))},H=(a(866),a(867),a(297));var J=function(){var e=Object(c.useState)({revenue:0,revenueIncrease:0,expense:0,expenseIncrease:0,profit:0,profitIncrease:0}),t=Object(i.a)(e,2),a=t[0],n=t[1];Object(c.useEffect)((function(){var e=new AbortController;console.log({start:Object(j.default)(new Date),end:new Date});var t={action:"get",filters:{date:{start:Object(j.default)(new Date),end:new Date}}};return I(t,e.signal).then((function(e){if(e.json.status){e.json.summary;var t=(new Date).toISOString().split("T")[0],a=e.json.summary.data,r=a[Object.keys(a).find((function(e){if(t.slice(0,t.length-3)===e.slice(0,e.length-3))return!0}))];n({revenue:r.revenue,revenueIncrease:r.revenue_increase,expense:r.expense,expenseIncrease:r.expense_increase,profit:r.profit,profitIncrease:r.profit_increase})}else Y.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})})).catch((function(e){return console.log(e)})),function(){return e.abort()}}),[]);var r=(new Date).toLocaleDateString("default",{month:"short"});return s.a.createElement(d.a,null,s.a.createElement(f.a,{md:4,xl:4},s.a.createElement(b.a,null,s.a.createElement(b.a.Body,null,s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"d-inline-block w-75"}," ",s.a.createElement("b",null," Total Revenue")),s.a.createElement("div",{className:"d-inline-block text-right w-25"},r)),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement("div",{className:"col-9"},s.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},s.a.createElement("i",{className:"fa fa-money text-c-blue f-30 mr-3",style:{color:"#32d000"}}),"Rs. ",s.a.createElement(H.a,null,a.revenue))),s.a.createElement("div",{className:"col-3 text-right"},s.a.createElement("p",{className:"m-b-0"},"0%"))),s.a.createElement("div",{className:"progress m-t-30",style:{height:"7px"}},s.a.createElement("div",{className:"progress-bar progress-c-theme2",role:"progressbar",style:{width:"0%"},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}))))),s.a.createElement(f.a,{md:4,md:4},s.a.createElement(b.a,null,s.a.createElement(b.a.Body,null,s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"d-inline-block w-75"},s.a.createElement("b",null,"Total Expense")),s.a.createElement("div",{className:"d-inline-block text-right w-25"},r)),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement("div",{className:"col-9"},s.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},s.a.createElement("i",{className:"fa fa-shopping-cart text-c-red f-30 mr-3"}),"Rs. ",s.a.createElement(H.a,null,a.expense))),s.a.createElement("div",{className:"col-3 text-right"},s.a.createElement("p",{className:"m-b-0"},"0%"))),s.a.createElement("div",{className:"progress m-t-30",style:{height:"7px"}},s.a.createElement("div",{className:"progress-bar progress-c-theme",role:"progressbar",style:{width:"0%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"}))))),s.a.createElement(f.a,{md:4,xl:4},s.a.createElement(b.a,null,s.a.createElement(b.a.Body,null,s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"d-inline-block w-75"},s.a.createElement("b",null,"Total Profit")),s.a.createElement("div",{className:"d-inline-block text-right w-25"},r)),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement("div",{className:"col-9"},s.a.createElement("h4",{className:"f-w-300 d-flex align-items-center m-b-0"},s.a.createElement("i",{className:"fa fa-line-chart text-c-blue f-30 mr-3",style:{color:"#8884d8"}}),a.profit<0?s.a.createElement("span",{style:{color:"#f44236"}},"Rs. ",s.a.createElement(H.a,null,a.profit)):s.a.createElement(s.a.Fragment,null,"Rs. ",s.a.createElement(H.a,null,a.profit)))),s.a.createElement("div",{className:"col-3 text-right"},s.a.createElement("p",{className:"m-b-0"},"0%"))),s.a.createElement("div",{className:"progress m-t-30",style:{height:"7px"}},s.a.createElement("div",{className:"progress-bar progress-c-theme",role:"progressbar",style:{width:"0%"},"aria-valuenow":"70","aria-valuemin":"0","aria-valuemax":"100"}))))))},U=a(490),z=a(635),V=a(636),q=a(298),G=a(5),Q=a(70);var X=function(e){var t=Object(c.useState)({}),a=Object(i.a)(t,2),n=a[0],r=a[1];Object(c.useEffect)((function(){var e=new AbortController;return M({action:"get",filters:{low_items:{start:0,end:10},most_sold_items:{start:0,end:10}}},e.signal).then((function(e){if(console.log(e),e.json.status){var t=e.json.summary;r(Object(o.a)({},t))}else Y.a.fire({icon:"error",title:e.json.error,background:"#ffe5de"})})).catch((function(e){return console.log(e)})),function(){return e.abort()}}),[]);var l=function(e){return e.map((function(e,t){var a=e.images.find((function(e){return"THUMBNAIL"===e.category}));return a||(a=e.images[0]),s.a.createElement("tr",{key:t},s.a.createElement("td",{className:"imageTd"},s.a.createElement(U.a,{src:a?"".concat(G.a.SERVER_URL).concat(a.image):"https://toppng.com/uploads/preview/inventory-icon-icon-11553435409cbxz9pmaao.png",thumbnail:!0,style:{height:"46px",minWidth:"46px",width:"46px",objectFit:"cover"},alt:"..."})),s.a.createElement("td",{onClick:function(){Q.history.push("/item/"+e.id)},style:{cursor:"pointer",color:"#55588b"}},e.name),s.a.createElement("td",null,e.stock),s.a.createElement("td",null,e.sold))}))},m=l(n.most_sold_items?n.most_sold_items.items:[]),u=l(n.low_stock_items?n.low_stock_items.items:[]);return s.a.createElement(d.a,null,s.a.createElement(f.a,{md:4},s.a.createElement(f.a,{md:12,className:"p-0"},s.a.createElement(b.a,null,s.a.createElement(b.a.Body,null,s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"d-inline-block w-90"},"Total Sold Items"),s.a.createElement("div",{className:"d-inline-block text-right w-10"})),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement("div",{className:"col-6"},s.a.createElement("i",{className:"fa fa-cubes text-c-blue f-30 mr-5",style:{color:"#32d000"}})),s.a.createElement("div",{className:"col-6 "},s.a.createElement("h4",{className:"m-b-0"},n.sold)))))),s.a.createElement(f.a,{md:12,className:"p-0"},s.a.createElement(b.a,null,s.a.createElement(b.a.Body,null,s.a.createElement("div",{className:"mb-4"},s.a.createElement("h6",{className:"d-inline-block w-90"},"Total Active Items"),s.a.createElement("div",{className:"d-inline-block text-right w-10"})),s.a.createElement("div",{className:"row d-flex align-items-center"},s.a.createElement("div",{className:"col-6"},s.a.createElement("i",{className:"fa fa-cubes text-c-blue f-30 mr-5",style:{color:"#8884d8"}})),s.a.createElement("div",{className:"col-6 "},s.a.createElement("h4",{className:"m-b-0"},n.active_items))))))),s.a.createElement(f.a,{md:8},s.a.createElement(z.a,{defaultActiveKey:"1",id:"uncontrolled-tab-example"},s.a.createElement(V.a,{className:"nav-link2",eventKey:"1",title:"Best Selling Items"},s.a.createElement(q.a,{striped:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Image"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Stock"),s.a.createElement("th",null,"Sold"))),s.a.createElement("tbody",null,m,!Object(C.a)(n.most_sold_items)||s.a.createElement("tr",null,s.a.createElement("td",{colSpan:5},"No Data available"))))),s.a.createElement(V.a,{className:"nav-link2",eventKey:"2",title:"Low Stock Items"},s.a.createElement(q.a,{striped:!0,responsive:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Image"),s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Stock"),s.a.createElement("th",null,"Sold"))),s.a.createElement("tbody",null,!Object(C.a)(n.low_stock_items)||s.a.createElement("tr",null,s.a.createElement("td",{colSpan:5},"No Data available")),u))))))};t.default=function(e){return s.a.useEffect((function(){Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}),[]),s.a.createElement(m.a,null,s.a.createElement(J,null),s.a.createElement(F,null),s.a.createElement(X,null))}},297:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.children.toLocaleString();return t%1!==0&&"number"===typeof t&&(t=e.children.toFixed(2)),t=t.toLocaleString(),r.a.createElement("span",null,t)}}}]);
//# sourceMappingURL=105.312ca1d3.chunk.js.map