(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[100],{230:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(1),l=a(55),c=a(0),o=a.n(c),i=a(264),s=a(296),u=a(313),m=a(306),f=a(111),p=a(3),d=a(262),b=a(30),E=a(434),v=a(263),g=a(575),h=(a(502),a(576));t.default=function(e){var t=o.a.useState(!0),a=Object(l.a)(t,2),c=a[0],j=a[1],y=o.a.useState(!1),O=Object(l.a)(y,2),x=O[0],k=O[1],C=o.a.useState([]),S=Object(l.a)(C,2),w=S[0],N=S[1],L=o.a.useState([]),R=Object(l.a)(L,2),z=R[0],A=R[1],J=o.a.useState({name:"",description:""}),_=Object(l.a)(J,2),B=_[0],D=_[1],F=o.a.useState({}),G=Object(l.a)(F,2),U=G[0],V=G[1];o.a.useEffect((function(){var e=new AbortController;return Object(E.d)({action:"get"},e.signal).then((function(e){console.log(e),e.json.status&&(console.log(JSON.stringify(e.json.valid_powers)),N(e.json.valid_powers),j(!1))})).catch((function(e){console.log(e)})),function(){return e.abort()}}),[]);var H=function(e){V(Object(r.a)(Object(r.a)({},U),{},{[e.target.name]:""})),D(Object(r.a)(Object(r.a)({},B),{},{[e.target.name]:e.target.value}))},M=w.map((function(e,t){var a=e.replace(/_/g," ");return o.a.createElement(i.a,{md:4,key:t},o.a.createElement("div",{style:{cursor:"default",display:"flex",justifyContent:"flex-start",marginBottom:"8px",marginLeft:"2px"},onClick:function(){return function(e){var t=Object(n.a)(z);t[e]=!t[e],A(t)}(t)}},o.a.createElement("div",{className:"mr-1"},o.a.createElement(g.a,{status:z[t]})),o.a.createElement("div",{style:{lineHeight:"21.25px"}},a[0].toUpperCase()+a.slice(1))))}));return c?o.a.createElement(v.a,null):o.a.createElement(p.a,null,o.a.createElement(s.a,null,o.a.createElement(i.a,null,o.a.createElement(u.a,null,o.a.createElement(u.a.Body,null,o.a.createElement("h5",null,"Create Role"),o.a.createElement("hr",null),o.a.createElement(s.a,null,o.a.createElement(i.a,{md:12},o.a.createElement(m.a.Group,null,o.a.createElement(m.a.Label,null,"Role Name*"),o.a.createElement(m.a.Control,{name:"name",value:B.name,onChange:H,type:"text",placeholder:"Role Name"}),o.a.createElement(d.a,null,U.name))),o.a.createElement(i.a,{md:12},o.a.createElement(m.a.Group,null,o.a.createElement(m.a.Label,null,"Description"),o.a.createElement(m.a.Control,{name:"description",as:"textarea",rows:"6",value:B.description,onChange:H,type:"text",placeholder:"Description"}),o.a.createElement(d.a,null,U.description)))),o.a.createElement("br",null),o.a.createElement("h5",{style:{fontSize:"1.2em"}},"Permissions"),o.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:function(){var e=Object(n.a)(z);for(var t in w)e[t]=!0;A(e)}},"Mark All"),o.a.createElement("span",{className:"mr-2",style:{cursor:"pointer",color:"#007bff",fontSize:"0.9em"},onClick:function(){var e=Object(n.a)(z);for(var t in w)e[t]=!1;A(e)}},"Unmark All"),o.a.createElement("hr",null),o.a.createElement(s.a,null,M),o.a.createElement("div",{className:"d-flex justify-content-end"},o.a.createElement(f.a,{variant:"warning",onClick:function(){e.history.push("/roles")}},"Cancel"),o.a.createElement(f.a,{disabled:x,variant:"primary",onClick:function(){var t=Object(h.a)(B),a=t.isValid,n=t.errors;if(!a)return b.a.fire({icon:"error",title:"Fix errors and retry submission!",background:"#ffe5de"}),void V(Object(r.a)({},n));k(!0);var l={action:"add",name:B.name,description:B.description,powers:w,values:z};Object(E.b)(l).then((function(t){console.log(t),t.json.status?(b.a.fire({icon:"success",title:"Role created successfully!",background:"#dffff0"}),e.history.push("/roles")):(k(!1),b.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"}))})).catch((function(e){k(!1),console.log(e)}))}},x?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Submitting"):"Submit")))))))}},575:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.status;return r.a.createElement("button",{className:t?"btn btn-primary btn-sm":"btn btn-outline-primary btn-sm",style:{padding:"0px 3px",margin:0,marginLeft:0,height:"21.18px",width:"21.11px"}},r.a.createElement("i",{className:"feather icon-".concat(t?"check":null," text-c-white f-8 m-0")}))}},576:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(36),r=function(e){var t={};return Object(n.a)(e.name)&&(t.name="Name cannot be empty."),{isValid:Object(n.a)(t),errors:t}}}}]);
//# sourceMappingURL=100.b90ea220.chunk.js.map