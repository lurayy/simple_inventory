(this["webpackJsonperp-frontend"]=this["webpackJsonperp-frontend"]||[]).push([[88],{185:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(20),c=a.n(r),u=a(2),i=a(33),o=a(55),l=a(0),s=a.n(l),p=a(296),d=a(264),m=a(313),f=a(306),v=a(111),h=a(3),b=a(286),g=a.n(b),y=a(263),E=a(262),O=a(30),j=a(549),x=a(348);t.default=function(e){var t=s.a.useState(!0),a=Object(o.a)(t,2),r=a[0],l=a[1],b=s.a.useState(!1),C=Object(o.a)(b,2),w=C[0],k=C[1],L=s.a.useState([]),S=Object(o.a)(L,2),P=S[0],_=S[1],T=s.a.useState({name:"",category:"",type:"",rate:"",code:"",hasUniqueCode:!1,isLimited:!1,countLimit:"",isActive:!0}),G=Object(o.a)(T,2),q=G[0],N=G[1],U=s.a.useState({}),A=Object(o.a)(U,2),F=A[0],I=A[1];s.a.useEffect((function(){var t=new AbortController;return Object(i.a)(c.a.mark((function a(){var n;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=0,a.next=3,Object(x.g)({action:"get",filter:"none",start:0,end:999999},t.signal).then((function(e){console.log(e),e.json.status&&(_(Object(u.a)(e.json.gift_card_categories)),n++)})).catch((function(e){console.log(e)}));case 3:return a.next=5,Object(x.f)({action:"get",uuid:e.match.params.id,filter:"uuid"},t.signal).then(function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.json),!t.json.status){e.next=6;break}return a=t.json.gift_cards[0],e.next=5,N({id:a.id,uuid:a.uuid,name:a.name,category:a.category,type:a.discount_type,rate:a.rate,code:a.code,hasUniqueCode:a.has_unique_codes,isLimited:a.is_limited,countLimit:a.count_limit,isActive:a.is_active});case 5:n++;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 5:2===n&&l(!1);case 6:case"end":return a.stop()}}),a)})))(),function(){return t.abort()}}),[]);var J=function(e){var t;console.log("chainge hte ghints",e.target.value),t=e.target.name,I(Object(n.a)(Object(n.a)({},F),{},{[t]:""}));var a=q;"checkbox"===e.target.type?(console.log("htis is checkobs ------------------"),a[e.target.name]=!a[e.target.name],!0===a.hasUniqueCode&&(a.isLimited=!0)):(console.log("htis is not not ------------------"),a[e.target.name]=e.target.value),N(Object(n.a)({},a))};return r?s.a.createElement(y.a,null):s.a.createElement(h.a,null,s.a.createElement(p.a,null,s.a.createElement(d.a,null,s.a.createElement(m.a,null,s.a.createElement(m.a.Body,null,s.a.createElement("h5",null,"Create Gift Card"),s.a.createElement("hr",null),s.a.createElement(p.a,null,s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Gift Card Name*"),s.a.createElement(f.a.Control,{name:"name",value:q.name,onChange:J,type:"text",placeholder:"Tax Name"}),s.a.createElement(E.a,null,F.name))),s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Gift Card Category"),s.a.createElement(f.a.Control,{name:"category",value:q.category,onChange:J,as:"select"},s.a.createElement("option",{value:"",disabled:!0},"Select..."),P.map((function(e,t){return s.a.createElement("option",{key:t,value:e.id},e.name)}))),s.a.createElement(E.a,null,F.category))),s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Discount Type*"),s.a.createElement(f.a.Control,{name:"type",value:q.type,onChange:J,as:"select"},s.a.createElement("option",{value:"",disabled:!0},"Select..."),s.a.createElement("option",{value:"percent"},"Percent"),s.a.createElement("option",{value:"fixed"},"Fixed")),s.a.createElement(E.a,null,F.type))),s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Rate*"),s.a.createElement(f.a.Control,{name:"rate",value:q.rate,onChange:J,type:"number",placeholder:"Rate"}),s.a.createElement(E.a,null,F.rate))),s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Code*"),s.a.createElement(f.a.Control,{name:"code",value:q.code,onChange:J,type:"text",placeholder:"Code"}),s.a.createElement(E.a,null,F.code))),s.a.createElement(d.a,{md:3},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null),s.a.createElement(f.a.Check,{name:"hasUniqueCode",onChange:J,checked:q.hasUniqueCode,style:{padding:"5px",paddingLeft:"20px"},type:"checkbox",label:"Has Unique Code"}),s.a.createElement(E.a,null,F.hasUniqueCode))),s.a.createElement(d.a,{md:3},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null),s.a.createElement(f.a.Check,{name:"isLimited",onChange:J,checked:q.isLimited,style:{padding:"5px",paddingLeft:"20px"},type:"checkbox",label:"Is Limited"}),s.a.createElement(E.a,null,F.isLimited))),q.isLimited?s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,null,s.a.createElement(f.a.Label,null,"Count Limit*"),s.a.createElement(f.a.Control,{name:"countLimit",value:q.countLimit,onChange:J,type:"number",placeholder:"Count Limit"}),s.a.createElement(E.a,null,F.countLimit))):null,s.a.createElement(d.a,{md:6},s.a.createElement(f.a.Group,{className:"d-flex flex-column justify-content-end"},s.a.createElement(f.a.Label,{style:{marginBottom:"15px"}},"Is Active?"),s.a.createElement(g.a,{onChange:function(e){N(Object(n.a)(Object(n.a)({},q),{},{isActive:e}))},checked:q.isActive})))),s.a.createElement("div",{className:"d-flex justify-content-end"},s.a.createElement(v.a,{variant:"warning",onClick:function(){e.history.push("/gift-cards")}},"Cancel"),s.a.createElement(v.a,{disabled:w,variant:"primary",onClick:function(){var t=Object(j.a)(q),a=t.isValid,r=t.errors;if(!a)return console.log(r),void I(Object(n.a)({},r));console.log("no errros"),k(!0);var c={action:"update",gift_card_uuid:q.uuid,name:q.name,code:q.code,discount_type:q.type,rate:parseFloat(q.rate),is_limited:q.isLimited,has_unique_codes:q.hasUniqueCode,count_limit:parseInt(q.countLimit),category:parseInt(q.category),is_active:q.isActive};console.log(JSON.stringify(c)),Object(x.l)(c).then((function(t){t.json.status?(O.a.fire({icon:"success",title:"Gift Card updated successfully!",background:"#dffff0"}),e.history.push("/gift-card/"+q.uuid)):(k(!1),O.a.fire({icon:"error",title:t.json.error,background:"#ffe5de"}))})).catch((function(e){k(!1),console.log(e)}))}},w?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fa fa-spinner text-c-white f-15 fa-pulse m-l-1"}),"Updating"):"Update")))))))}},262:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(306),u=a(36);t.a=function(e){return Object(u.a)(e.children)?r.a.createElement("span",null):r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a.Text,{style:{color:"red"}},e.children))}},263:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(){return r.a.createElement("div",{className:"loader-bg"},r.a.createElement("div",{className:"loader-track"},r.a.createElement("div",{className:"loader-fill"})))}},348:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"h",(function(){return l})),a.d(t,"m",(function(){return s})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return f})),a.d(t,"i",(function(){return d})),a.d(t,"f",(function(){return m})),a.d(t,"l",(function(){return v})),a.d(t,"d",(function(){return h})),a.d(t,"e",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"j",(function(){return y}));var n=a(20),r=a.n(n),c=a(33),u=a(47),i=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/category/add","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),o=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/categories/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/category/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/category/update","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/category/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/get","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/add","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/update","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcards/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/uniquecard/delete","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/redeem","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)("api/v1/payment/giftcard/redeem/history","POST",t,a);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}()},549:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(36),r=function(e){var t={};return Object(n.a)(e.name)&&(t.name="Name of tax cannot be empty!"),Object(n.a)(e.type)&&(t.type="Provide discount type of gift card!"),Object(n.a)(e.rate)&&(t.rate="Provide rate of gift card!"),Object(n.a)(e.code)&&(t.code="Provide code of gift card!"),e.isLimited&&Object(n.a)(e.countLimit)&&(t.countLimit="Provide count limit of gift card!"),{isValid:Object(n.a)(t),errors:t}}}}]);
//# sourceMappingURL=88.5ca649d7.chunk.js.map