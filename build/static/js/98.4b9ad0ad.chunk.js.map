{"version":3,"sources":["Pages/Items/Item.js","App/components/Reusables/DeleteModal.js","api/inventory/itemApi.js"],"names":["Item","props","React","useState","item","setItem","loading","setLoading","showModal","itemId","deleteData","setDeleteData","useEffect","controller","AbortController","getItem","action","item_id","match","params","id","signal","then","res","console","log","json","status","items","Jhilikka","fire","icon","title","error","background","catch","err","abort","_delete","toBeDeletedId","deleteItems","items_id","a","history","push","thumbnailImage","images","find","img","category","className","style","lineHeight","name","onClick","e","xl","Body","md","href","DEMO","SERVER_URL","image","src","alt","is_active","variant","category_str","description","vat_enabled","weight","weight_unit","average_cost_price","sales_price","sold","stock","map","instance","index","xs","sm","key","width","maxWidth","objectFit","padding","show","onCancel","onDelete","DeleteModal","border","color","boxShadow","onHide","Header","closeButton","margin","Title","paddingLeft","fontSize","fontWeight","message","display","flexDirection","justifyContent","noRedButton","redTitle","getItems","data","baseRequest","alert","createItem","updateItem","getItemFields","exportItems","importItems"],"mappings":"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","file":"static/js/98.4b9ad0ad.chunk.js","sourcesContent":["\n\n\n\nimport React from 'react';\nimport { Row, Col, Card, Table, Tabs, Tab, Badge } from 'react-bootstrap';\n\nimport Loader from '../../App/layout/Loader/index'\n\n\n\nimport { getItem, deleteItems } from '../../api/inventory/itemApi'\nimport DEMO from '../../globals/constant';\nimport DeleteModal from '../../App/components/Reusables/DeleteModal';\nimport Jhilikka from '../../App/components/Reusables/Jhilikka';\n\n\nconst Item = (props) => {\n\n\n    const [item, setItem] = React.useState({});\n    const [loading, setLoading] = React.useState(true);\n    const [deleteData, setDeleteData] = React.useState({ showModal: false, itemId: null })\n\n    React.useEffect(() => {\n\n        const controller = new AbortController();\n\n        getItem({ action: 'get', item_id: props.match.params.id }, controller.signal)\n            .then((res) => {\n                console.log(res.json)\n                if (res.json.status) {\n                    setItem(res.json.items[0])\n                    setLoading(false)\n                } else { Jhilikka.fire({ icon: 'error', title: res.json.error, background: '#ffe5de' }) }\n            }).catch((err) => {\n                console.log(err);\n            });\n\n        return () => {\n            controller.abort();\n        }\n    }, []);\n\n    const _triggerDeleteModal = (e) => {\n        setDeleteData({ showModal: true, itemId: props.match.params.id });\n    }\n\n    const _delete = (toBeDeletedId) => {\n        deleteItems({ action: 'delete', items_id: [toBeDeletedId] })\n            .then(async (res) => {\n                console.log(res)\n                if (res.json.status) {\n                    setDeleteData({ showModal: false, itemId: null })\n                    Jhilikka.fire({ icon: 'success', title: 'Item deleted successfully!', background: '#dffff0' })\n                    props.history.push('/items')\n                } else { Jhilikka.fire({ icon: 'error', title: res.json.error, background: '#ffe5de' }) }\n            }).catch((err) => {\n                console.log(err);\n            });\n    }\n\n    if (!loading) {\n        var thumbnailImage = item.images.find(img => img.category === 'THUMBNAIL');\n        if (!thumbnailImage) {\n            thumbnailImage = item.images[0];\n        }\n        console.log(thumbnailImage)\n    }\n\n\n\n    if (loading) return <Loader />\n    return (\n        <>\n            <Row className=\"d-flex justify-content-between pageHead\" >\n                <h4 className=\"m-b-10\" style={{ lineHeight: '33px' }} >{item.name}</h4>\n                <div>\n                    <button\n                        className=\"btn btn-primary btn-sm shadow-2 mb-4\"\n                        onClick={() => props.history.push(`/item/update/` + item.id)}\n                    > <i className=\"feather icon-edit text-c-white f-15 m-r-5\" />Update</button>\n                    <button\n                        className=\"btn btn-danger btn-sm shadow-2 mb-4\"\n                        onClick={_triggerDeleteModal}\n                    > <i className=\"feather icon-trash-2 text-c-white f-15 m-r-5\" />Delete</button>\n                </div>\n            </Row>\n            <Row>\n                <Col xl={2}></Col>\n                <Col xl={8}>\n                    <Card>\n                        <Card.Body>\n                            <h5 className='mb-4'>Item Profile</h5>\n                            <div className=\"row d-flex align-items-center\">\n\n                                <Col md={2}></Col>\n                                <Col md={8}>\n                                    <a href={thumbnailImage ? `${DEMO.SERVER_URL}${thumbnailImage.image}` : 'https://google.com'}>\n                                        <img src={thumbnailImage ? `${DEMO.SERVER_URL}${thumbnailImage.image}` : \"https://media.manufactum.de/is/image/Manufactum/750s_shop/maglia-stick-umbrella--68697_01.jpg\"} className=\"rounded w-25 mx-auto d-block\" alt=\"...\" />\n                                    </a>\n                                    <div className='mb-1 border-bottom'><b>Name</b></div>\n                                    <div className='mt-1 mb-3'>\n                                        {item.name} {\" \"}\n                                        {item.is_active ? (<Badge variant=\"info\">Active</Badge>) : (<Badge variant=\"secondary\">Inactive</Badge>)}\n                                    </div>\n\n                                    <div className='mb-1 border-bottom'><b>Category</b></div>\n                                    <div className='mt-1 mb-3'>{item.category_str}</div>\n\n                                    <div className='mb-1 border-bottom'><b>Description</b></div>\n                                    <div className='mt-1 mb-3'>{item.description}</div>\n\n\n                                    <div className='mb-1 border-bottom'><b>VAT'able?</b></div>\n                                    <div className='mt-1 mb-3'>{item.vat_enabled}</div>\n\n                                    <div className='mb-1 border-bottom'><b>Weight</b></div>\n                                    <div className='mt-1 mb-3'>{item.weight}{item.weight_unit}</div>\n\n                                    <div className=\"d-flex justify-content-between\" >\n                                        <div className=\"w-50\">\n                                            <div className='mb-1 border-bottom pr-4'><b>Cost Price</b></div>\n                                            <div className='mt-1 mb-3'>{item.average_cost_price}</div>\n                                        </div>\n                                        <div className=\"w-50 ml-4\">\n                                            <div className='mb-1 border-bottom pr-4'><b>Sales Price</b></div>\n                                            <div className='mt-1 mb-3'>{item.sales_price}</div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"d-flex justify-content-between\" >\n                                        <div className=\"w-50\">\n                                            <div className='mb-1 border-bottom pr-4'><b>Sold</b></div>\n                                            <div className='mt-1 mb-3'>{item.sold}{\" \"}</div>\n                                        </div>\n                                        <div className=\"w-50 ml-4\">\n                                            <div className='mb-1 border-bottom pr-4'><b>Stock</b></div>\n                                            <div className='mt-1 mb-3'>{item.stock}{\" \"}</div>\n                                        </div>\n                                    </div>\n                                    <Col md={2}></Col>\n                                    <Row>\n                                        {item.images.map((instance, index) => {\n                                            return <Col md={3} xs={6} sm={4} key={index} >\n                                                <img\n\n                                                    src={DEMO.SERVER_URL + instance.image}\n                                                    alt=\"\"\n                                                    style={{\n                                                        width: '120px',\n                                                        maxWidth: '150px',\n                                                        objectFit: 'cover',\n                                                        padding: '10px'\n                                                    }}\n                                                />\n                                            </Col>\n                                        })}\n                                    </Row>\n                                </Col>\n\n\n\n\n\n\n                            </div>\n\n\n\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col xl={2}></Col>\n\n                <DeleteModal\n                    show={deleteData.showModal}\n                    onCancel={() => setDeleteData({ ...deleteData, showModal: false })}\n                    onDelete={() => _delete(deleteData.itemId)}\n                />\n\n            </Row>\n        </>\n    );\n}\n\nexport default Item;\n","import React from 'react';\n\nimport { Modal, Button } from 'react-bootstrap';\n\nconst DeleteModal = (props) => {\n\n\n    return (\n        <Modal\n            style={{ border: 'none', color: '#3d4075', boxShadow: '0 0 10px red' }}\n            show={props.show}\n            onHide={props.onCancel}\n        >\n            <Modal.Header closeButton style={{ margin: 'auto 5px' }}>\n                <Modal.Title style={{ paddingLeft: '15px', color: '#3d4075', fontSize: '1.4em', fontWeight: 'bold' }}>Are you sure?</Modal.Title>\n            </Modal.Header>\n\n            <Modal.Body\n                style={{ paddingLeft: '30px' }}\n            >\n                {props.message ? props.message : 'This action cannot be undone.'}\n            </Modal.Body>\n\n\n            <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'flex-end', padding: '10px' }}>\n                <Button variant=\"secondary\" onClick={props.onCancel}>\n                    <b>Cancel</b>\n                </Button>\n                {props.noRedButton ?\n                    null :\n                    <Button variant=\"danger\" onClick={props.onDelete}>\n                        <b>{props.redTitle || 'Delete'}</b>\n                    </Button>\n                }\n            </div>\n        </Modal >\n    )\n\n}\n\nexport default DeleteModal;","import { baseRequest } from '../base';\n// api for items \nconst getItems = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/items/get', 'POST', data, signal);\n  } catch (e) {\n    alert(e)\n  }\n};\nconst deleteItems = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/items/delete', 'POST', data, signal);\n  } catch (e) {\n    alert(e)\n  }\n};\nconst createItem = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/item/add', 'POST', data, signal);\n  } catch (e) {\n    alert(e)\n  }\n};\nconst getItem = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/item/get', 'POST', data, signal);\n  } catch (e) {\n    alert(e)\n  }\n};\nconst updateItem = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/item/update', 'POST', data, signal);\n  } catch (e) {\n    alert(e);\n  }\n};\nconst getItemFields = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/items/export', 'POST', data, signal);\n  } catch (e) {\n    alert(e);\n  }\n};\nconst exportItems = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/items/export', 'POST', data, signal);\n  } catch (e) {\n    alert(e);\n  }\n};\nconst importItems = async (data, signal) => {\n  try {\n    return await baseRequest('api/v1/inventory/import', 'POST', data, signal);\n  } catch (e) {\n    alert(e);\n  }\n};\n\n\nexport {\n  getItems,\n  createItem,\n  deleteItems,\n  updateItem,\n  getItem,\n  getItemFields,\n  exportItems,\n  importItems,\n}\n"],"sourceRoot":""}