{"version":3,"sources":["Pages/Profile/Profile.js","api/userManagement/users.js"],"names":["connect","state","auth","props","React","useState","userData","setUserData","userProfile","setUserProfile","loading","setLoading","showModal","user","deactivateData","setDeactivateData","useEffect","controller","AbortController","getUser","action","filter","user_id","signal","then","res","console","log","json","status","users","profile","catch","err","abort","_selfDeactivate","a","requestJson","id","toggleUserActivity","is_active","Jhilikka","fire","icon","title","background","error","UserPhoto","href","DEMO","SERVER_URL","profile_image","src","className","alt","e","style","lineHeight","name","onClick","history","push","xl","Body","md","variant","username","email","role_str","phone_number","phone_number2","address","post","last_login","border","color","boxShadow","show","onHide","Header","closeButton","margin","Title","paddingLeft","fontSize","fontWeight","display","flexDirection","justifyContent","padding","createUser","data","baseRequest","alert","getUsers","updateUser"],"mappings":"8RAuNeA,sBAJSC,IAAK,CACzBC,KAAMD,EAAMC,OAGDF,CArMEG,IAAW,IAAD,EAGSC,IAAMC,SAAS,MAHxB,mBAGhBC,EAHgB,KAGNC,EAHM,OAIeH,IAAMC,SAAS,MAJ9B,mBAIhBG,EAJgB,KAIHC,EAJG,OAKOL,IAAMC,UAAS,GALtB,mBAKhBK,EALgB,KAKPC,EALO,OAMqBP,IAAMC,SAAS,CAAEO,WAAW,EAAOC,KAAM,KAN9D,mBAMhBC,EANgB,KAMAC,EANA,KAQvBX,IAAMY,UAAU,KACZ,IAAMC,EAAa,IAAIC,gBAavB,OAZAC,YAAQ,CAAEC,OAAQ,MAAOC,OAAQ,KAAMC,QAASnB,EAAMD,KAAKW,KAAKS,SAAWL,EAAWM,QACjFC,KAAKC,IACFC,QAAQC,IAAIF,EAAIG,MACZH,EAAIG,KAAKC,SACTtB,EAAYkB,EAAIG,KAAKE,MAAM,IAC3BrB,EAAegB,EAAIG,KAAKE,MAAM,GAAGC,SAAW,MAC5CpB,GAAW,MAGlBqB,MAAMC,IACHP,QAAQC,IAAIM,KAEb,IAAMhB,EAAWiB,SACzB,IAIH,IAIMC,EAAe,uCAAG,8BAAAC,EAAA,sDACdvB,EAAOC,EAAeD,KACtBwB,EAAc,CAChB,OAAU,aACV,QAAWxB,EAAKyB,IAEpBZ,QAAQC,IAAIU,GACZE,YAAmBF,GACdb,KAAKC,IACFC,QAAQC,IAAIF,GACRA,EAAIG,KAAKC,QACTtB,EAAY,2BAAKD,GAAN,IAAgBkC,WAAYlC,EAASkC,aAChDzB,EAAkB,2BAAKA,GAAN,IAAyBH,WAAW,EAAOC,KAAM,MAClE4B,IAASC,KAAK,CAAEC,KAAM,UAAWC,MAAM,QAAD,OAAU/B,EAAK2B,UAAY,cAAgB,YAA3C,kBAAwEK,WAAY,aACrHJ,IAASC,KAAK,CAAEC,KAAM,QAASC,MAAOnB,EAAIG,KAAKkB,MAAOD,WAAY,cAE9Eb,MAAMC,IACHP,QAAQC,IAAIM,KAjBA,2CAAH,qDAwBrB,GAAIvB,EAAS,OAAO,kBAAC,IAAD,MAEpB,IACI,IAAIqC,EACA,uBAAGC,KAAI,UAAKC,IAAKC,YAAV,OAAuB1C,EAAY2C,gBACtC,yBACIC,IAAG,UAAKH,IAAKC,YAAV,OAAuB1C,EAAY2C,eACtCE,UAAU,+BAA+BC,IAAI,SAG3D,MAAOC,GACDR,EACA,uBAAGC,KAAI,kDACH,yBACII,IAAG,iDACHC,UAAU,+BAA+BC,IAAI,SAO7D,OACI,oCACI,kBAAC,IAAD,CAAKD,UAAU,2CACX,wBAAIA,UAAU,SAASG,MAAO,CAAEC,WAAY,SAAYnD,EAASoD,MACjE,6BAEI,4BACIL,UAAU,uCACVM,QAAS,IAAMxD,EAAMyD,QAAQC,KAAd,oBAFnB,IAGE,uBAAGR,UAAU,8CAHf,UAKA,4BACIA,UAAU,sCACVM,QAAS,KA9DzB5C,EAAkB,CAAEH,WAAW,EAAMC,KA8DoBP,MAEzC,uBAAG+C,UAAU,gDAJjB,yBAWR,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAKS,GAAI,IACT,kBAAC,IAAD,CAAKA,GAAI,GACL,kBAAC,IAAD,KACI,kBAAC,IAAKC,KAAN,KACI,wBAAIV,UAAU,QAAd,gBACA,yBAAKA,UAAU,iCAEX,kBAAC,IAAD,CAAKW,GAAI,IAET,kBAAC,IAAD,CAAKA,GAAI,GAEJjB,EACD,yBAAKM,UAAU,sBAAqB,oCACpC,yBAAKA,UAAU,aACV/C,EAASoD,KADd,IACqB,IAChBpD,EAASkC,UAAa,kBAAC,IAAD,CAAOyB,QAAQ,QAAf,UAAyC,kBAAC,IAAD,CAAOA,QAAQ,aAAf,gBAIpE,yBAAKZ,UAAU,sBAAqB,wCACpC,yBAAKA,UAAU,aAAa/C,EAAS4D,UAErC,yBAAKb,UAAU,sBAAqB,qCACpC,yBAAKA,UAAU,aAAa/C,EAAS6D,OAErC,yBAAKd,UAAU,sBAAqB,oCACpC,yBAAKA,UAAU,aAAa/C,EAAS8D,UAEpC5D,EACG,oCACI,yBAAK6C,UAAU,kCACX,yBAAKA,UAAU,QACX,yBAAKA,UAAU,2BAA0B,uCACzC,yBAAKA,UAAU,aAAa7C,EAAY6D,eAE5C,yBAAKhB,UAAU,aACX,yBAAKA,UAAU,2BAA0B,uCACzC,yBAAKA,UAAU,aAAa7C,EAAY8D,iBAIhD,yBAAKjB,UAAU,sBAAqB,uCACpC,yBAAKA,UAAU,aAAa7C,EAAY+D,SAExC,yBAAKlB,UAAU,sBAAqB,oCACpC,yBAAKA,UAAU,aAAa7C,EAAYgE,OAE1C,KAEN,yBAAKnB,UAAU,sBAAqB,0CACpC,yBAAKA,UAAU,aAAa/C,EAASmE,aAGzC,kBAAC,IAAD,CAAKT,GAAI,QAQzB,kBAAC,IAAD,CAAKF,GAAI,IAET,kBAAC,IAAD,CACIN,MAAO,CAAEkB,OAAQ,OAAQC,MAAO,UAAWC,UAAW,gBACtDC,KAAM/D,EAAeF,UACrBkE,OAAQ,IAAM/D,EAAkB,2BAAKD,GAAN,IAAsBF,WAAW,EAAOC,KAAM,OAE7E,kBAAC,IAAMkE,OAAP,CAAcC,aAAW,EAACxB,MAAO,CAAEyB,OAAQ,aACvC,kBAAC,IAAMC,MAAP,CAAa1B,MAAO,CAAE2B,YAAa,OAAQR,MAAO,UAAWS,SAAU,QAASC,WAAY,SAA5F,kBAGJ,kBAAC,IAAMtB,KAAP,CACIP,MAAO,CAAE2B,YAAa,SAD1B,sIAOA,yBAAK3B,MAAO,CAAE8B,QAAS,OAAQC,cAAe,MAAOC,eAAgB,WAAYC,QAAS,SACtF,kBAAC,IAAD,CAAQxB,QAAQ,YAAYN,QAAS,IAAM5C,EAAkB,2BAAKD,GAAN,IAAsBF,WAAW,EAAOC,KAAM,OAA1G,UAGA,kBAAC,IAAD,CAAQoD,QAAQ,SAASN,QAASxB,GAAlC,qB,gPCrMlBuD,EAAU,uCAAG,WAAOC,EAAMpE,GAAb,SAAAa,EAAA,+EAEEwD,YAAY,kBAAmB,OAAQD,EAAMpE,GAF/C,wEAIXsE,MAAM,EAAD,IAJM,wDAAH,wDASVC,EAAQ,uCAAG,WAAOH,EAAMpE,GAAb,SAAAa,EAAA,+EAEIwD,YAAY,mBAAoB,OAAQD,EAAMpE,GAFlD,wEAITsE,MAAM,EAAD,IAJI,wDAAH,wDAURE,EAAU,uCAAG,WAAOJ,EAAMpE,GAAb,SAAAa,EAAA,+EAEEwD,YAAY,qBAAsB,OAAQD,EAAMpE,GAFlD,wEAIXsE,MAAM,EAAD,IAJM,wDAAH,wDASVtD,EAAkB,uCAAG,WAAOoD,EAAMpE,GAAb,SAAAa,EAAA,+EAENwD,YAAY,qBAAsB,OAAQD,EAAMpE,GAF1C,wEAInBsE,MAAM,EAAD,IAJc,wDAAH,wDAQlB1E,EAAO,uCAAG,WAAOwE,EAAMpE,GAAb,SAAAa,EAAA,+EAEKwD,YAAY,mBAAoB,OAAQD,EAAMpE,GAFnD,wEAIRsE,MAAM,EAAD,IAJG,wDAAH","file":"static/js/107.4b829482.chunk.js","sourcesContent":["\n\n\n\nimport React from 'react';\nimport { Row, Col, Card, Table, Tabs, Tab, Badge, Modal, Button, } from 'react-bootstrap';\n\nimport Loader from '../../App/layout/Loader/index'\n\n\n\nimport DEMO from '../../globals/constant';\nimport Jhilikka from '../../App/components/Reusables/Jhilikka';\nimport { toggleUserActivity, getUser } from '../../api/userManagement/users';\nimport store from '../../redux/store';\nimport { connect } from 'react-redux';\n\n\nconst Profile = (props) => {\n\n\n    const [userData, setUserData] = React.useState(null);\n    const [userProfile, setUserProfile] = React.useState(null);\n    const [loading, setLoading] = React.useState(true);\n    const [deactivateData, setDeactivateData] = React.useState({ showModal: false, user: {} })\n\n    React.useEffect(() => {\n        const controller = new AbortController();\n        getUser({ action: 'get', filter: 'id', user_id: props.auth.user.user_id }, controller.signal)\n            .then(res => {\n                console.log(res.json);\n                if (res.json.status) {\n                    setUserData(res.json.users[0])\n                    setUserProfile(res.json.users[0].profile || null)\n                    setLoading(false)\n                }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n        return () => controller.abort();\n    }, [])\n\n\n\n    const _triggerDeactivationModal = (user) => {\n        setDeactivateData({ showModal: true, user: user });\n    }\n\n    const _selfDeactivate = async () => {\n        const user = deactivateData.user\n        const requestJson = {\n            'action': 'deactivate',\n            'user_id': user.id\n        }\n        console.log(requestJson)\n        toggleUserActivity(requestJson)\n            .then(res => {\n                console.log(res);\n                if (res.json.status) {\n                    setUserData({ ...userData, is_active: !userData.is_active })\n                    setDeactivateData({ ...setDeactivateData, showModal: false, user: {} })\n                    Jhilikka.fire({ icon: 'success', title: `User ${user.is_active ? 'deactivated' : 'activated'} successfully!`, background: '#dffff0' })\n                } else { Jhilikka.fire({ icon: 'error', title: res.json.error, background: '#ffe5de' }) }\n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n\n\n\n    if (loading) return <Loader />\n\n    try {\n        var UserPhoto =\n            <a href={`${DEMO.SERVER_URL}${userProfile.profile_image}`}>\n                <img\n                    src={`${DEMO.SERVER_URL}${userProfile.profile_image}`}\n                    className=\"rounded w-25 mx-auto d-block\" alt=\"...\"\n                />\n            </a>\n    } catch (e) {\n        var UserPhoto =\n            <a href={`https://www.w3schools.com/w3images/avatar6.png`}>\n                <img\n                    src={`https://www.w3schools.com/w3images/avatar6.png`}\n                    className=\"rounded w-25 mx-auto d-block\" alt=\"...\"\n                />\n            </a>\n    }\n\n\n\n    return (\n        <>\n            <Row className=\"d-flex justify-content-between pageHead\" >\n                <h4 className=\"m-b-10\" style={{ lineHeight: '33px' }} >{userData.name}</h4>\n                <div>\n\n                    <button\n                        className=\"btn btn-primary btn-sm shadow-2 mb-4\"\n                        onClick={() => props.history.push(`/profile/update`)}\n                    > <i className=\"feather icon-edit text-c-white f-15 m-r-5\" />Update</button>\n\n                    <button\n                        className=\"btn btn-danger btn-sm shadow-2 mb-4\"\n                        onClick={() => _triggerDeactivationModal(userData)}\n                    >\n                        <i className=\"feather icon-user-x text-c-white f-15 m-r-5\" />\n                            Deactivate Yourself\n                    </button>\n\n\n                </div>\n            </Row>\n            <Row>\n                <Col xl={2}></Col>\n                <Col xl={8}>\n                    <Card>\n                        <Card.Body>\n                            <h5 className='mb-4'>Your Profile</h5>\n                            <div className=\"row d-flex align-users-center\">\n\n                                <Col md={2}></Col>\n\n                                <Col md={8}>\n\n                                    {UserPhoto}\n                                    <div className='mb-1 border-bottom'><b>Name</b></div>\n                                    <div className='mt-1 mb-3'>\n                                        {userData.name} {\" \"}\n                                        {userData.is_active ? (<Badge variant=\"info\">Active</Badge>) : (<Badge variant=\"secondary\">Deactivated</Badge>)}\n                                    </div>\n\n\n                                    <div className='mb-1 border-bottom'><b>Username</b></div>\n                                    <div className='mt-1 mb-3'>{userData.username}</div>\n\n                                    <div className='mb-1 border-bottom'><b>Email</b></div>\n                                    <div className='mt-1 mb-3'>{userData.email}</div>\n\n                                    <div className='mb-1 border-bottom'><b>Role</b></div>\n                                    <div className='mt-1 mb-3'>{userData.role_str}</div>\n\n                                    {userProfile ?\n                                        <>\n                                            <div className=\"d-flex justify-content-between\" >\n                                                <div className=\"w-50\">\n                                                    <div className='mb-1 border-bottom pr-4'><b>Phone 1</b></div>\n                                                    <div className='mt-1 mb-3'>{userProfile.phone_number}</div>\n                                                </div>\n                                                <div className=\"w-50 ml-4\">\n                                                    <div className='mb-1 border-bottom pr-4'><b>Phone 2</b></div>\n                                                    <div className='mt-1 mb-3'>{userProfile.phone_number2}</div>\n                                                </div>\n                                            </div>\n\n                                            <div className='mb-1 border-bottom'><b>Address</b></div>\n                                            <div className='mt-1 mb-3'>{userProfile.address}</div>\n\n                                            <div className='mb-1 border-bottom'><b>Post</b></div>\n                                            <div className='mt-1 mb-3'>{userProfile.post}</div>\n                                        </>\n                                        : null}\n\n                                    <div className='mb-1 border-bottom'><b>Last Login</b></div>\n                                    <div className='mt-1 mb-3'>{userData.last_login}</div>\n\n                                </Col>\n                                <Col md={2}></Col>\n                            </div>\n\n\n\n                        </Card.Body>\n                    </Card>\n                </Col>\n                <Col xl={2}></Col>\n\n                <Modal\n                    style={{ border: 'none', color: '#3d4075', boxShadow: '0 0 10px red' }}\n                    show={deactivateData.showModal}\n                    onHide={() => setDeactivateData({ ...deactivateData, showModal: false, user: {} })}\n                >\n                    <Modal.Header closeButton style={{ margin: 'auto 5px' }}>\n                        <Modal.Title style={{ paddingLeft: '15px', color: '#3d4075', fontSize: '1.4em', fontWeight: 'bold' }}>Are you sure?</Modal.Title>\n                    </Modal.Header>\n\n                    <Modal.Body\n                        style={{ paddingLeft: '30px' }}\n                    >\n                        You will be deactivated and logged out from the system. You will need to contact system admin to be able to use this system again.\n                    </Modal.Body>\n\n\n                    <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'flex-end', padding: '10px' }}>\n                        <Button variant=\"secondary\" onClick={() => setDeactivateData({ ...deactivateData, showModal: false, user: {} })}>\n                            Cancel\n                            </Button>\n                        <Button variant=\"danger\" onClick={_selfDeactivate}>\n                            Deactivate\n                            </Button>\n                    </div>\n                </Modal>\n            </Row>\n        </>\n    );\n}\n\nconst mapStateToProps = state => ({\n    auth: state.auth\n})\n\nexport default connect(mapStateToProps)(Profile);\n","import { baseRequest } from '../base'\n\n//api for user management by the admin or manager (managing others)\n\nconst createUser = async (data, signal) => {\n    try {\n        return await baseRequest(\"api/v1/user/add\", \"POST\", data, signal);\n    } catch (e) {\n        alert(e);\n    }\n};\n\n\nconst getUsers = async (data, signal) => {\n    try {\n        return await baseRequest(\"api/v1/user/list\", \"POST\", data, signal);\n    } catch (e) {\n        alert(e);\n    }\n};\n\n\n\nconst updateUser = async (data, signal) => {\n    try {\n        return await baseRequest(\"api/v1/user/update\", \"POST\", data, signal);\n    } catch (e) {\n        alert(e);\n    }\n};\n\n\nconst toggleUserActivity = async (data, signal) => {\n    try {\n        return await baseRequest(\"api/v1/user/delete\", \"POST\", data, signal);\n    } catch (e) {\n        alert(e);\n    }\n};\n\nconst getUser = async (data, signal) => {\n    try {\n        return await baseRequest(\"api/v1/user/list\", \"POST\", data, signal);\n    } catch (e) {\n        alert(e);\n    }\n};\n\n\n\n\nexport {\n    createUser,\n    getUser,\n    updateUser,\n    getUsers,\n    toggleUserActivity,\n}"],"sourceRoot":""}